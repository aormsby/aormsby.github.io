<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Github Action: Fork Sync With Upstream | Adam Ormsby</title><meta name=keywords content="Github Actions,Sync Fork With Upstream,Sync Fork With Upstream Github Actions,git fork,git,git submodule,github,github workflow,git fork sync,git sync,upstream repository"><meta name=description content="These days, automation is key to saving time and minimizing errors. But if you&rsquo;ve never worked with automation, it&rsquo;s good to start small. This was exactly my thought when I made my first Github Action. Let&rsquo;s see what it does!"><meta name=author content="Adam Ormsby"><link rel=canonical href=https://www.adamormsby.com/posts/000/fork-sync-with-upstream/><link crossorigin=anonymous href=/assets/css/stylesheet.198f03125e4b4594e4693d1d2dad2db811b7cc1485a74be39b473c9ba02319cc.css integrity="sha256-GY8DEl5LRZTkaT0dLa0tuBG3zBSFp0vjm0c8m6AjGcw=" rel="preload stylesheet" as=style><link rel=icon href=https://www.adamormsby.com/site-img/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://www.adamormsby.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.adamormsby.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.adamormsby.com/apple-touch-icon.png><link rel=mask-icon href=https://www.adamormsby.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.adamormsby.com/posts/000/fork-sync-with-upstream/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://www.adamormsby.com/posts/000/fork-sync-with-upstream/"><meta property="og:site_name" content="Adam Ormsby"><meta property="og:title" content="Github Action: Fork Sync With Upstream"><meta property="og:description" content="These days, automation is key to saving time and minimizing errors. But if youâ€™ve never worked with automation, itâ€™s good to start small. This was exactly my thought when I made my first Github Action. Letâ€™s see what it does!"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-14T20:00:00-05:00"><meta property="article:modified_time" content="2021-09-10T20:00:00-05:00"><meta property="article:tag" content="Github"><meta property="article:tag" content="Open Source"><meta property="article:tag" content="Automation"><meta property="article:tag" content="Submodules"><meta property="og:image" content="https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png"><meta name=twitter:title content="Github Action: Fork Sync With Upstream"><meta name=twitter:description content="These days, automation is key to saving time and minimizing errors. But if you&rsquo;ve never worked with automation, it&rsquo;s good to start small. This was exactly my thought when I made my first Github Action. Let&rsquo;s see what it does!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.adamormsby.com/posts/"},{"@type":"ListItem","position":2,"name":"Github Action: Fork Sync With Upstream","item":"https://www.adamormsby.com/posts/000/fork-sync-with-upstream/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Github Action: Fork Sync With Upstream","name":"Github Action: Fork Sync With Upstream","description":"These days, automation is key to saving time and minimizing errors. But if you\u0026rsquo;ve never worked with automation, it\u0026rsquo;s good to start small. This was exactly my thought when I made my first Github Action. Let\u0026rsquo;s see what it does!","keywords":["Github Actions","Sync Fork With Upstream","Sync Fork With Upstream Github Actions","git fork","git","git submodule","github","github workflow","git fork sync","git sync","upstream repository"],"articleBody":" View on Github\nThese days, automation is key to saving time and minimizing errors. But if youâ€™ve never worked with automation, itâ€™s good to start small. This was exactly my thought when I made my first Github Action. Itâ€™s available now on the Github Marketplace if you want to try it out - Fork Sync With Upstream. Letâ€™s see what it does!\nHow It Works Remember my post on making modifications to a Hugo theme? We forked a theme repository and saw how to make custom modifications to our local version of it. Whenever we wanted to pull updates from the source repo, we ran a bunch of git commands to pull new commits from the upstream repo and then push them to our fork. Syncing with commands like that is all well and good, but letâ€™s save ourselves a little time by automating that process.\nThe Fork Sync With Upstream action takes care of all those updates for us without any work on our part. At its core, the action is a shell script that runs on a Github server and automatically does the following:\nCheckout your fork (needed for the sync process) Set the upstream repo to pull updates from Check if there are any new commits to sync (and print the commit information) Pull from the upstream repo Push to the target branch of the target repo Just add my action to a Github workflow file in your repo, and voila! All that update work you were doing manually is now automated!\nRunning the Fork Sync If youâ€™ve never made a Github workflow before, itâ€™s a little bit confusing to figure out at first. (At least, it all was for me.) I recommend reading some of the Github Actions documentation to get a better feel for how all the pieces work together.\nFor those looking for a quick sample workflow, hereâ€™s the one Iâ€™m using in my fork of Hello Friend.\non: schedule: - cron: '0 7 * * 1,4' # scheduled at 07:00 every Monday and Thursday jobs: sync_with_upstream: runs-on: ubuntu-latest name: Sync master with upstream latest steps: - name: Checkout master uses: actions/checkout@v2 with: ref: master - name: Pull upstream changes id: sync uses: aormsby/Fork-Sync-With-Upstream-action@v1 with: upstream_repository: panr/hugo-theme-hello-friend upstream_branch: master - name: Timestamp run: date This may not be the only Action built for syncing with a remote, but it certainly has a better README than many of the other ones Iâ€™ve seen! For more details on using input variables and options, visit the official Marketplace page for Fork Sync With Upstream.\nBehind The Scenes Just some extra dev notes if youâ€™re interested. ðŸ™‚\nGithub Actions currently have to be created as Docker container actions or JavaScript actions. I went with JavaScript because itâ€™s more familiar to me, and I donâ€™t need to run this action in any specific Docker-simulated environment.\nThe action.yaml file declares all the input variables needed for the action and then runs main.js. At the moment, main.js exists only to run the shell script upstream-sync.sh, which is where the sync really happens. This could change in the future.\nI used both @actions/core and @actions/exec from the Github Actions Toolkit to simplify the functionality in main.js. The shell script is called by exec, which I think of as an â€™easyâ€™ version of the exec function in node.js. Some of the actions and tools that Github has made are really quite useful.\nAnyway, try it out! Let me know how you like it. Iâ€™m also planning on turning my shell deploy script into an action, so be on the lookout for that. And if you like my work, please consider buying me a coffee. Cheers!\n","wordCount":"612","inLanguage":"en","image":"https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png","datePublished":"2020-08-14T20:00:00-05:00","dateModified":"2021-09-10T20:00:00-05:00","author":{"@type":"Person","name":"Adam Ormsby"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.adamormsby.com/posts/000/fork-sync-with-upstream/"},"publisher":{"@type":"Organization","name":"Adam Ormsby","logo":{"@type":"ImageObject","url":"https://www.adamormsby.com/site-img/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.adamormsby.com/ accesskey=h title="Adam Ormsby (Alt + H)">Adam Ormsby</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.adamormsby.com/ title=Posts><span>Posts</span></a></li><li><a href=https://linkedin.com/in/adamormsby title=LinkedIn><span>LinkedIn</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://github.com/aromsby title=GitHub><span>GitHub</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Github Action: Fork Sync With Upstream</h1><div class=post-meta><span title='2020-08-14 20:00:00 -0500 -0500'>Aug 14, 2020</span></div></header><figure class=entry-cover><a href=https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png target=_blank rel="noopener noreferrer"><img loading=eager srcset='https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover_hu_a071a66e74cd6094.png 360w,https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover_hu_1e71eb2279fc869e.png 480w,https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png 700w' src=https://www.adamormsby.com/posts/000/fork-sync-with-upstream/cover.png sizes="(min-width: 768px) 720px, 100vw" width=700 height=150 alt="Cover photo for Github Action: Fork Sync With Upstream"></a></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#how-it-works aria-label="How It Works">How It Works</a></li><li><a href=#running-the-fork-sync aria-label="Running the Fork Sync">Running the Fork Sync</a></li><li><a href=#behind-the-scenes aria-label="Behind The Scenes">Behind The Scenes</a></li></ul></div></details></div><div class=post-content><form action=https://github.com/aormsby/Fork-Sync-With-Upstream-action target=_blank><button class=button style="margin:18px 0;padding:12px;display:flex;align-items:center;justify-content:flex-start" type=submit>
<img src=/octocat-filled.svg alt="Github logo" width=32px style="margin:0 12px 0 0"><p style=margin:0>View on Github</p></button></form><p>These days, automation is key to saving time and minimizing errors. But if you&rsquo;ve never worked with automation, it&rsquo;s good to start small. This was exactly my thought when I made my first Github Action. It&rsquo;s available now on the Github Marketplace if you want to try it out - <a href=https://github.com/marketplace/actions/upstream-sync>Fork Sync With Upstream</a>. Let&rsquo;s see what it does!</p><h2 id=how-it-works>How It Works<a hidden class=anchor aria-hidden=true href=#how-it-works>#</a></h2><p>Remember my post on <a href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/>making modifications to a Hugo theme</a>? We forked a theme repository and saw how to make custom modifications to our local version of it. Whenever we wanted to pull updates from the source repo, we ran a bunch of git commands to pull new commits from the upstream repo and then push them to our fork. Syncing with commands like that is all well and good, but let&rsquo;s save ourselves a little time by automating that process.</p><p>The Fork Sync With Upstream action takes care of all those updates for us without any work on our part. At its core, the action is a shell script that runs on a Github server and automatically does the following:</p><ul><li>Checkout your fork (needed for the sync process)</li><li>Set the upstream repo to pull updates from</li><li>Check if there are any new commits to sync (and print the commit information)</li><li>Pull from the upstream repo</li><li>Push to the target branch of the target repo</li></ul><p>Just add my action to a Github workflow file in your repo, and <em>voila!</em> All that update work you were doing manually is now automated!</p><h2 id=running-the-fork-sync>Running the Fork Sync<a hidden class=anchor aria-hidden=true href=#running-the-fork-sync>#</a></h2><p>If you&rsquo;ve never made a Github workflow before, it&rsquo;s a little bit confusing to figure out at first. (At least, it all was for me.) I recommend reading some of the <a href=https://docs.github.com/en/actions>Github Actions documentation</a> to get a better feel for how all the pieces work together.</p><p>For those looking for a quick sample workflow, here&rsquo;s the one I&rsquo;m using in <a href=https://github.com/aormsby/F-hugo-theme-hello-friend>my fork of Hello Friend</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>schedule</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>cron</span>:  <span style=color:#e6db74>&#39;0 7 * * 1,4&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># scheduled at 07:00 every Monday and Thursday</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>sync_with_upstream</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Sync master with upstream latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout master</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>ref</span>: <span style=color:#ae81ff>master</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Pull upstream changes</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>id</span>: <span style=color:#ae81ff>sync</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>aormsby/Fork-Sync-With-Upstream-action@v1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>upstream_repository</span>: <span style=color:#ae81ff>panr/hugo-theme-hello-friend</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>upstream_branch</span>: <span style=color:#ae81ff>master</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Timestamp</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: <span style=color:#ae81ff>date</span>
</span></span></code></pre></div><p>This may not be the only Action built for syncing with a remote, but it certainly has a better README than many of the other ones I&rsquo;ve seen! For more details on using input variables and options, visit the official Marketplace page for <a href=https://github.com/marketplace/actions/upstream-sync>Fork Sync With Upstream</a>.</p><h2 id=behind-the-scenes>Behind The Scenes<a hidden class=anchor aria-hidden=true href=#behind-the-scenes>#</a></h2><p>Just some extra dev notes if you&rsquo;re interested. &#x1f642;</p><p>Github Actions currently have to be created as Docker container actions or JavaScript actions. I went with JavaScript because it&rsquo;s more familiar to me, and I don&rsquo;t need to run this action in any specific Docker-simulated environment.</p><p>The <code>action.yaml</code> file declares all the input variables needed for the action and then runs <code>main.js</code>. At the moment, <code>main.js</code> exists only to run the shell script <code>upstream-sync.sh</code>, which is where the sync really happens. This could change in the future.</p><p>I used both <code>@actions/core</code> and <code>@actions/exec</code> from the <a href=https://github.com/actions/toolkit>Github Actions Toolkit</a> to simplify the functionality in <code>main.js</code>. The shell script is called by <code>exec</code>, which I think of as an &rsquo;easy&rsquo; version of the <code>exec</code> function in node.js. Some of the actions and tools that Github has made are really quite useful.</p><p>Anyway, try it out! Let me know how you like it. I&rsquo;m also planning on turning my <a href=https://www.adamormsby.com/posts/000/hugo-shell-deploy-script/>shell deploy script</a> into an action, so be on the lookout for that. And if you like my work, please consider buying me a coffee. Cheers!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.adamormsby.com/tags/github/>Github</a></li><li><a href=https://www.adamormsby.com/tags/open-source/>Open Source</a></li><li><a href=https://www.adamormsby.com/tags/automation/>Automation</a></li><li><a href=https://www.adamormsby.com/tags/submodules/>Submodules</a></li></ul><nav class=paginav><a class=prev href=https://www.adamormsby.com/posts/008-fork-and-deploy-updates/><span class=title>Â« Prev</span><br><span>Github Actions - Updated!</span>
</a><a class=next href=https://www.adamormsby.com/posts/000/hugo-shell-deploy-script/><span class=title>Next Â»</span><br><span>Build and Deploy: A Shell Script for Hugo Sites</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.adamormsby.com/>Adam Ormsby</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script data-goatcounter=https://aoappdev.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>