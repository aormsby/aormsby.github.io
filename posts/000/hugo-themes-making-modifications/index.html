<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugo Themes - Making Modifications while Keeping the Source Up-To-Date | Adam Ormsby</title><meta name=keywords content="Hugo,Github,submodules,git submodules,git,website,how to use submodules,git command line,JAMStack,git branch workflow,branch workflow,parallel branches,Hugo theme customization,git remote"><meta name=description content="In today&rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. We&rsquo;ll see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source."><meta name=author content="Adam Ormsby"><link rel=canonical href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/><link crossorigin=anonymous href=/assets/css/stylesheet.198f03125e4b4594e4693d1d2dad2db811b7cc1485a74be39b473c9ba02319cc.css integrity="sha256-GY8DEl5LRZTkaT0dLa0tuBG3zBSFp0vjm0c8m6AjGcw=" rel="preload stylesheet" as=style><link rel=icon href=https://www.adamormsby.com/site-img/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://www.adamormsby.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.adamormsby.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.adamormsby.com/apple-touch-icon.png><link rel=mask-icon href=https://www.adamormsby.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/"><meta property="og:site_name" content="Adam Ormsby"><meta property="og:title" content="Hugo Themes - Making Modifications while Keeping the Source Up-To-Date"><meta property="og:description" content="In today’s post, I want to take a look at how we can keep our Hugo themes up-to-date. The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. We’ll see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-19T18:30:00-05:00"><meta property="article:modified_time" content="2020-05-19T18:30:00-05:00"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Git"><meta property="article:tag" content="Submodules"><meta property="article:tag" content="Jamstack"><meta property="og:image" content="https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg"><meta name=twitter:title content="Hugo Themes - Making Modifications while Keeping the Source Up-To-Date"><meta name=twitter:description content="In today&rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. We&rsquo;ll see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.adamormsby.com/posts/"},{"@type":"ListItem","position":2,"name":"Hugo Themes - Making Modifications while Keeping the Source Up-To-Date","item":"https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo Themes - Making Modifications while Keeping the Source Up-To-Date","name":"Hugo Themes - Making Modifications while Keeping the Source Up-To-Date","description":"In today\u0026rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. We\u0026rsquo;ll see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source.","keywords":["Hugo","Github","submodules","git submodules","git","website","how to use submodules","git command line","JAMStack","git branch workflow","branch workflow","parallel branches","Hugo theme customization","git remote"],"articleBody":"This is a continuation of a previous post - How to Set Up a Hugo Site on Github Pages - with Git Submodules! I will reference some things we did there, so be sure to check it out if you’re confused about something.\nOverview In today’s post, I want to take a look at how we can keep our Hugo themes up-to-date. ‘But my theme works fine!’ you say. ‘Why would I ever need to update it?’ Well, when you download or clone a Hugo theme from its hosted git repository, you’re getting its latest version at that point in time. So even if the theme’s creator pushes updates to the code - with fixes, new features, and outside pull requests - you’ll still be stuck using the version you downloaded before. While this is fine in some cases, many of us want the newest updates so we can take advantage of a stronger, improved theme.\nThe key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. If you followed my previous tutorial on adding a theme to your Hugo site as a git submodule, you already have a functional Hugo site with a (forked) theme included. Starting there, let’s see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source.\nAuthor’s Note: If you need submodules, keep on reading! But you might consider using Hugo modules instead. I have another post on those. See what works best for you! (my post)\nJust the Updates, Please If we don’t intend to customize a theme at all, we can keep our workflow super simple. All we need to do is add the theme repo into our project as a submodule and periodically run a few git commands to check for updates. For the moment, let’s pretend we haven’t forked the theme repo and see what it would be like to clone the source directly. We’ll see an example with our fork in the next section.\nHere’s a quick refresher command for adding a submodule to our project.\n\u003e git submodule add https://github.com/panr/hugo-theme-hello-friend.git themes/hello-friend You might be thinking you can simply run git clone instead of adding the theme as a submodule, but our site is already set up as a git repo so that doesn’t work here. Git doesn’t like having .git files in a subdirectory without a .gitmodules component in the root. For more on that, see this ‘simple dev’ post.\nIn the example above, we added our submodule by pulling the theme’s source repo directly into our project. With the git remote command, we can easily verify that it’s connected to the correct remote repo.\n\u003e cd themes/hello-friend \u003e git remote --verbose origin https://github.com/panr/hugo-theme-hello-friend.git (fetch) origin https://github.com/panr/hugo-theme-hello-friend.git (push) And there it is! With this setup, all we need to do is pull updates straight from the source. From the theme’s directory, we run the following terminal commands.\n# optional: fetch any updates to view changes before merging \u003e git fetch origin \u003e git status [status output here] # pull updates and merge them automatically \u003e git pull Since we’re not making any theme changes in this workflow, we shouldn’t expect any merging issues during the git pull. We don’t really need to fetch or check the status of the repo, but it’s always nice to see incoming changes before we bring them in.\nAnd that’s it! Getting updates every so often is no problem if we don’t intend to make our own customizations to a theme. But hey - customization is where the fun really begins.\nUpdates and Theme Customization - A Parallel Branch Workflow Here’s the scenario - We want to add a Hugo theme, make custom changes, and still to get updates from the theme’s original source. The method used above doesn’t work here for a few reasons:\nWe can’t push our custom changes to the theme’s source repo. We simply don’t have those permissions on the repo. Our local changes will not be safely stored anywhere, and any pulled updates may not be easily mergeable. Incoming updates may require merges. If we’ve modified some of the theme files that are being updated in the source, then a simple git pull will not be enough to deal with the resulting conflicts. Thankfully, a more advanced git workflow would help deal with these issues. Remember how we set up a forked theme repo in the last post? Now we get to take advantage of it. Crucially, the forked repo is ours, so we have full write access to it and don’t need to worry about repo permissions. We can do whatever we want.\nAdd a Remote Repo However, our fork doesn’t automatically receive source updates either! Here, an additional step is needed to link our fork back to the source repo. Earlier, in the direct update workflow, we used the git remote command to verify that we had the correct remote repo connections. Running it in our forked theme directory, we see only the fork as our remote.\n# my forked repo URLs as an example \u003e git remote --verbose origin https://github.com/aormsby/F-hugo-theme-hello-friend.git (fetch) origin https://github.com/aormsby/F-hugo-theme-hello-friend.git (push) To get updates from the source repo, we need to add a second remote repo - yes, git can do this! We simply run this command in our working directory and check our remotes again to verify the connection.\n# add a new remote repo connection \u003e git remote add upstream https://github.com/panr/hugo-theme-hello-friend.git \u003e git remote --verbose origin https://github.com/aormsby/F-hugo-theme-hello-friend.git (fetch) origin https://github.com/aormsby/F-hugo-theme-hello-friend.git (push) upstream https://github.com/panr/hugo-theme-hello-friend.git (fetch) upstream https://github.com/panr/hugo-theme-hello-friend.git (push) Ta-da! Our local theme repo is now linked to both our forked repo and the source repo, which we called upstream. (This is a conventional label, but any name you choose is fine.) At this point, our setup already supports getting updates from the source, but the process is a little different than before.\nNormally, when we’re updating directly from a single remote repo, all we need to do is pull the data to our local directory so that the local matches the remote. We’ll still do that here, but we explicitly pull data from the upstream repo we added. We’ll also have to make an additional push to our forked repo - origin - to update it with the new code. Here’s how that works compared to the previous example.\nLeft: simple update / Right: updating with a fork\nAssuming you’re still on your master branch, here are the modified commands needed to pull and push the updates.\n# optional: fetch any updates to view changes before merging \u003e git fetch upstream master \u003e git status [status output here] # pull updates and merge them automatically \u003e git pull upstream master # push source updates to forked repo \u003e git push origin master With no local changes to our theme, the commands run smoothly with no errors - and we want to keep it that way! Simple is good, and an update process that doesn’t result in merge conflicts is always nice. But how do we manage to avoid conflicts if we want to customize the theme? Simple - don’t do your work on master.\nBranching, Customizing, and Merging Updates Although you technically could make theme customizations on the master branch, this increases the chances of having to resolve merge conflicts every time you try to pull an update. It’s fine if that’s how you want to work, but I highly recommend avoiding it. In my experience, it’s often best to keep master sparkly clean and do your dirty work on a different branch.\nFor example, I do my theme in a separate branch that is always kept in parallel with master. I’ve named it working, as it’s the branch that I work in. (Not exactly clever, I know.) Since it has all of my theme customizations, it’s also the branch that I use when I build my site. Every so often, I switch back over to master, go through our update process, and then explicitly merge any new theme updates from master into working so that I have all the latest features in my working branch. Visually, it’s kind of like this.\nThis is just one possible theme customization workflow, but we can benefit from a setup like this. For example –\nOur workspace is separate from our update environment. Getting theme updates will always be a painless process, and we have more control over merging when the time comes. Commit histories are clearer. Histories are much easier to read if source updates and custom work don’t get tangled up, and this can be super helpful when performing more advanced git actions on a branch. All the data is on our forked repo. The customizations and the pulled updates all live on our fork, which means we have full control of the data. We can test on master before merging. If we’re unsure of how a new feature will display on our site, we can run a build using the master code. It’s a nice clean test bed before performing a merge. The drawbacks are much the same as I mentioned in the last post with the addition that now we’d have at least one more working branch to manage. However, I’ve found this parallel branch workflow quite nice after getting more familiar with it. Perhaps you will, too.\nHere are the commands we can use to get our working branch up and running. (You can choose a better name if you’d like.)\n# create a new branch and switch to it \u003e git branch working \u003e git checkout working We make some changes, commit our work, and push to our forked repo (see these commands for help). Time passes… and we want to get some updates on master.\n# switch to master branch \u003e git checkout master # quick update \u003e git pull upstream master \u003e git push origin master Finally, we switch back to working and merge in the updates from master.\n# switch to working \u003e git checkout working # merge master into current branch (working) \u003e git merge master I won’t get into resolving a merge here, so let’s cross our fingers and hope there are no conflicts to deal with.\nsomething to look forward to :)\nSo yes - customizing your theme with this kind of workflow does take a bit of setup, and there are a few extra steps and things to keep track of to manage our code well. However, using git submodules and a parallel branch workflow do give us more leverage over our codebase, and I think that makes the extra work worthwhile. I’ve been using this workflow with my site for some time, and I don’t think I’d change anything about it.\nThat said, there are a number of other methods that people use for managing their themes, and it’s worth exploring them to see what fits your needs best. I recently read a post about managing your themes as Hugo modules by Nick Gracilla that I found quite interesting, and I think it’s worth checking out if you’re looking for an alternate way of doing things.\nNext Steps Better Deploy - I’m still working on a better site deploy script! It’s looking good so far, but it’s not quite ready. Automatic Builds - This would still be great to have, so if I get around to it I’ll be sure to share my work. Until next time! ~\n","wordCount":"1938","inLanguage":"en","image":"https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg","datePublished":"2020-05-19T18:30:00-05:00","dateModified":"2020-05-19T18:30:00-05:00","author":{"@type":"Person","name":"Adam Ormsby"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/"},"publisher":{"@type":"Organization","name":"Adam Ormsby","logo":{"@type":"ImageObject","url":"https://www.adamormsby.com/site-img/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.adamormsby.com/ accesskey=h title="Adam Ormsby (Alt + H)">Adam Ormsby</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.adamormsby.com/ title=Posts><span>Posts</span></a></li><li><a href=https://linkedin.com/in/adamormsby title=LinkedIn><span>LinkedIn</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://github.com/aromsby title=GitHub><span>GitHub</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Hugo Themes - Making Modifications while Keeping the Source Up-To-Date</h1><div class=post-meta><span title='2020-05-19 18:30:00 -0500 -0500'>May 19, 2020</span></div></header><figure class=entry-cover><a href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg target=_blank rel="noopener noreferrer"><img loading=eager srcset='https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover_hu_db1b033c99cc6e0c.jpg 360w,https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover_hu_86637eff682fe6cc.jpg 480w,https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover_hu_2a809c6ecdb2b1f5.jpg 720w,https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg 800w' src=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/cover.jpg sizes="(min-width: 768px) 720px, 100vw" width=800 height=200 alt="Cover photo for Hugo Themes - Making Modifications while Keeping the Source Up-To-Date"></a></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#overview aria-label=Overview>Overview</a></li><li><a href=#just-the-updates-please aria-label="Just the Updates, Please">Just the Updates, Please</a></li><li><a href=#updates-and-theme-customization---a-parallel-branch-workflow aria-label="Updates and Theme Customization - A Parallel Branch Workflow">Updates and Theme Customization - A Parallel Branch Workflow</a><ul><li><a href=#add-a-remote-repo aria-label="Add a Remote Repo">Add a Remote Repo</a></li><li><a href=#branching-customizing-and-merging-updates aria-label="Branching, Customizing, and Merging Updates">Branching, Customizing, and Merging Updates</a></li></ul></li><li><a href=#next-steps aria-label="Next Steps">Next Steps</a></li></ul></div></details></div><div class=post-content><p><em>This is a continuation of a previous post - <a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/>How to Set Up a Hugo Site on Github Pages - with Git Submodules!</a> I will reference some things we did there, so be sure to check it out if you&rsquo;re confused about something.</em></p><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>In today&rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. &lsquo;But my theme works fine!&rsquo; you say. &lsquo;Why would I ever need to update it?&rsquo; Well, when you download or clone a Hugo theme from its hosted git repository, you&rsquo;re getting its latest version <em>at that point in time.</em> So even if the theme&rsquo;s creator pushes updates to the code - with fixes, new features, and outside pull requests - you&rsquo;ll still be stuck using the version you downloaded before. While this is fine in some cases, many of us want the newest updates so we can take advantage of a stronger, improved theme.</p><p>The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. If you followed my previous tutorial on <a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/>adding a theme to your Hugo site as a git submodule</a>, you already have a functional Hugo site with a (forked) theme included. Starting there, let&rsquo;s see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source.</p><blockquote><p>Author&rsquo;s Note: If you need submodules, keep on reading! But you might consider using Hugo modules instead. I have another post on those. See what works best for you! (<a href=https://www.adamormsby.com/posts/012-hugo-modules/>my post</a>)</p></blockquote><h2 id=just-the-updates-please>Just the Updates, Please<a hidden class=anchor aria-hidden=true href=#just-the-updates-please>#</a></h2><p>If we don&rsquo;t intend to customize a theme at all, we can keep our workflow super simple. All we need to do is add the theme repo into our project as a submodule and periodically run a few git commands to check for updates. For the moment, let&rsquo;s pretend we haven&rsquo;t forked the theme repo and see what it would be like to clone the source directly. We&rsquo;ll see an example with our fork in the next section.</p><p>Here&rsquo;s a quick refresher command for adding a submodule to our project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt; git submodule add https://github.com/panr/hugo-theme-hello-friend.git themes/hello-friend
</span></span></code></pre></div><blockquote><p>You might be thinking you can simply run <code>git clone</code> instead of adding the theme as a submodule, but our site is already set up as a git repo so that doesn&rsquo;t work here. Git doesn&rsquo;t like having <code>.git</code> files in a subdirectory without a <code>.gitmodules</code> component in the root. For more on that, see <a href=https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/>this &lsquo;simple dev&rsquo; post.</a></p></blockquote><p>In the example above, we added our submodule by pulling the theme&rsquo;s source repo directly into our project. With the <code>git remote</code> command, we can easily verify that it&rsquo;s connected to the correct remote repo.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt; cd themes/hello-friend
</span></span><span style=display:flex><span>&gt; git remote --verbose
</span></span><span style=display:flex><span>origin  https://github.com/panr/hugo-theme-hello-friend.git <span style=color:#f92672>(</span>fetch<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>origin  https://github.com/panr/hugo-theme-hello-friend.git <span style=color:#f92672>(</span>push<span style=color:#f92672>)</span>
</span></span></code></pre></div><figure class=align-center><a href=img/simple-update.jpg><img loading=lazy src=img/simple-update.jpg#center alt="one-way update directly from theme source"></a></figure><p>And there it is! With this setup, all we need to do is pull updates straight from the source. From the theme&rsquo;s directory, we run the following terminal commands.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># optional: fetch any updates to view changes before merging</span>
</span></span><span style=display:flex><span>&gt; git fetch origin
</span></span><span style=display:flex><span>&gt; git status
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>status output here<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pull updates and merge them automatically</span>
</span></span><span style=display:flex><span>&gt; git pull
</span></span></code></pre></div><p>Since we&rsquo;re not making any theme changes in this workflow, we shouldn&rsquo;t expect any merging issues during the <code>git pull</code>. We don&rsquo;t really <em>need</em> to fetch or check the status of the repo, but it&rsquo;s always nice to see incoming changes before we bring them in.</p><p>And that&rsquo;s it! Getting updates every so often is no problem if we don&rsquo;t intend to make our own customizations to a theme. But hey - customization is where the fun <em>really</em> begins.</p><h2 id=updates-and-theme-customization---a-parallel-branch-workflow>Updates and Theme Customization - A Parallel Branch Workflow<a hidden class=anchor aria-hidden=true href=#updates-and-theme-customization---a-parallel-branch-workflow>#</a></h2><p>Here&rsquo;s the scenario - We want to add a Hugo theme, make custom changes, and still to get updates from the theme&rsquo;s original source. The method used above doesn&rsquo;t work here for a few reasons:</p><ol><li><strong>We can&rsquo;t push our custom changes to the theme&rsquo;s source repo</strong>. We simply don&rsquo;t have those permissions on the repo. Our local changes will not be safely stored anywhere, and any pulled updates may not be easily mergeable.</li><li><strong>Incoming updates may require merges.</strong> If we&rsquo;ve modified some of the theme files that are being updated in the source, then a simple <code>git pull</code> will not be enough to deal with the resulting conflicts.</li></ol><p>Thankfully, a more advanced git workflow would help deal with these issues. Remember <a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#add-a-theme-to-our-site>how we set up a forked theme repo</a> in the last post? Now we get to take advantage of it. Crucially, the forked repo is <em>ours</em>, so we have full write access to it and don&rsquo;t need to worry about repo permissions. We can do whatever we want.</p><h3 id=add-a-remote-repo>Add a Remote Repo<a hidden class=anchor aria-hidden=true href=#add-a-remote-repo>#</a></h3><p>However, our fork doesn&rsquo;t automatically receive source updates either! Here, an additional step is needed to link our fork back to the source repo. Earlier, in the direct update workflow, we used the <code>git remote</code> command to verify that we had the correct remote repo connections. Running it in our forked theme directory, we see only the fork as our remote.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># my forked repo URLs as an example</span>
</span></span><span style=display:flex><span>&gt; git remote --verbose
</span></span><span style=display:flex><span>origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git <span style=color:#f92672>(</span>fetch<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git <span style=color:#f92672>(</span>push<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>To get updates from the source repo, we need to add a <em>second</em> remote repo - yes, git can do this! We simply run this command in our working directory and check our remotes again to verify the connection.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># add a new remote repo connection</span>
</span></span><span style=display:flex><span>&gt; git remote add upstream https://github.com/panr/hugo-theme-hello-friend.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; git remote --verbose
</span></span><span style=display:flex><span>origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git <span style=color:#f92672>(</span>fetch<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git <span style=color:#f92672>(</span>push<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>upstream   https://github.com/panr/hugo-theme-hello-friend.git <span style=color:#f92672>(</span>fetch<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>upstream   https://github.com/panr/hugo-theme-hello-friend.git <span style=color:#f92672>(</span>push<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Ta-da! Our local theme repo is now linked to both our forked repo <em>and</em> the source repo, which we called <code>upstream</code>. (This is a conventional label, but any name you choose is fine.) At this point, our setup already supports getting updates from the source, but the process is a little different than before.</p><p>Normally, when we&rsquo;re updating directly from a single remote repo, all we need to do is <code>pull</code> the data to our local directory so that the local matches the remote. We&rsquo;ll still do that here, but we explicitly pull data from the <code>upstream</code> repo we added. We&rsquo;ll also have to make an additional <code>push</code> to our forked repo - <code>origin</code> - to update it with the new code. Here&rsquo;s how that works compared to the previous example.</p><figure class=align-center><a href=img/forked-update.jpg><img loading=lazy src=img/forked-update.jpg#center alt="comparison of update methods"></a><figcaption><p>Left: simple update / Right: updating with a fork</p></figcaption></figure><p>Assuming you&rsquo;re still on your <code>master</code> branch, here are the modified commands needed to pull and push the updates.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># optional: fetch any updates to view changes before merging</span>
</span></span><span style=display:flex><span>&gt; git fetch upstream master
</span></span><span style=display:flex><span>&gt; git status
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>status output here<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pull updates and merge them automatically</span>
</span></span><span style=display:flex><span>&gt; git pull upstream master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># push source updates to forked repo</span>
</span></span><span style=display:flex><span>&gt; git push origin master
</span></span></code></pre></div><p>With no local changes to our theme, the commands run smoothly with no errors - and we want to keep it that way! Simple is good, and an update process that doesn&rsquo;t result in merge conflicts is always nice. But how do we manage to avoid conflicts if we want to customize the theme? Simple - don&rsquo;t do your work on <code>master</code>.</p><h3 id=branching-customizing-and-merging-updates>Branching, Customizing, and Merging Updates<a hidden class=anchor aria-hidden=true href=#branching-customizing-and-merging-updates>#</a></h3><p>Although you technically <em>could</em> make theme customizations on the <code>master</code> branch, this increases the chances of having to resolve merge conflicts every time you try to pull an update. It&rsquo;s fine if that&rsquo;s how you want to work, but I <em>highly</em> recommend avoiding it. In my experience, it&rsquo;s often best to keep <code>master</code> sparkly clean and do your dirty work on a different branch.</p><p>For example, I do my theme in a separate branch that is always kept in parallel with <code>master</code>. I&rsquo;ve named it <code>working</code>, as it&rsquo;s the branch that I <em>work</em> in. (Not exactly clever, I know.) Since it has all of my theme customizations, it&rsquo;s also the branch that I use when I build my site. Every so often, I switch back over to <code>master</code>, go through our update process, and then explicitly merge any new theme updates from <code>master</code> into <code>working</code> so that I have all the latest features in my working branch. Visually, it&rsquo;s kind of like this.</p><figure class=align-center><a href=img/parallel-branches.jpg><img loading=lazy src=img/parallel-branches.jpg#center alt="parallel branch system with updates merged from master"></a></figure><p>This is just one possible theme customization workflow, but we can benefit from a setup like this. For example &ndash;</p><ul><li><strong>Our workspace is separate from our update environment.</strong> Getting theme updates will always be a painless process, and we have more control over merging when the time comes.</li><li><strong>Commit histories are clearer.</strong> Histories are much easier to read if source updates and custom work don&rsquo;t get tangled up, and this can be super helpful when performing more advanced git actions on a branch.</li><li><strong>All the data is on our forked repo.</strong> The customizations <em>and</em> the pulled updates all live on our fork, which means we have full control of the data.</li><li><strong>We can test on <code>master</code> before merging.</strong> If we&rsquo;re unsure of how a new feature will display on our site, we can run a build using the <code>master</code> code. It&rsquo;s a nice clean test bed before performing a merge.</li></ul><p>The drawbacks are much the same as I mentioned in the <a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#some-drawbacks>last post</a> with the addition that now we&rsquo;d have at least one more working branch to manage. However, I&rsquo;ve found this parallel branch workflow quite nice after getting more familiar with it. Perhaps you will, too.</p><p>Here are the commands we can use to get our <code>working</code> branch up and running. (You can choose a better name if you&rsquo;d like.)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># create a new branch and switch to it</span>
</span></span><span style=display:flex><span>&gt; git branch working
</span></span><span style=display:flex><span>&gt; git checkout working
</span></span></code></pre></div><p>We make some changes, commit our work, and push to our forked repo (<a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#test-site-and-deploy>see these commands for help</a>). Time passes&mldr; and we want to get some updates on <code>master</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># switch to master branch</span>
</span></span><span style=display:flex><span>&gt; git checkout master
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># quick update</span>
</span></span><span style=display:flex><span>&gt; git pull upstream master
</span></span><span style=display:flex><span>&gt; git push origin master
</span></span></code></pre></div><p>Finally, we switch back to <code>working</code> and merge in the updates from <code>master</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># switch to working</span>
</span></span><span style=display:flex><span>&gt; git checkout working
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># merge master into current branch (working)</span>
</span></span><span style=display:flex><span>&gt; git merge master
</span></span></code></pre></div><p>I won&rsquo;t get into resolving a merge here, so let&rsquo;s cross our fingers and hope there are no conflicts to deal with.</p><figure class=align-center><a href=img/git-merge-conflict.jpg><img loading=lazy src=img/git-merge-conflict.jpg#center alt="git merge conflict comic"></a><figcaption><p>something to look forward to :)</p></figcaption></figure><p>So yes - customizing your theme with this kind of workflow does take a bit of setup, and there are a few extra steps and things to keep track of to manage our code well. However, using git submodules and a parallel branch workflow do give us more leverage over our codebase, and I think that makes the extra work worthwhile. I&rsquo;ve been using this workflow with my site for some time, and I don&rsquo;t think I&rsquo;d change anything about it.</p><p>That said, there are a number of other methods that people use for managing their themes, and it&rsquo;s worth exploring them to see what fits your needs best. I recently read a post about <a href=https://www.hugofordevelopers.com/articles/master-hugo-modules-managing-themes-as-modules/>managing your themes as Hugo modules by Nick Gracilla</a> that I found quite interesting, and I think it&rsquo;s worth checking out if you&rsquo;re looking for an alternate way of doing things.</p><h2 id=next-steps>Next Steps<a hidden class=anchor aria-hidden=true href=#next-steps>#</a></h2><ul><li><a href=https://www.adamormsby.com/posts/000/hugo-shell-deploy-script/><strong>Better Deploy</strong></a> - I&rsquo;m still working on a better site deploy script! It&rsquo;s looking good so far, but it&rsquo;s not quite ready.</li><li><strong>Automatic Builds</strong> - This would still be great to have, so if I get around to it I&rsquo;ll be sure to share my work.</li></ul><p>Until next time! ~</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.adamormsby.com/tags/hugo/>Hugo</a></li><li><a href=https://www.adamormsby.com/tags/git/>Git</a></li><li><a href=https://www.adamormsby.com/tags/submodules/>Submodules</a></li><li><a href=https://www.adamormsby.com/tags/jamstack/>Jamstack</a></li></ul><nav class=paginav><a class=prev href=https://www.adamormsby.com/posts/000/hugo-shell-deploy-script/><span class=title>« Prev</span><br><span>Build and Deploy: A Shell Script for Hugo Sites</span>
</a><a class=next href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/><span class=title>Next »</span><br><span>How to Set Up a Hugo Site on Github Pages - with Git Submodules!</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.adamormsby.com/>Adam Ormsby</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script data-goatcounter=https://aoappdev.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>