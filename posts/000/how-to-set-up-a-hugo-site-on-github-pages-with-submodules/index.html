<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Set Up a Hugo Site on Github Pages - with Git Submodules! | Adam Ormsby</title><meta name=keywords content="Hugo,Github,Github Pages,submodules,git submodules,git,website,static site generator,static site,how to use submodules,how to create a Hugo website,host on Github Pages,host a Hugo site on Github Pages,git terminal commands,JAMStack"><meta name=description content="This blog was made with Hugo, hosted on Github Pages, and harnesses the power of git submodules to separate source code from live site data. This tutorial shows you how I got all these systems to work together nicely and how you can use these tools to take more control of your site."><meta name=author content="Adam Ormsby"><link rel=canonical href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/><link crossorigin=anonymous href=/assets/css/stylesheet.198f03125e4b4594e4693d1d2dad2db811b7cc1485a74be39b473c9ba02319cc.css integrity="sha256-GY8DEl5LRZTkaT0dLa0tuBG3zBSFp0vjm0c8m6AjGcw=" rel="preload stylesheet" as=style><link rel=icon href=https://www.adamormsby.com/site-img/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://www.adamormsby.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.adamormsby.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.adamormsby.com/apple-touch-icon.png><link rel=mask-icon href=https://www.adamormsby.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/"><meta property="og:site_name" content="Adam Ormsby"><meta property="og:title" content="How to Set Up a Hugo Site on Github Pages - with Git Submodules!"><meta property="og:description" content="This blog was made with Hugo, hosted on Github Pages, and harnesses the power of git submodules to separate source code from live site data. This tutorial shows you how I got all these systems to work together nicely and how you can use these tools to take more control of your site."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-17T22:30:00+07:00"><meta property="article:modified_time" content="2020-03-17T22:30:00+07:00"><meta property="article:tag" content="Hugo"><meta property="article:tag" content="Git"><meta property="article:tag" content="Github"><meta property="article:tag" content="Submodules"><meta property="article:tag" content="Jamstack"><meta property="og:image" content="https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg"><meta name=twitter:title content="How to Set Up a Hugo Site on Github Pages - with Git Submodules!"><meta name=twitter:description content="This blog was made with Hugo, hosted on Github Pages, and harnesses the power of git submodules to separate source code from live site data. This tutorial shows you how I got all these systems to work together nicely and how you can use these tools to take more control of your site."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.adamormsby.com/posts/"},{"@type":"ListItem","position":2,"name":"How to Set Up a Hugo Site on Github Pages - with Git Submodules!","item":"https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Set Up a Hugo Site on Github Pages - with Git Submodules!","name":"How to Set Up a Hugo Site on Github Pages - with Git Submodules!","description":"This blog was made with Hugo, hosted on Github Pages, and harnesses the power of git submodules to separate source code from live site data. This tutorial shows you how I got all these systems to work together nicely and how you can use these tools to take more control of your site.","keywords":["Hugo","Github","Github Pages","submodules","git submodules","git","website","static site generator","static site","how to use submodules","how to create a Hugo website","host on Github Pages","host a Hugo site on Github Pages","git terminal commands","JAMStack"],"articleBody":"Overview I made this blog site using the Hugo static site generator because I wanted to build a simple site where I could have full control over every detail - not like using Wordpress, Squarespace, or Wix. With Hugo, I can add and remove templates and functionality at will, and it feels great to have that kind of power. You probably ended up here because you want that, too.\nIn this post, we’ll take a look at how to:\nCreate a new Hugo site Host it on Github Pages Use git submodules to separate our site’s key directories into manageable chunks We’ll also go over the benefits (and drawbacks) of using submodules in our setup, and by the end of this post, we’ll have a new Hugo project hosted on Github Pages and ready for action.\nPlease note:\nI’ll talk a little about branching inside our submodules later on. To keep things simple, you can assume that I’ve stayed on the main ‘master’ branch of each git module. Also, I work on a Mac so all of my commands are Mac-specific.\nWhy Git Submodules? Every git project is stored as a versioned code repository (a repo). Git submodules allow us to reference other repos within a project, which effectively puts a project inside a project (or a repo inside a repo). The submodule’s code can then be used by the main project, but the submodule maintains its own commit and branch history, which separates the projects and can be a pretty powerful thing.\nIn a Hugo project, most of what we see is source data - the raw files we manipulate before building our site. After Hugo builds our site, our ‘ready-to-publish’ data gets output to the public directory of our project. By turning the public folder into a submodule of the main project, we can treat it as a separate entity with a separate history. Let’s see what that process looks like.\nInstall Hugo and Create a Project First things first, we need to install Hugo! We’ll run through the key Mac commands quickly here, but if you need any more help you can always check Hugo’s ‘Quick Start’ guide for more details or information about installing on Windows and Linux.\n# 1. Open a terminal. Alternatively, you can VSCode's terminal - it's great! # 2. If you don't have brew installed -- \u003e /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\" # 3. Install Hugo \u003e brew install hugo # 4. Move to the directory where you want to create the project. \u003e cd [MY/DIRECTORY/NAME] # 5. Create a new Hugo project. I'll use \"hugo-gh\" as my sample name. \u003e hugo new site [SITE_NAME] So far, we’ve installed Hugo on our machine and created a new template project named hugo-gh. If you’re following Hugo’s Quick Start guide, you may be tempted to move straight on to adding a theme, running the local server, and seeing your site. We’ll absolutely get to all that, but since our goal here is to use git submodules to manage the different parts of our project, it would benefit us to go through some setup steps on Github first.\nPush Project Files to Github Let’s get our project versioned with Github right away! We’ll need to create two repositories on Github - one to host our source code and one to host our live site data.\nSource Code Repository Sign in to Github and create a new repository. I’ll call mine hugo-gh-pages-source.\nHot tip: If we create a repo without a README file it’s easier to avoid accidental history conflicts when pushing a local project to a fresh repo. We can always add one later.\nWhen our new empty repo is ready, go back to the terminal window and input these commands to initialize our local repo and push to Github.\n(If you already have a public folder in your project, delete it before doing any of this to save some headaches.)\n# 1. Enter the project folder. \u003e cd hugo-gh # 2. Initialize git locally. \u003e git init # 3. Set our new Github repo as the remote for our local project # (my sample URL - https://github.com/aormsby/hugo-gh-pages-source.git) \u003e git remote add origin https://github.com/[GITHUB_USERNAME]/[SOURCE_REPO_NAME].git # 4. Stage all files for commit. \u003e git add . # 5. Commit files. \u003e git commit -m \"committing our hugo template\" # 6. Push to the remote master \u003e git push -u origin master And there you have it! Our project source is now pushed to our Github repo.\nYou could absolutely set up your source repo to be the host of your site using Github Pages, and you may have good reasons for doing so. That would require a different setup that you can find steps for on Hugo’s Host on Github docs page. However, if we do this we ignore our chance to separate public into a separately versioned repo. To accomplish this, we have to create a second repository.\nLive Site Data Repository Let’s add our first submodule to the project! Remember, our goal is to separate the commit histories of our project source and our site build output to the public directory. First, we create another repo on Github for our public site data. I’ll call mine hugo-gh-pages-public. In our local terminal, run the following command from the project root.\n# my sample URL - https://github.com/aormsby/hugo-gh-pages-public.git \u003e git submodule add https://github.com/[GITHUB_USERNAME]/[PUBLIC_REPO_NAME].git public Sweet! We now have a submodule initialized and loaded into our project under the public directory, and it’s already connected to its remote origin. Let’s do a quick site build just to put something into the remote Github repo. The commands needed are a little tedious, but it’s good to know the process.\n# 1. Perform a site build and output to 'public/' directory. \u003e hugo # 2-4. \u003e cd public \u003e git add . \u003e git commit -m \"first build\" # 5. Return to the project root. \u003e cd ../ # 6-7. \u003e git add . \u003e git commit -m \"first build - update submodule reference\" # 8. Push the source project *and* the public submodule to Github together. \u003e git push -u origin master --recurse-submodules=on-demand It’s super important when we build to make sure that we commit and push both the public submodule and the main project. For each submodule commit, the project updates its reference to the submodule to maintain its connection to the correct commit. The --recurse-submodules=on-demand command pushes all of the project modules at the same time.\nsubmodule reference updated in the terminal after git status command\nsubmodule reference on github after pushing\nEnable Github Pages On Github, our hugo-gh-pages-public repo now has some data. Go to the repo settings and find the Github Pages section. Set the Source of our site to master branch.\nWith these settings, Github Pages will be able to serve our site from the repo starting with the index.html file in its root directory. The live URL for the site is built from your user name and the project name. Here’s my sample URL - https://aormsby.github.io/hugo-gh-pages-public. At this point, our site won’t display anything except an error message since Hugo requires some page templates or a full theme to generate the pages. That’s fine. We just wanted to add some stuff to Github so we could access the repo’s Github Pages settings as we just did.\nBenefits of Making a Submodule in ‘Public’ To recap, here’s our project setup so far.\nLet’s take a look at some of the benefits of this system.\nNo accidental deploys - With our source code separated from our site data, it’s a lot harder to accidentally push unfinished work to our live site. Even if we make builds locally and push our source changes, we won’t push to our hugo-gh-pages-public repo without explicitly running commands to make that happen. *sigh of relief*\nSeparate rollbacks - If something goes wrong, the main project and public project can be separately rolled back to earlier commits. (Just remember to commit the modified reference updates to the main module!)\nBranch work is easier - Changing branches in our source project will not change branches in our subproject (and vice versa). This is another nice safety buffer, and it gives us more options for branching in either module.\nReady for site staging - We can easily create development branches in the public submodule that could be served as development subdomains of our site and used for testing new features.\nSome Drawbacks Of course, it’s always wise to assess the risks of any setup, and there are many opinions on the ‘perfect system’ in the dev world - tell me about yours in the comments! To shine some light on the potential downsides of our submodule use, here are some of the concerns I’ve thought about.\nJuggling multiple repos - With more submodules comes more administration. It doesn’t seem so rough for me, but right now I’m working on my own. Running interlinked, asynchronous repositories comes with its own challenges in a team setting, particularly if someone forgets to push updated submodule references to the source.\nNo site staging with Github Pages - While the public submodule can branch and easily store data used in a site staging system, Github Pages does not seem to support subdomains from different project branches. That’s more of a Github Pages drawback, but it means we can’t take full advantage of our setup just yet. Another hosting platform might offer a solution - I’ll be looking into some options in a future post.\nAdd a Theme to Our Site Wait, we’re not finished just yet! Remember how our site doesn’t display anything except an error message right now? We need some templates to get things up and running. The easiest way to get some is to add one of the many Hugo themes to our project. Since it was the first theme I used, I’ll use the Hello Friend theme in my example.\nAuthor’s Note: If you need submodules, keep on reading! But you might consider using Hugo modules instead. I have another post on those. See what works best for you! (my post)\nMany guides for adding a theme - including Hugo’s own docs - just tell you to clone the theme repo or download and copy it into your project’s themes directory. But hey, our theme today is submodules, so I propose that we add a theme to our project as a submodule since doing so would give us some nice dev powers over the theme.\nLook at it this way - directly cloning a theme into our project has two major problems.\nWe can’t push our commits to the theme’s source repo, because we don’t have permission. This means we can’t make changes to the theme and then keep them versioned. A cloned project in a subdirectory isn’t linked with the main project. When a submodule is added to a project, the main project adds a reference to it in a file named .gitmodules. Without that reference, the main project and the theme project aren’t connected, which could cause confusion or problems down the line. Also, Git doesn’t allow repos inside repos that aren’t submodules. See this ‘simple dev’ post for details. Let’s solve each of those problems in one fell swoop.\nMake a fork of the Hello Friend theme so we have our own copy of it. Add our forked repo as a submodule in our main project’s themes folder. # Add the theme submodule from the root project folder # my sample URL - https://github.com/aormsby/F-hugo-theme-hello-friend.git \u003e git submodule add https://github.com/[GITHUB_USERNAME]/[FORKED_THEME_REPO_NAME].git themes/hello-friend Boom! Now we have our own fork of a cool theme referenced as a submodule of our Hugo project. We can make any changes we want and push them to our own repo. I’ll get into more advanced uses of theme submodules in another post, but for now we have the basics in place.\nThings won’t be quite right without tweaking a few final settings, so let’s open the config.toml file in our project root so we can modify a few lines.\nAdd a line so our site builds using our new theme. theme = \"hello-friend\" Because we’re making a Github ‘project site’ we want to change thebaseURL to match our project URL. baseURL = [GITHUB_USER_NAME].github.io/[PROJECT_NAME] For example, mine will say aormsby.github.io/hugo-gh-pages-public. To understand the difference between setting up a project site and a user/organization site, see these Github Pages and Hugo docs on the matter.\nThere are a lot more theme settings that can be adjusted in your config file, but you can explore those on your own. Let’s deploy!\nTest Site and Deploy Running the terminal command hugo server in our project root spins up a local live preview of our site that can be viewed in a browser at localhost:1313. Run this now to check if our site is displaying anything (it should!), and then stop the process with Ctrl+C. Just like we did before, run the commands to build, commit, and push. (Note that we didn’t change anything in the theme, so we don’t have to push anything in that repo.)\n\u003e hugo \u003e cd public \u003e git add . \u003e git commit -m \"build with theme\" \u003e cd ../ \u003e git add . \u003e git commit -m \"build with theme - update submodule reference\" \u003e git push -u origin master --recurse-submodules=on-demand After a few minutes, refresh the live site at https://[USER_NAME].github.io/hugo-gh-pages-public and check out your new site! Congratulations, you’ve done it!\nNext Steps Theme Branches and Getting Updates - I’ve worked out a nice branch-based system for continuing to get updates from the original theme repo while adding and changing things our forked theme repo. It’s super useful. Next post!\nBetter Deploy - I’m sure you noticed that we had to use a plethora of terminal commands to add, commit, and push files to the main project and its submodules to maintain proper commit references. I wrote them out in this post for clarity, but this process is definitely something we can automate. Hugo’s docs provide a basic deploy script to do this, and I’m working on a greatly improved version of it that I’ll write about when it’s ready for action.\nCustom domains / CNAME - You may want to set up a custom domain on Github Pages. Here’s some good documentation on how to do that.\nThanks for reading! ~\n","wordCount":"2396","inLanguage":"en","image":"https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg","datePublished":"2020-03-17T22:30:00+07:00","dateModified":"2020-03-17T22:30:00+07:00","author":{"@type":"Person","name":"Adam Ormsby"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/"},"publisher":{"@type":"Organization","name":"Adam Ormsby","logo":{"@type":"ImageObject","url":"https://www.adamormsby.com/site-img/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.adamormsby.com/ accesskey=h title="Adam Ormsby (Alt + H)">Adam Ormsby</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.adamormsby.com/ title=Posts><span>Posts</span></a></li><li><a href=https://linkedin.com/in/adamormsby title=LinkedIn><span>LinkedIn</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://github.com/aromsby title=GitHub><span>GitHub</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to Set Up a Hugo Site on Github Pages - with Git Submodules!</h1><div class=post-meta><span title='2020-03-17 22:30:00 +0700 +0700'>Mar 17, 2020</span></div></header><figure class=entry-cover><a href=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg target=_blank rel="noopener noreferrer"><img loading=eager srcset='https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover_hu_f91291efba4e3ee7.jpg 360w,https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover_hu_7e7fa90623eb3415.jpg 480w,https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover_hu_c5f6ddf816bd0a6f.jpg 720w,https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg 800w' src=https://www.adamormsby.com/posts/000/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg sizes="(min-width: 768px) 720px, 100vw" width=800 height=300 alt="Cover photo for How to Set Up a Hugo Site on Github Pages - with Git Submodules!"></a></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#overview aria-label=Overview>Overview</a><ul><li><a href=#why-git-submodules aria-label="Why Git Submodules?">Why Git Submodules?</a></li></ul></li><li><a href=#install-hugo-and-create-a-project aria-label="Install Hugo and Create a Project">Install Hugo and Create a Project</a></li><li><a href=#push-project-files-to-github aria-label="Push Project Files to Github">Push Project Files to Github</a><ul><li><a href=#source-code-repository aria-label="Source Code Repository">Source Code Repository</a></li><li><a href=#live-site-data-repository aria-label="Live Site Data Repository">Live Site Data Repository</a></li></ul></li><li><a href=#enable-github-pages aria-label="Enable Github Pages">Enable Github Pages</a></li><li><a href=#benefits-of-making-a-submodule-in-public aria-label="Benefits of Making a Submodule in &lsquo;Public&rsquo;">Benefits of Making a Submodule in &lsquo;Public&rsquo;</a><ul><li><a href=#some-drawbacks aria-label="Some Drawbacks">Some Drawbacks</a></li></ul></li><li><a href=#add-a-theme-to-our-site aria-label="Add a Theme to Our Site">Add a Theme to Our Site</a></li><li><a href=#test-site-and-deploy aria-label="Test Site and Deploy">Test Site and Deploy</a></li><li><a href=#next-steps aria-label="Next Steps">Next Steps</a></li></ul></div></details></div><div class=post-content><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>I made this blog site using the <a href=https://www.gohugo.io>Hugo static site generator</a> because I wanted to build a simple site where I could have full control over every detail - <em>not</em> like using Wordpress, Squarespace, or Wix. With Hugo, I can add and remove templates and functionality at will, and it feels <em>great</em> to have that kind of power. You probably ended up here because you want that, too.</p><p>In this post, we&rsquo;ll take a look at how to:</p><ul><li>Create a new Hugo site</li><li>Host it on Github Pages</li><li>Use git submodules to separate our site&rsquo;s key directories into manageable chunks</li></ul><p>We&rsquo;ll also go over the benefits (and drawbacks) of using submodules in our setup, and by the end of this post, we&rsquo;ll have a new Hugo project hosted on Github Pages and ready for action.</p><p><em>Please note:<br>I&rsquo;ll talk a little about branching inside our submodules later on. To keep things simple, you can assume that I&rsquo;ve stayed on the main &lsquo;master&rsquo; branch of each git module. Also, I work on a Mac so all of my commands are Mac-specific.</em></p><h3 id=why-git-submodules>Why Git Submodules?<a hidden class=anchor aria-hidden=true href=#why-git-submodules>#</a></h3><p>Every git project is stored as a versioned code repository (a repo). Git submodules allow us to reference other repos within a project, which effectively puts a project inside a project (or a repo inside a repo). The submodule&rsquo;s code can then be used by the main project, but the submodule <em><strong>maintains its own commit and branch history,</strong></em> which separates the projects and can be a pretty powerful thing.</p><figure class=align-center><a href=img/explain-submodules.jpg><img loading=lazy src=img/explain-submodules.jpg#center alt="diagram showing how code is included using submodules with a git project"></a></figure><p>In a Hugo project, most of what we see is source data - the raw files we manipulate before building our site. After Hugo builds our site, our &lsquo;ready-to-publish&rsquo; data gets output to the <code>public</code> directory of our project. By turning the <code>public</code> folder into a submodule of the main project, we can treat it as a separate entity with a separate history. Let&rsquo;s see what that process looks like.</p><h2 id=install-hugo-and-create-a-project>Install Hugo and Create a Project<a hidden class=anchor aria-hidden=true href=#install-hugo-and-create-a-project>#</a></h2><p>First things first, we need to install Hugo! We&rsquo;ll run through the key Mac commands quickly here, but if you need any more help you can always check <a href=https://gohugo.io/getting-started/quick-start/>Hugo&rsquo;s &lsquo;Quick Start&rsquo; guide</a> for more details or information about installing on Windows and Linux.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 1. Open a terminal. Alternatively, you can VSCode&#39;s terminal - it&#39;s great!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. If you don&#39;t have brew installed --</span>
</span></span><span style=display:flex><span>&gt; /bin/bash -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Install Hugo</span>
</span></span><span style=display:flex><span>&gt; brew install hugo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Move to the directory where you want to create the project.</span>
</span></span><span style=display:flex><span>&gt; cd <span style=color:#f92672>[</span>MY/DIRECTORY/NAME<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Create a new Hugo project. I&#39;ll use &#34;hugo-gh&#34; as my sample name.</span>
</span></span><span style=display:flex><span>&gt; hugo new site <span style=color:#f92672>[</span>SITE_NAME<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>So far, we&rsquo;ve installed Hugo on our machine and created a new template project named <strong>hugo-gh</strong>. If you&rsquo;re following Hugo&rsquo;s Quick Start guide, you may be tempted to move straight on to adding a theme, running the local server, and seeing your site. We&rsquo;ll <em>absolutely</em> get to all that, but since our goal here is to use git submodules to manage the different parts of our project, it would benefit us to go through some setup steps on Github first.</p><h2 id=push-project-files-to-github>Push Project Files to Github<a hidden class=anchor aria-hidden=true href=#push-project-files-to-github>#</a></h2><p>Let&rsquo;s get our project versioned with Github right away! We&rsquo;ll need to create two repositories on Github - one to host our source code and one to host our live site data.</p><h3 id=source-code-repository>Source Code Repository<a hidden class=anchor aria-hidden=true href=#source-code-repository>#</a></h3><p>Sign in to Github and create a new repository. I&rsquo;ll call mine <strong>hugo-gh-pages-source</strong>.</p><figure class=align-center><a href=img/github-new-repo.jpg><img loading=lazy src=img/github-new-repo.jpg#center alt="create a new github repo"></a></figure><figure class=align-center><a href=img/github-repo-name.jpg><img loading=lazy src=img/github-repo-name.jpg#center alt="name the new github repo"></a></figure><p><em><strong>Hot tip:</strong> If we create a repo <em>without</em> a README file it&rsquo;s easier to avoid accidental history conflicts when pushing a local project to a fresh repo. We can always add one later.</em></p><p>When our new empty repo is ready, go back to the terminal window and input these commands to initialize our local repo and push to Github.</p><p><em>(If you already have a <code>public</code> folder in your project, delete it before doing any of this to save some headaches.)</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 1. Enter the project folder.</span>
</span></span><span style=display:flex><span>&gt; cd hugo-gh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. Initialize git locally.</span>
</span></span><span style=display:flex><span>&gt; git init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3. Set our new Github repo as the remote for our local project</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (my sample URL - https://github.com/aormsby/hugo-gh-pages-source.git)</span>
</span></span><span style=display:flex><span>&gt; git remote add origin https://github.com/<span style=color:#f92672>[</span>GITHUB_USERNAME<span style=color:#f92672>]</span>/<span style=color:#f92672>[</span>SOURCE_REPO_NAME<span style=color:#f92672>]</span>.git
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4. Stage all files for commit.</span>
</span></span><span style=display:flex><span>&gt; git add .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Commit files.</span>
</span></span><span style=display:flex><span>&gt; git commit -m <span style=color:#e6db74>&#34;committing our hugo template&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 6. Push to the remote master</span>
</span></span><span style=display:flex><span>&gt; git push -u origin master
</span></span></code></pre></div><p>And there you have it! Our project source is now pushed to our Github repo.</p><figure class=align-center><a href=img/source-pushed.jpg><img loading=lazy src=img/source-pushed.jpg#center alt="source project pushed to Github"></a></figure><p>You could <em>absolutely</em> set up your source repo to be the host of your site using Github Pages, and you may have good reasons for doing so. That would require a different setup that you can find steps for on Hugo&rsquo;s <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#deployment-of-project-pages-from-docs-folder-on-master-branch>Host on Github</a> docs page. However, if we do this we ignore our chance to separate <code>public</code> into a separately versioned repo. To accomplish this, we have to create a second repository.</p><h3 id=live-site-data-repository>Live Site Data Repository<a hidden class=anchor aria-hidden=true href=#live-site-data-repository>#</a></h3><p>Let&rsquo;s add our first submodule to the project! Remember, our goal is to separate the commit histories of our project source and our site build output to the <code>public</code> directory. First, we create another repo on Github for our public site data. I&rsquo;ll call mine <strong>hugo-gh-pages-public</strong>. In our local terminal, run the following command from the project root.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># my sample URL - https://github.com/aormsby/hugo-gh-pages-public.git</span>
</span></span><span style=display:flex><span>&gt; git submodule add https://github.com/<span style=color:#f92672>[</span>GITHUB_USERNAME<span style=color:#f92672>]</span>/<span style=color:#f92672>[</span>PUBLIC_REPO_NAME<span style=color:#f92672>]</span>.git public
</span></span></code></pre></div><p>Sweet! We now have a submodule initialized and loaded into our project under the <code>public</code> directory, and it&rsquo;s already connected to its remote origin. Let&rsquo;s do a quick site build just to put something into the remote Github repo. The commands needed are a little tedious, but it&rsquo;s good to know the process.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 1. Perform a site build and output to &#39;public/&#39; directory.</span>
</span></span><span style=display:flex><span>&gt; hugo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2-4.</span>
</span></span><span style=display:flex><span>&gt; cd public
</span></span><span style=display:flex><span>&gt; git add .
</span></span><span style=display:flex><span>&gt; git commit -m <span style=color:#e6db74>&#34;first build&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5. Return to the project root.</span>
</span></span><span style=display:flex><span>&gt; cd ../
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 6-7.</span>
</span></span><span style=display:flex><span>&gt; git add .
</span></span><span style=display:flex><span>&gt; git commit -m <span style=color:#e6db74>&#34;first build - update submodule reference&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 8. Push the source project *and* the public submodule to Github together.</span>
</span></span><span style=display:flex><span>&gt; git push -u origin master --recurse-submodules<span style=color:#f92672>=</span>on-demand
</span></span></code></pre></div><p>It&rsquo;s <em><strong>super important</strong></em> when we build to make sure that we commit and push <em>both</em> the public submodule and the main project. For each submodule commit, the project updates its reference to the submodule to maintain its connection to the correct commit. The <code>--recurse-submodules=on-demand</code> command pushes all of the project modules at the same time.</p><figure class=align-center><a href=img/submodule-reference-terminal.jpg><img loading=lazy src=img/submodule-reference-terminal.jpg#center alt="submodule reference in terminal using git status command"></a><figcaption><p>submodule reference updated in the terminal after <code>git status</code> command</p></figcaption></figure><figure class=align-center><a href=img/submodule-reference-github.jpg><img loading=lazy src=img/submodule-reference-github.jpg#center alt="submodule reference on github after pushing"></a><figcaption><p>submodule reference on github after pushing</p></figcaption></figure><h2 id=enable-github-pages>Enable Github Pages<a hidden class=anchor aria-hidden=true href=#enable-github-pages>#</a></h2><p>On Github, our <strong>hugo-gh-pages-public</strong> repo now has some data. Go to the repo settings and find the Github Pages section. Set the <strong>Source</strong> of our site to <strong>master branch</strong>.</p><figure class=align-center><a href=img/github-pages-settings.jpg><img loading=lazy src=img/github-pages-settings.jpg#center alt="menu to update Github Pages settings to use master branch"></a></figure><p>With these settings, Github Pages will be able to serve our site from the repo starting with the <strong>index.html</strong> file in its root directory. The live URL for the site is built from your user name and the project name. Here&rsquo;s my sample URL - <a href=https://aormsby.github.io/hugo-gh-pages-public><code>https://aormsby.github.io/hugo-gh-pages-public</code></a>. At this point, our site won&rsquo;t display anything except an error message since Hugo requires some page templates or a full theme to generate the pages. That&rsquo;s fine. We just wanted to add some stuff to Github so we could access the repo&rsquo;s Github Pages settings as we just did.</p><h2 id=benefits-of-making-a-submodule-in-public>Benefits of Making a Submodule in &lsquo;Public&rsquo;<a hidden class=anchor aria-hidden=true href=#benefits-of-making-a-submodule-in-public>#</a></h2><p>To recap, here&rsquo;s our project setup so far.</p><figure class=align-center><a href=img/submodules-diagram-with-public.jpg><img loading=lazy src=img/submodules-diagram-with-public.jpg#center alt="project submodule digram with public folder"></a></figure><p>Let&rsquo;s take a look at some of the benefits of this system.</p><ul><li><p><strong>No accidental deploys</strong> - With our source code separated from our site data, it&rsquo;s a lot harder to accidentally push unfinished work to our live site. Even if we make builds locally and push our source changes, we won&rsquo;t push to our <strong>hugo-gh-pages-public</strong> repo without explicitly running commands to make that happen. <em>*sigh of relief*</em></p></li><li><p><strong>Separate rollbacks</strong> - If something goes wrong, the main project and public project can be separately rolled back to earlier commits. <em>(Just remember to commit the modified reference updates to the main module!)</em></p></li><li><p><strong>Branch work is easier</strong> - Changing branches in our source project will not change branches in our subproject (and vice versa). This is another nice safety buffer, and it gives us more options for branching in either module.</p></li><li><p><strong>Ready for site staging</strong> - We can easily create development branches in the <strong>public</strong> submodule that could be served as development subdomains of our site and used for testing new features.</p></li></ul><h3 id=some-drawbacks>Some Drawbacks<a hidden class=anchor aria-hidden=true href=#some-drawbacks>#</a></h3><p>Of course, it&rsquo;s always wise to assess the risks of any setup, and there are many opinions on the &lsquo;perfect system&rsquo; in the dev world - <strong>tell me about yours in the comments!</strong> To shine some light on the potential downsides of our submodule use, here are some of the concerns I&rsquo;ve thought about.</p><ul><li><p><strong>Juggling multiple repos</strong> - With more submodules comes more administration. It doesn&rsquo;t seem so rough for me, but right now I&rsquo;m working on my own. Running interlinked, asynchronous repositories comes with its own challenges in a team setting, particularly if someone forgets to push updated submodule references to the source.</p></li><li><p><strong>No site staging with Github Pages</strong> - While the <strong>public</strong> submodule can branch and easily store data used in a site staging system, Github Pages does not seem to support subdomains from different project branches. That&rsquo;s more of a Github Pages drawback, but it means we can&rsquo;t take full advantage of our setup just yet. Another hosting platform might offer a solution - I&rsquo;ll be looking into some options in a future post.</p></li></ul><h2 id=add-a-theme-to-our-site>Add a Theme to Our Site<a hidden class=anchor aria-hidden=true href=#add-a-theme-to-our-site>#</a></h2><p>Wait, we&rsquo;re not finished just yet! Remember how our site doesn&rsquo;t display anything except an error message right now? We need some templates to get things up and running. The easiest way to get some is to add one of the many <a href=https://themes.gohugo.io/>Hugo themes</a> to our project. Since it was the first theme I used, I&rsquo;ll use the <a href=https://themes.gohugo.io/hugo-theme-hello-friend/>Hello Friend theme</a> in my example.</p><blockquote><p>Author&rsquo;s Note: If you need submodules, keep on reading! But you might consider using Hugo modules instead. I have another post on those. See what works best for you! (<a href=https://www.adamormsby.com/posts/012-hugo-modules/>my post</a>)</p></blockquote><p>Many guides for adding a theme - including Hugo&rsquo;s own docs - just tell you to clone the theme repo or download and copy it into your project&rsquo;s <code>themes</code> directory. But hey, <em>our</em> theme today is <em>submodules</em>, so I propose that we add a theme to our project as a <em>submodule</em> since doing so would give us some nice dev powers over the theme.</p><figure class=align-center><a href=img/submodules-diagram-with-theme.jpg><img loading=lazy src=img/submodules-diagram-with-theme.jpg#center alt="project submodule digram with theme folder"></a></figure><p>Look at it this way - directly cloning a theme into our project has two major problems.</p><ol><li><strong>We can&rsquo;t push our commits to the theme&rsquo;s source repo, because we don&rsquo;t have permission.</strong> This means we can&rsquo;t make changes to the theme and then keep them versioned.</li><li><strong>A cloned project in a subdirectory isn&rsquo;t linked with the main project.</strong> When a submodule is added to a project, the main project adds a reference to it in a file named <code>.gitmodules</code>. Without that reference, the main project and the theme project aren&rsquo;t connected, which could cause confusion or problems down the line.</li><li><strong>Also, Git doesn&rsquo;t allow repos inside repos that aren&rsquo;t submodules.</strong> See <a href=https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/>this &lsquo;simple dev&rsquo; post</a> for details.</li></ol><p>Let&rsquo;s solve each of those problems in one fell swoop.</p><ol><li>Make a fork of the <strong>Hello Friend</strong> theme so we have our own copy of it.</li></ol><figure class=align-center><a href=img/fork-theme.jpg><img loading=lazy src=img/fork-theme.jpg#center alt="fork a theme project on Github"></a></figure><ol start=2><li>Add our forked repo as a submodule in our main project&rsquo;s <code>themes</code> folder.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Add the theme submodule from the root project folder</span>
</span></span><span style=display:flex><span><span style=color:#75715e># my sample URL - https://github.com/aormsby/F-hugo-theme-hello-friend.git</span>
</span></span><span style=display:flex><span>&gt; git submodule add https://github.com/<span style=color:#f92672>[</span>GITHUB_USERNAME<span style=color:#f92672>]</span>/<span style=color:#f92672>[</span>FORKED_THEME_REPO_NAME<span style=color:#f92672>]</span>.git themes/hello-friend
</span></span></code></pre></div><p>Boom! Now we have our own fork of a cool theme referenced as a submodule of our Hugo project. We can make any changes we want and push them to our own repo. I&rsquo;ll get into more advanced uses of theme submodules in another post, but for now we have the basics in place.</p><p>Things won&rsquo;t be <em>quite</em> right without tweaking a few final settings, so let&rsquo;s open the <code>config.toml</code> file in our project root so we can modify a few lines.</p><ol><li>Add a line so our site builds using our new theme.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#34;hello-friend&#34;</span>
</span></span></code></pre></div><ol start=2><li>Because we&rsquo;re making a Github &lsquo;project site&rsquo; we want to change the<code>baseURL</code> to match our project URL.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = [<span style=color:#a6e22e>GITHUB_USER_NAME</span>].<span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>io</span><span style=color:#960050;background-color:#1e0010>/</span>[<span style=color:#a6e22e>PROJECT_NAME</span>]
</span></span></code></pre></div><p>For example, mine will say <code>aormsby.github.io/hugo-gh-pages-public</code>. To understand the difference between setting up a project site and a user/organization site, see these <a href=https://pages.github.com/>Github Pages</a> and <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#github-user-or-organization-pages>Hugo</a> docs on the matter.</p><p>There are a lot more theme settings that can be adjusted in your config file, but you can explore those on your own. Let&rsquo;s deploy!</p><h2 id=test-site-and-deploy>Test Site and Deploy<a hidden class=anchor aria-hidden=true href=#test-site-and-deploy>#</a></h2><p>Running the terminal command <code>hugo server</code> in our project root spins up a local live preview of our site that can be viewed in a browser at <code>localhost:1313</code>. Run this now to check if our site is displaying anything (it should!), and then stop the process with <code>Ctrl+C</code>. Just like we did before, run the commands to build, commit, and push. <em>(Note that we didn&rsquo;t change anything in the theme, so we don&rsquo;t have to push anything in that repo.)</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt; hugo
</span></span><span style=display:flex><span>&gt; cd public
</span></span><span style=display:flex><span>&gt; git add .
</span></span><span style=display:flex><span>&gt; git commit -m <span style=color:#e6db74>&#34;build with theme&#34;</span>
</span></span><span style=display:flex><span>&gt; cd ../
</span></span><span style=display:flex><span>&gt; git add .
</span></span><span style=display:flex><span>&gt; git commit -m <span style=color:#e6db74>&#34;build with theme - update submodule reference&#34;</span>
</span></span><span style=display:flex><span>&gt; git push -u origin master --recurse-submodules<span style=color:#f92672>=</span>on-demand
</span></span></code></pre></div><p>After a few minutes, refresh the live site at <code>https://[USER_NAME].github.io/hugo-gh-pages-public</code> and check out your new site! Congratulations, you&rsquo;ve done it!</p><h2 id=next-steps>Next Steps<a hidden class=anchor aria-hidden=true href=#next-steps>#</a></h2><ul><li><p><strong>Theme Branches and Getting Updates</strong> - I&rsquo;ve worked out a nice branch-based system for continuing to get updates from the original theme repo while adding and changing things our forked theme repo. It&rsquo;s super useful. <a href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/>Next post!</a></p></li><li><p><a href=https://www.adamormsby.com/posts/000/hugo-shell-deploy-script/><strong>Better Deploy</strong></a> - I&rsquo;m sure you noticed that we had to use <em>a plethora</em> of terminal commands to add, commit, and push files to the main project and its submodules to maintain proper commit references. I wrote them out in this post for clarity, but this process is definitely something we can automate. Hugo&rsquo;s docs provide a <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#put-it-into-a-script>basic deploy script</a> to do this, and I&rsquo;m working on a greatly improved version of it that I&rsquo;ll write about when it&rsquo;s ready for action.</p></li><li><p><strong>Custom domains / CNAME</strong> - You may want to set up a custom domain on Github Pages. Here&rsquo;s <a href=https://help.github.com/en/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site>some good documentation</a> on how to do that.</p></li></ul><p>Thanks for reading! ~</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.adamormsby.com/tags/hugo/>Hugo</a></li><li><a href=https://www.adamormsby.com/tags/git/>Git</a></li><li><a href=https://www.adamormsby.com/tags/github/>Github</a></li><li><a href=https://www.adamormsby.com/tags/submodules/>Submodules</a></li><li><a href=https://www.adamormsby.com/tags/jamstack/>Jamstack</a></li></ul><nav class=paginav><a class=prev href=https://www.adamormsby.com/posts/000/hugo-themes-making-modifications/><span class=title>« Prev</span><br><span>Hugo Themes - Making Modifications while Keeping the Source Up-To-Date</span>
</a><a class=next href=https://www.adamormsby.com/posts/000/adam-roams-cycling-vinales/part-3/><span class=title>Next »</span><br><span>The Road to Viñales - A Tale of Cycling in Cuba - Part 3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.adamormsby.com/>Adam Ormsby</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script data-goatcounter=https://aoappdev.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>