<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Adam Ormsby</title>
    
    <image>
      <url>https://www.adamormsby.com/img/rssIcon.png</url>
      <title>Adam Ormsby</title>
      <link>https://www.adamormsby.com/</link>
    </image>
    
    
    <link>https://www.adamormsby.com/</link>
    <description>Recent content on Adam Ormsby</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 03 Oct 2020 12:23:10 -0500</lastBuildDate>
    
	<atom:link href="https://www.adamormsby.com/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Rant - Why Is It So Hard To Find Good Xamarin Help?</title>
      <link>https://www.adamormsby.com/posts/rants/rant-1-cant-find-samples/</link>
      <pubDate>Sat, 03 Oct 2020 12:23:10 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/rants/rant-1-cant-find-samples/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/rants/rant-1-cant-find-samples/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;/* begin rant&lt;/p&gt;
&lt;p&gt;Sometimes code doesn&amp;rsquo;t work. When that happens, we research the problem in detail, scouring books, notes, and the internet for the documentation that we hope will explain both the issue and the fix without much fuss. When that doesn&amp;rsquo;t work, we search for tutorials and code samples of similar work, and perhaps we even start discussions in online forums where we hope people with more experience will come around to help us out.&lt;/p&gt;
&lt;p&gt;That process may work fine with popular code libraries. It does &lt;em&gt;&lt;strong&gt;not&lt;/strong&gt;&lt;/em&gt; work with Xamarin.&lt;/p&gt;
&lt;p&gt;For whatever reason, I seem to have the hardest time finding the help I need in the Xamarin world. The Xamarin docs are &lt;em&gt;fantastic&lt;/em&gt; for understanding the fundamentals of Forms and connecting to native systems to use platform-specific features, but when I go beyond the basics the docs are no help at all. It feels like sailing the whole world with only a map of Europe (history does repeat itself, after all). Somehow, I keep wandering into uncharted territory, and the docs just aren&amp;rsquo;t enough to get me back home safely.&lt;/p&gt;

  
  &lt;img src=&#34;img/getlost.jpg&#34;  alt=&#34;Quote - Get lost in nature and you will quite possibly die.&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;But if you think heading to the &lt;a href=&#34;https://forums.xamarin.com&#34;  target=&#34;_blank&#34; &gt;Xamarin forums&lt;/a&gt; helps, I have some bad news for you. I&amp;rsquo;ve searched those forums up and down for information, and I&amp;rsquo;ve come to find it&amp;rsquo;s a place where many questions simply go to die. For whatever reason, many of the forum users seem to be &lt;em&gt;asking&lt;/em&gt; questions more than &lt;em&gt;answering&lt;/em&gt; them. This hints at the possibility that many forum users may be basic- to intermediate-level Xamarin devs and just can&amp;rsquo;t answer questions beyond what is already described in the docs. And that&amp;rsquo;s totally fine! Every person operates at their own respectable level. It just doesn&amp;rsquo;t help me when I have a more challenging problem on my plate.&lt;/p&gt;
&lt;p&gt;It makes me wonder - where are all the advanced Xamarin developers?? I&amp;rsquo;m pretty sure such a mythical creature exists, after all. It&amp;rsquo;s true that some companies develop with Xamarin, but perhaps they aren&amp;rsquo;t as active in the Xamarin community as I had hoped. (I guess they could be on Stack Overflow, though&amp;hellip;)&lt;/p&gt;
&lt;p&gt;And look, I know there are Xamarin team members (the ones with that classy &amp;lsquo;X&amp;rsquo; icon in their profile pictures) that float around the forums responding to questions here and there, but I&amp;rsquo;ve never gotten a good solution out of them. I&amp;rsquo;m &lt;em&gt;sure&lt;/em&gt; they&amp;rsquo;re intelligent, friendly people that I&amp;rsquo;d probably love to chat with in any other context, but when they respond to my posts I can&amp;rsquo;t stand to work with them.&lt;/p&gt;
&lt;p&gt;I honestly don&amp;rsquo;t think they read my posts. I&amp;rsquo;m always sure to write what I need and what&amp;rsquo;s not working, and I provide code samples where possible. But when they offer up a solution, it&amp;rsquo;s as if they&amp;rsquo;ve read a totally different question. They ignore my end goal and offer a solution to a problem I didn&amp;rsquo;t present - with absolute confidence that it&amp;rsquo;s exactly what I need. (Spoiler alert: it isn&amp;rsquo;t.) When this happens more than once in the same thread, I just give up. I give up everything and walk away.&lt;/p&gt;
&lt;p&gt;But look, it&amp;rsquo;s like I said - I&amp;rsquo;m sure they&amp;rsquo;re great people. But they&amp;rsquo;re also busy people. There&amp;rsquo;s probably a misunderstanding somewhere, and things just don&amp;rsquo;t work out. Oh well. The internet is a big place, and I can always find some nice code samples for what I need, right?&lt;/p&gt;
&lt;p&gt;Nope. No. Not at all.&lt;/p&gt;

  
  &lt;img src=&#34;img/obiwan.jpg&#34;  alt=&#34;Obi Wan Kenobi saying the archives must be incomplete&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Finding tutorials or code samples for Xamarin fundamentals is easy. Everyone copies everyone else&amp;rsquo;s blog posts and spreads the same basic info far and wide for those precious views, likes, and shares. (Highly unethical, I&amp;rsquo;d say.) But it&amp;rsquo;s &lt;em&gt;&lt;strong&gt;all the same content!&lt;/strong&gt;&lt;/em&gt; If I want to find something specific, something less common, something that hasn&amp;rsquo;t been done by a lot of people&amp;hellip; I just can&amp;rsquo;t. I can&amp;rsquo;t find what I need at all, and I spend days, weeks, sometimes a whole month banging my head against a wall trying to sort out what&amp;rsquo;s wrong with my code.&lt;/p&gt;
&lt;p&gt;Perfect example - Xamarin implementations of AdMob, which is what finally triggered the need to blow off some steam in a post like this. Some background - AdMob is a Google ads service. It has native Android and iOS libraries. Those libraries have (conveniently) been ported to C#/Xamarin and are downloadable as Nuget packages for inclusion in your native projects. I wanted to add &lt;a href=&#34;https://developers.google.com/admob/ios/rewarded-ads&#34;  target=&#34;_blank&#34; &gt;rewarded ads&lt;/a&gt; to my project. HOWEVER, there are no good code samples for implementing different ad types in your native projects!&lt;/p&gt;
&lt;p&gt;Well, I shouldn&amp;rsquo;t say &amp;lsquo;no&amp;rsquo; code samples. To be clear, there are &amp;lsquo;some&amp;rsquo; samples, but I&amp;rsquo;m not sure they count here. They&amp;rsquo;re 5 years old, all long enough for Google to have updated their libraries to use new properties and methods (which they did), and they show the use of a limited number of ad types - usually banners and interstitials. And they&amp;rsquo;re hard to find at that! I searched github for hours trying to find something, and when I did find them the samples were only for Android. No iOS samples at all! It was real frustrating since iOS was where I was stuck at the time.&lt;/p&gt;
&lt;p&gt;This situation actually made me feel &lt;em&gt;worse&lt;/em&gt; about my search. Instead of finding what I needed, I found &lt;em&gt;almost&lt;/em&gt; what I needed sitting next to an obvious void where the information I wanted was completely missing. It&amp;rsquo;s enough to drive a man to drink.&lt;/p&gt;
&lt;p&gt;Was I able to reverse engineer the code samples and figure out what I needed to do in my situation? Yes, kind of, and then I made educated guesses until I got it right, which took a lot longer than I would have liked. But in the end, my point is this - I always seem to be searching for information that doesn&amp;rsquo;t exist, and I don&amp;rsquo;t think that&amp;rsquo;s a personal problem. I&amp;rsquo;m starting to think that&amp;rsquo;s a Xamarin problem.&lt;/p&gt;
&lt;p&gt;Should be using a different multi-platform framework? Or even learning pure native mobile development? I don&amp;rsquo;t know! I really do like Xamarin, but I wish it wasn&amp;rsquo;t so painful sometimes. And I can&amp;rsquo;t help but wonder if I&amp;rsquo;m the only one who feels this way.&lt;/p&gt;
&lt;p&gt;end rant */&lt;/p&gt;
&lt;p&gt;Now if you&amp;rsquo;ll excuse me, I have to get back to my Xamarin project.&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>I Am - Dev Log 2 - Auto Sizing Label Fonts in Xamarin</title>
      <link>https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/</link>
      <pubDate>Thu, 03 Sep 2020 06:00:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/cover.png&#34;/&gt;
          
        
        
        &lt;p&gt;Font size! It sounds like one of the simplest things to figure out, but it turns out that sizing font to make a label expand and fill the available space is actually quite challenging in Xamarin. To start, there aren&amp;rsquo;t any Forms systems built to take care of that for us, so we&amp;rsquo;re left on our own to figure it out. There &lt;em&gt;are&lt;/em&gt; some platform-specific solutions for auto-sizing, but since those features of iOS and Android are basically functional opposites, this may not be the best option for a multiplatform project.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s a shame that Xamarin.Forms doesn&amp;rsquo;t have a common function for this yet, since I can think of a number of common use cases where you might want your text to fill all the space available to it. For the I Am project, the main visual focus on the screen is a centered text sentence, so I really want it to be as large as possible. Without filling the available space, it just doesn&amp;rsquo;t stand out.&lt;/p&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/font-size-before-after.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/img/font-size-before-after_hu4a790b6b4b8e41c1323ce0a0ebb1e258_52096_0x500_resize_box_2.png&#34;  alt=&#34;Xamarin mobile app screenshots, left shows default font size, right shows after sizing to fit&#34; 
    width=&#34;528&#34; height=&#34;500&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
    &lt;figcaption class=&#34;center&#34;&gt;
      Left: default font size | Right: after sizing to fit space
    &lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Inside this sentence, you can see that I&amp;rsquo;ve also placed a picker that needs its text sized to match the surrounding labels. Unfortunately, all the sizing solutions I&amp;rsquo;ve come across are focused on simple labels, and pickers are a combination of different native elements when rendered. If you assume the picker is a problem, you&amp;rsquo;re correct. But I figured out a solution that works for all of it, and I&amp;rsquo;m excited to share it with you.&lt;/p&gt;
&lt;p&gt;(And if you&amp;rsquo;re super impatient, just check out &lt;a href=&#34;https://github.com/aormsby/Xamarin-Label-FontSizer&#34;  target=&#34;_blank&#34; &gt;Xamarin-Label-FontSizer&lt;/a&gt; on Github. 😉)&lt;/p&gt;
&lt;h2 id=&#34;things-that-didnt-work&#34;&gt;Things That Didn&amp;rsquo;t Work&lt;/h2&gt;
&lt;p&gt;I went through quite a few possible code solutions, and I think it&amp;rsquo;s worth going over them quickly to explain what didn&amp;rsquo;t work and why not before we look at what I actually implemented.&lt;/p&gt;
&lt;h3 id=&#34;---estimated-font-size&#34;&gt;✖️ - Estimated Font Size&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&#34;https://github.com/xamarin/xamarin-forms-book-samples/tree/master/Chapter05/EstimatedFontSize&#34;  target=&#34;_blank&#34; &gt;Estimated Font Size&lt;/a&gt; sample project from the book &lt;a href=&#34;https://docs.microsoft.com/en-us/xamarin/xamarin-forms/creating-mobile-apps-xamarin-forms/&#34;  target=&#34;_blank&#34; &gt;&lt;!-- raw HTML omitted --&gt;Creating Mobile Apps with Xamarin.Forms&lt;!-- raw HTML omitted --&gt; by Charles Petzold&lt;/a&gt; was my first attempt at a quick sizing. (The book is a remarkably useful resource, but it can also be outdated at times.) I figured I didn&amp;rsquo;t need anything too complicated and thought this would be a nice, straightforward solution.&lt;/p&gt;
&lt;p&gt;Basically, this takes the outer view containing the label, sizes it up, and then calculates a font size using this equation &amp;ndash;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; lineHeight = &lt;span style=&#34;color:#ae81ff&#34;&gt;1.2&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; charWidth = &lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;;
&lt;span style=&#34;color:#75715e&#34;&gt;//...
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; fontSize = (&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;)Math.Sqrt(view.Width * view.Height /
                            (charCount * lineHeight * charWidth));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Unfortunately, this was overly simplistic and failed to account for many details.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.microsoft.com/en-us/xamarin/xamarin-forms/creating-mobile-apps-xamarin-forms/summaries/chapter05#accessibility-issues&#34;  target=&#34;_blank&#34; &gt;Accessibility issues&lt;/a&gt; mentioned in the Xamarin docs - If users change their device&amp;rsquo;s text sizing in their settings - modifiers like &amp;lsquo;Normal&amp;rsquo;, &amp;lsquo;Bigger&amp;rsquo;, or &amp;lsquo;Biggest&amp;rsquo; - then the font size can be scaled beyond the constraints you calculate for.&lt;/li&gt;
&lt;li&gt;The docs say that the default &lt;code&gt;lineHeight&lt;/code&gt; of a label is 1.2 times the height of the label, but I&amp;rsquo;ve found no way to verify that, which sort of screws with some calculations.&lt;/li&gt;
&lt;li&gt;The variable &lt;code&gt;charWidth&lt;/code&gt; used in the code above is only reliable for the default font that uses the Latin alphabet (and even here it seems like a rough guess). Relying on these defaults throws font styling and localization out the window. In case you need visual proof:&lt;/li&gt;
&lt;/ul&gt;

  &lt;figure class=&#34;center&#34; &gt;
    &lt;a href =&#34;img/char-width-sample.png&#34; &gt;
    &lt;img src=&#34;img/char-width-sample.png&#34;  alt=&#34;Xamarin mobile app screenshot shows different character widths between English and Japanese fonts&#34;   class=&#34;center&#34; /&gt;
    &lt;/a&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;clearly different character widths&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;I did try to calculate the active font&amp;rsquo;s character width by measuring the text within the label, but the results were very inconsistent. This option was simply not working for me.&lt;/p&gt;
&lt;h3 id=&#34;---platform-specific-sizing&#34;&gt;✖️ - Platform-Specific Sizing&lt;/h3&gt;
&lt;p&gt;There are some platform-specific options available for auto-sizing a label font, either by making a custom renderer or styling elements with an effect. But these didn&amp;rsquo;t work out for me, and here&amp;rsquo;s why:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;They size labels only. You&amp;rsquo;d need a more extensive custom control for these to work with anything else - like my Picker.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;iOS shrinks to fit while Android expands to fit. I never got far enough here to figure out how to accommodate these opposing setups.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;I was pretty confused about how the native features worked and couldn&amp;rsquo;t find good Xamarin documentation. Sometimes the reasons really are that simple.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;On iOS:&lt;/strong&gt; The auto-sizing functionality on iOS is limited to single-line labels. (&lt;a href=&#34;https://developer.apple.com/documentation/uikit/uilabel/1620546-adjustsfontsizetofitwidth&#34;  target=&#34;_blank&#34; &gt;Apple docs&lt;/a&gt;) I needed more options.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;On Android:&lt;/strong&gt; The functions to size text are different enough in the &lt;a href=&#34;https://developer.android.com/guide/topics/ui/look-and-feel/autosizing-textview&#34;  target=&#34;_blank&#34; &gt;Android&lt;/a&gt; and &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/android.widget.textview.setautosizetexttypewithdefaults?view=xamarin-android-sdk-9#Android_Widget_TextView_SetAutoSizeTextTypeWithDefaults_Android_Widget_AutoSizeTextType_&#34;  target=&#34;_blank&#34; &gt;Xamarin&lt;/a&gt; docs that I wasn&amp;rsquo;t sure how to implement them. Maybe this is on me, but I couldn&amp;rsquo;t get the Android settings functioning at all.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;---empirical-font-size-original-version&#34;&gt;✖️ - Empirical Font Size (original version)&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&#34;https://github.com/xamarin/xamarin-forms-book-samples/tree/master/Chapter05/EmpiricalFontSize&#34;  target=&#34;_blank&#34; &gt;Empirical Font Size&lt;/a&gt; sample project was built to solve the accessibility issues in the Estimated Font Size sample from above and to perform somewhat safer font sizing calculations. I came back to this method a few different times to compare it to other options (and I eventually made an improved version of it which is discussed next).&lt;/p&gt;
&lt;p&gt;The latest version of this code sample uses the &lt;a href=&#34;https://docs.microsoft.com/en-us/dotnet/api/xamarin.forms.visualelement.measure?view=xamarin-forms#Xamarin_Forms_VisualElement_Measure_System_Double_System_Double_Xamarin_Forms_MeasureFlags_&#34;  target=&#34;_blank&#34; &gt;&lt;!-- raw HTML omitted --&gt;VisualElement.Measure()&lt;!-- raw HTML omitted --&gt;&lt;/a&gt; function to size a label algorithmically within an outer container space. Basically, it sets a min and max font size, runs &lt;code&gt;Measure()&lt;/code&gt; to check for fit, and repeats until it narrows the size down to on that fits. The results of the sizing looked something like this:&lt;/p&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/empirical-size-sample.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/img/empirical-size-sample_hu7e4400d6e152454e6c977d5cf28afee8_123251_0x500_resize_box_2.png&#34;  alt=&#34;Xamarin mobile app screenshot showing sample text sized with Empirical Font Size project code&#34; 
    width=&#34;231&#34; height=&#34;500&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
    &lt;figcaption class=&#34;center&#34;&gt;
      Empirical Font Size project sample
    &lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;This was the most reliable code I found, but it was missing three things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The algorithm parameters were a little stiff. They relied on actual &lt;code&gt;View&lt;/code&gt; elements for constraint sizing, and I needed more flexibility. (easy fix)&lt;/li&gt;
&lt;li&gt;The algorithm didn&amp;rsquo;t check to see if words were split over multiple lines, resulting in some nasty wrapping.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;It could break bindings.&lt;/strong&gt; 😱 The sizing algorithm &lt;em&gt;only works&lt;/em&gt; when it performs calculation with a &lt;code&gt;Label&lt;/code&gt; object directly. If you perform the calculations on a label with bound data, you must avoid setting that bound value in code for any reason or you will destroy the binding. Of course, you could always be sure to reset the binding after a sizing, but that&amp;rsquo;s costly.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But hey, this project sample was a good start for what I needed. I knew that with a little effort I could solve these issues and make an algorithm suited to my needs - and perhaps yours, too!&lt;/p&gt;
&lt;h2 id=&#34;---the-font-sizer-project&#34;&gt;✔️ - The Font Sizer Project&lt;/h2&gt;
&lt;p&gt;I&amp;rsquo;ve started an open-source project called the &lt;a href=&#34;https://github.com/aormsby/Xamarin-Label-FontSizer&#34;  target=&#34;_blank&#34; &gt;Xamarin-Label-FontSizer&lt;/a&gt; that includes my improvements to the Empirical Font Sizing sample. Let&amp;rsquo;s go through what I changed.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;I refactored the algorithm into its own standalone function (and its own project as well). Instead of calculating fit with the surrounding elements, you can now use &lt;code&gt;int&lt;/code&gt; and &lt;code&gt;double&lt;/code&gt; constraint values for font and container sizes. (You still need to pass in a label, though. More on that in a moment.)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//My new function
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; CalculateMaxFontSize(Label label, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; minFontSize, &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; maxFontSize, &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; containerWidth, &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; containerHeight, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; wordSafe = &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; sizeForWidth = &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;) {}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After you include the project in your solution, you just have to call &lt;code&gt;FontSizer.CalculateMaxFontSize()&lt;/code&gt; and store the return value.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; labelFontSize = FontSizer.CalculateMaxFontSize(myLabel, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, stackLayout.Width, stackLayout.Height / &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;);

myLabel.FontSize = labelFontSize;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Something like that should do the trick. However, this particular example still runs the risk of breaking bindings. The last point deals with this.&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;I improved the function to account for word splitting managed by the variables &lt;code&gt;wordSafe&lt;/code&gt; and &lt;code&gt;sizeForWidth&lt;/code&gt;, so on top of the existing height check, there is now a width check for the longest word in the label string.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;These values work on their own and are not intended for you to set when you call the sizing function. (For more details, check out the &lt;a href=&#34;https://github.com/aormsby/Xamarin-Label-FontSizer/blob/master/README.md&#34;  target=&#34;_blank&#34; &gt;project readme&lt;/a&gt;.) With these additions to the calculations, you no longer have to worry about long words being displayed on multiple lines.&lt;/p&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/word-safe-before-after.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/img/word-safe-before-after_hu6b31cdfccc5638fa3187842231bc0523_60465_0x500_resize_box_2.png&#34;  alt=&#34;Xamarin mobile app screenshot showing word sizing with and without word safe enabled&#34; 
    width=&#34;231&#34; height=&#34;500&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
    &lt;figcaption class=&#34;center&#34;&gt;
      Word safe | top: disabled | bottom: enabled
    &lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Avoid breaking bindings by using what I&amp;rsquo;m calling &lt;strong&gt;&amp;lsquo;ghost sizing&amp;rsquo;&lt;/strong&gt;. This is really not an improvement, but a rather safe workaround to the binding issue.&lt;/li&gt;
&lt;/ol&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/ghost-sizing.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/img/ghost-sizing_hu68158129fb1baf86a3b516ee7ca6db25_66161_0x400_resize_box_2.png&#34;  alt=&#34;Mr Mít, the ghost sizer&#34; 
    width=&#34;300&#34; height=&#34;400&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
    &lt;figcaption class=&#34;center&#34;&gt;
      Mr Mít, the ghost sizer
    &lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;Both the original algorithm and my improved word-safe version modify the &lt;code&gt;.Text&lt;/code&gt; property of the label you pass into the function. I&amp;rsquo;d say this is bad form, but the &lt;code&gt;Measure()&lt;/code&gt; function requires a label object that is placed within a layout to perform any kind of sizing. Without that, nothing works. I tried finding ways around using a label by performing different calculations, but it just isn&amp;rsquo;t possible right now within Forms.&lt;/p&gt;
&lt;p&gt;The solution I&amp;rsquo;ve found is to size using a &amp;lsquo;ghost label&amp;rsquo;. What I mean is to add an &lt;em&gt;invisible label&lt;/em&gt; somewhere on your page with whatever properties you want and size that instead of the actual label you&amp;rsquo;re trying to fit into the space.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;!--  for sizing other elements without breaking bindings  --&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;Label&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;x:Name=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ghostLabel&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IsVisible=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;







  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/ghost-label.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/img/ghost-label_hud1d5915748b011cafe7cdcff5ba24bee_136021_0x500_resize_box_2.png&#34;  alt=&#34;Mr Mít sizing a ghost label&#34; 
    width=&#34;231&#34; height=&#34;500&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
    &lt;figcaption class=&#34;center&#34;&gt;
      Mr Mít sizing a ghost label
    &lt;/figcaption&gt;
  
&lt;/figure&gt;

&lt;p&gt;You can set the &lt;code&gt;Text&lt;/code&gt; of the ghost label to whatever text you&amp;rsquo;re trying to size (from a different label) and pass the ghost label into the function instead. It may not be visible on your page, but it does size correctly!&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;ghostLabel.Text = String.Copy(myLabel.Text);

&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; labelFontSize = FontSizer.CalculateMaxFontSize(ghostLabel, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, stackLayout.Width, stackLayout.Height / &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;);

myLabel.FontSize = labelFontSize;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And honestly, it&amp;rsquo;s not such a bad workaround as its quite easy to implement and not resource-intensive at all.&lt;/p&gt;
&lt;h3 id=&#34;sizing-the-picker&#34;&gt;Sizing The Picker&lt;/h3&gt;
&lt;p&gt;Remember the picker I wanted to size? Well, I can&amp;rsquo;t pass it into a function that only takes labels, and I can&amp;rsquo;t assume it will size the same, either. Thankfully, the ghost sizing solution works here as well. All you have to do is get the longest picker item, give it to the ghost label, and modify the size constraints to account for some padding between the text and the edges of the picker.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;pickerFontSize = FontSizer.CalculateMaxFontSize(ghostLabel, &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, stackLayout.Width * &lt;span style=&#34;color:#ae81ff&#34;&gt;0.9&lt;/span&gt;, stackLayout.Height / &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s the &lt;code&gt;stackLayout.Width * 0.9&lt;/code&gt; that gives me the padding I need by ensuring the text size only takes up a maximum 90% of the available width. Sure, it&amp;rsquo;s kind of a hack. But it works.&lt;/p&gt;
&lt;h2 id=&#34;contribute-to-the-font-sizer&#34;&gt;Contribute to the Font Sizer!&lt;/h2&gt;
&lt;p&gt;This &lt;a href=&#34;https://github.com/aormsby/Xamarin-Label-FontAutoSize&#34;  target=&#34;_blank&#34; &gt;Xamarin-Label-FontAutoSize&lt;/a&gt; project is open source and ready to download on Github. I&amp;rsquo;m sure I&amp;rsquo;ll be making updates to it as I have the time or need, and I&amp;rsquo;d love to get some input on how to approach the various issues that still exist.&lt;/p&gt;
&lt;p&gt;The Github project readme goes over these &lt;a href=&#34;https://github.com/aormsby/Xamarin-Label-FontSizer#font-sizer-limitations--things-to-watch-out-for&#34;  target=&#34;_blank&#34; &gt;things to watch out for&lt;/a&gt; if you decided to implement my work into your own codebase. If you think you can solve any of these issues, I invite you to contribute to the project yourself.&lt;/p&gt;
&lt;h2 id=&#34;on-the-horizon---possible-new-font-sizing-option-in-xamarinforms&#34;&gt;On The Horizon - Possible New Font Sizing Option in Xamarin.Forms&lt;/h2&gt;
&lt;p&gt;It looks like the Xamarin dev team might &lt;em&gt;finally&lt;/em&gt; be considering adding a font sizing solution to Xamarin.Forms. I&amp;rsquo;ve been keeping an eye on this enhancement post and this pull request for any updates. I agree that this enhancement is needed, but I also wonder if it will take care of that crucial word splitting issue I fixed with the FontSizer. Or if it will be limited to sizing for a single line. Or how it will handle localized strings. I just don&amp;rsquo;t know!&lt;/p&gt;
&lt;p&gt;But hey, if the sizing problem is ever solved, I can always alter this project to focus on localization needs. Those will never go away. 😉&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>I Am - Dev Log 1 - Project Goals and Challenges</title>
      <link>https://www.adamormsby.com/posts/i-am-dev-log/part-1-goals-and-challenges/</link>
      <pubDate>Mon, 24 Aug 2020 09:00:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/i-am-dev-log/part-1-goals-and-challenges/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-1-goals-and-challenges/cover.png&#34;/&gt;
          
        
        
        &lt;h2 id=&#34;today-i-am-bold&#34;&gt;Today I Am Bold&lt;/h2&gt;
&lt;p&gt;Well, it&amp;rsquo;s about time I got to this! Welcome to my first development log about a mobile app I&amp;rsquo;m working on titled &amp;lsquo;I Am&amp;rsquo;. It&amp;rsquo;s a concept I&amp;rsquo;ve had for quite some time, and it&amp;rsquo;s turning out to be a great starter project. Rather than go deep into the details right away, I want to start by sharing a little about the project - what it is, my development goals, and some of the roadblocks I expect to encounter along the way (and some I&amp;rsquo;ve already had trouble with!).&lt;/p&gt;
&lt;h2 id=&#34;i-am---the-concept&#34;&gt;I Am - The Concept&lt;/h2&gt;
&lt;p&gt;I Am is a simple app with a simple premise. Life is stressful, and that stress can sap away our energy. When that happens, it&amp;rsquo;s nice to have a little pick-me-up to help us work through the challenges in front of us and get back to feeling like ourselves again. I Am wants to be your daily pick-me-up, and it will do it in a pretty straightforward way.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&amp;ldquo;Today I am [adjective]&amp;quot;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s the sentence you&amp;rsquo;ll see on the main page of the app, nice and large in the middle of your phone&amp;rsquo;s screen. Except, of course, you&amp;rsquo;ll see an actual adjective at the end - bold, adventurous, friendly&amp;hellip; there&amp;rsquo;s a whole list to select from! Whichever word you choose, you&amp;rsquo;re setting an emotional goal for yourself, something that can be used as a personal mantra and can help you find a way to keep moving forward when times are tough.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s an early look at how things are going:&lt;/p&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/iPhone_adventurous.jpg&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-1-goals-and-challenges/img/iPhone_adventurous_hud126f445d9a2ac6816a75bff92b59e8b_72814_0x400_resize_q75_box.jpg&#34;  alt=&#34;I Am app, English, adventurous&#34; 
    width=&#34;185&#34; height=&#34;400&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
&lt;/figure&gt;

&lt;h2 id=&#34;main-project-goals&#34;&gt;Main Project Goals&lt;/h2&gt;
&lt;h3 id=&#34;build-ship-and-update-a-xamarinforms-app&#34;&gt;Build, Ship, and Update a Xamarin.Forms App&lt;/h3&gt;
&lt;p&gt;I&amp;rsquo;ve been looking into Xamarin.Forms on and off for a few years now, and I&amp;rsquo;m taking this chance to build an app from start to release and beyond. I love the idea that I could build an app for iOS, Android, and more using the same codebase. Multiplatform projects are definitely big in the future of development, and it&amp;rsquo;s time I got familiar with it.&lt;/p&gt;
&lt;p&gt;By the end of this, I expect to have a much better understanding of Xamarin.Forms, some aspects of native platform configuration, debugging, publishing, and pushing updates to a live Xamarin app - the whole project lifecycle with Xamarin. Then the second app will come out much faster!&lt;/p&gt;
&lt;h3 id=&#34;endless-localization-support&#34;&gt;&amp;lsquo;Endless&amp;rsquo; Localization Support&lt;/h3&gt;
&lt;p&gt;I&amp;rsquo;ve been &lt;strong&gt;super heavy&lt;/strong&gt; into localization this year, and I&amp;rsquo;m trying hard to build up the skills and experience to get a job as a localization engineer. I think it&amp;rsquo;s important to be aware of the different audiences that use a product, and I really support the goal of speaking to people in their language on their terms. So I&amp;rsquo;m going to localize the hell out of this app!&lt;/p&gt;
&lt;p&gt;While I do have a few target locales in mind - en-US, es-ES, vi-VN, and ja-JP - I actually have a very open-ended plan for localization. I&amp;rsquo;ll do what I can on my end to internationalize the app&amp;rsquo;s layout and text display in preparation for string localization, and from there I plan on crowdsourcing translations through collaborative online tools. Hopefully (&lt;em&gt;fingers crossed&lt;/em&gt;), I can slot in translated resources without many issues. If that works out, I intend to keep adding languages indefinitely as long as I can find translators to support them.&lt;/p&gt;








  
  



&lt;figure class=&#34;center&#34; &gt;
  &lt;a href =&#34;img/iPhone-loc-sample.png&#34; &gt;
  &lt;img style=&#34;max-width: 100%; width: auto; height: auto; border-radius: 8px;&#34;
    src=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-1-goals-and-challenges/img/iPhone-loc-sample_hud6562426f0250fa08740481507d830a7_311202_0x400_resize_box_2.png&#34;  alt=&#34;I Am app, English, adventurous&#34; 
    width=&#34;380&#34; height=&#34;400&#34;
    class=&#34;center&#34;
    /&gt;
  &lt;/a&gt;
	
&lt;/figure&gt;

&lt;h2 id=&#34;challenges-and-roadblocks&#34;&gt;Challenges and Roadblocks&lt;/h2&gt;
&lt;p&gt;No project is without challenges, but they&amp;rsquo;re also how we find and overcome limitations. Here are some roadblocks I&amp;rsquo;ve already run into along with one that I fully expect to be an issue down the line.&lt;/p&gt;
&lt;h3 id=&#34;visual-studio-for-mac&#34;&gt;Visual Studio for Mac&lt;/h3&gt;
&lt;p&gt;I &lt;strong&gt;love&lt;/strong&gt; that Visual Studio for Mac exists because I can work on my MacBook Air anywhere in the world I want. I &lt;strong&gt;don&amp;rsquo;t love&lt;/strong&gt; that VS for Mac sometimes feels like a lower priority than the Windows version when it comes to feature support and bug fixes.&lt;/p&gt;
&lt;p&gt;For example, the huge majority of VS extensions are only available on Windows, mostly due to the use of  code libraries like WPF that don&amp;rsquo;t work on a Mac. This isn&amp;rsquo;t really anybody&amp;rsquo;s fault, specifically. It just means that I constantly find tools recommendations or even Microsoft-sponsored tutorials that show me tools I can&amp;rsquo;t use on a Mac.&lt;/p&gt;
&lt;p&gt;Yes, VS for Mac is &lt;em&gt;beautifully designed&lt;/em&gt; (much nicer than Windows, I think), but my tools are limited. I was especially surprised when I found out the .resx editor available for editing resources files on Windows was missing from Mac entirely. Before I found my online translation tools, I was editing multiple .resx files &lt;strong&gt;by hand.&lt;/strong&gt; 😱&lt;/p&gt;
&lt;p&gt;So why don&amp;rsquo;t I just work on Windows? Simple - I need a Mac to build the iOS app. Even if I started on Windows with all the nice toolsets, they wouldn&amp;rsquo;t build on a Mac, so I simply can&amp;rsquo;t use them if I intend to build anything on a Mac. It&amp;rsquo;s fine, though. I see this as an opportunity to discover and develop strong Mac-friendly workflows that I can use in other projects.&lt;/p&gt;
&lt;h3 id=&#34;localization-with-xamarin&#34;&gt;Localization with Xamarin&lt;/h3&gt;
&lt;p&gt;Building a localization system was a challenge for some time as well. Remember all the VS extensions I can&amp;rsquo;t use on Mac? Well, I had to build something on my own. There is &lt;strong&gt;very little&lt;/strong&gt; &lt;a href=&#34;https://docs.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/localization/&#34;  target=&#34;_blank&#34; &gt;official documentation on localization&lt;/a&gt; (though it&amp;rsquo;s sometimes very helpful), and it seems very few people have tried to tackle the subject in blogs and forums. I might have know that localization isn&amp;rsquo;t such a hot topic. However, I did find a workable solution that I&amp;rsquo;ll be writing about in another post.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m also a bit concerned about testing with pseudo-localization. I honestly don&amp;rsquo;t know how to do it, and I don&amp;rsquo;t know if there&amp;rsquo;s a way to do it properly in a Xamarin app. This requires some research.&lt;/p&gt;
&lt;h3 id=&#34;auto-sizing-label-fonts&#34;&gt;Auto Sizing Label Fonts&lt;/h3&gt;
&lt;p&gt;I never thought this would be an issue, but it was an absolutely devilish one that completely stalled my progress for around a month. It turns out there&amp;rsquo;s currently no built-in Xamarin support for setting the font size of a label to fill up as much space as it can. It &lt;em&gt;sounds&lt;/em&gt; like such a basic thing, but I found out the hard way that it really isn&amp;rsquo;t. But hey, when you want your text to fill up the screen, you have to figure out a way to make it happen. &lt;a href=&#34;https://www.adamormsby.com/posts/i-am-dev-log/part-2-xamarin-font-auto-sizing/&#34; &gt;I’ll show you how I did it in a different post.&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;That&amp;rsquo;s the rundown so far! Perhaps I&amp;rsquo;ve teased more than I&amp;rsquo;ve explained, but I certainly plan on sharing more about I Am&amp;rsquo;s development in future posts. Tomorrow I continue building, but today I&amp;rsquo;m excited to share my goals and aspirations, to risk the creator&amp;rsquo;s humiliation that we all feel when sharing the fruits of our labor. Today I&amp;rsquo;m putting it out there.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Today I am bold.&lt;/strong&gt;&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>Github Action: Fork Sync With Upstream</title>
      <link>https://www.adamormsby.com/posts/github-projects/actions/fork-sync-with-upstream/</link>
      <pubDate>Fri, 14 Aug 2020 20:00:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/github-projects/actions/fork-sync-with-upstream/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/github-projects/actions/fork-sync-with-upstream/cover.png&#34;/&gt;
          
        
        
        &lt;h4 id=&#34;on-github&#34;&gt;On github:&lt;/h4&gt;
&lt;p&gt;


    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby/Fork-Sync-With-Upstream-action/archive/master.zip data-icon=&#34;octicon-download&#34; data-size=&#34;large&#34; aria-label=Download&amp;#32;aormsby/Fork-Sync-With-Upstream-action&amp;#32;on&amp;#32;GitHub&gt;Download&lt;/a&gt;




    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby/Fork-Sync-With-Upstream-action data-icon=&#34;octicon-star&#34; data-size=&#34;large&#34; aria-label=Star&amp;#32;aormsby/Fork-Sync-With-Upstream-action&amp;#32;on&amp;#32;Github&gt;Star&lt;/a&gt;




    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby data-size=&#34;large&#34; aria-label=Follow&amp;#32;@aormsby&amp;#32;on&amp;#32;GitHub&gt;aormsby&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;These days, automation is key to saving time and minimizing errors. But if you&amp;rsquo;ve never worked with automation, it&amp;rsquo;s good to start small. This was exactly my thought when I made my first Github Action. It&amp;rsquo;s available now on the Github Marketplace if you want to try it out - &lt;a href=&#34;https://github.com/marketplace/actions/fork-sync-with-upstream&#34;  target=&#34;_blank&#34; &gt;Fork Sync With Upstream&lt;/a&gt;. Let&amp;rsquo;s see what it does!&lt;/p&gt;
&lt;h2 id=&#34;how-it-works&#34;&gt;How It Works&lt;/h2&gt;
&lt;p&gt;Remember my post on &lt;a href=&#34;https://www.adamormsby.com/posts/hugo-themes-making-modifications/&#34; &gt;making modifications to a Hugo theme&lt;/a&gt;? We forked a theme repository and saw how to make custom modifications to our local version of it. Whenever we wanted to pull updates from the source repo, we ran a bunch of git commands to pull new commits from the upstream repo and then push them to our fork. Syncing with commands like that is all well and good, but let&amp;rsquo;s save ourselves a little time by automating that process.&lt;/p&gt;
&lt;p&gt;The Fork Sync With Upstream action takes care of all those updates for us without any work on our part. At its core, the action is a shell script that runs on a Github server and automatically does the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Checkout your fork (needed for the sync process)&lt;/li&gt;
&lt;li&gt;Set the upstream repo to pull updates from&lt;/li&gt;
&lt;li&gt;Check if there are any new commits to sync (and print the commit information)&lt;/li&gt;
&lt;li&gt;Pull from the upstream repo&lt;/li&gt;
&lt;li&gt;Push to the target branch of the target repo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Just add my action to a Github workflow file in your repo, and &lt;em&gt;voila!&lt;/em&gt; All that update work you were doing manually is now automated!&lt;/p&gt;
&lt;h2 id=&#34;running-the-fork-sync&#34;&gt;Running the Fork Sync&lt;/h2&gt;
&lt;p&gt;If you&amp;rsquo;ve never made a Github workflow before, it&amp;rsquo;s a little bit confusing to figure out at first. (At least, it all was for me.) I recommend reading some of the &lt;a href=&#34;https://docs.github.com/en/actions&#34;  target=&#34;_blank&#34; &gt;Github Actions documentation&lt;/a&gt; to get a better feel for how all the pieces work together.&lt;/p&gt;
&lt;p&gt;For those looking for a quick sample workflow, here&amp;rsquo;s the one I&amp;rsquo;m using in &lt;a href=&#34;https://github.com/aormsby/F-hugo-theme-hello-friend&#34;  target=&#34;_blank&#34; &gt;my fork of Hello Friend&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;on&lt;/span&gt;:
  &lt;span style=&#34;color:#66d9ef&#34;&gt;schedule&lt;/span&gt;:
    - &lt;span style=&#34;color:#66d9ef&#34;&gt;cron&lt;/span&gt;:  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0 7 * * 1,4&amp;#39;&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# scheduled at 07:00 every Monday and Thursday&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;jobs&lt;/span&gt;:
  &lt;span style=&#34;color:#66d9ef&#34;&gt;sync_with_upstream&lt;/span&gt;:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;runs-on&lt;/span&gt;: ubuntu-latest
    &lt;span style=&#34;color:#66d9ef&#34;&gt;name&lt;/span&gt;: Sync master with upstream latest

    &lt;span style=&#34;color:#66d9ef&#34;&gt;steps&lt;/span&gt;:
    - &lt;span style=&#34;color:#66d9ef&#34;&gt;name&lt;/span&gt;: Checkout master
      &lt;span style=&#34;color:#66d9ef&#34;&gt;uses&lt;/span&gt;: actions/checkout@v2
      &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;ref&lt;/span&gt;: master

    - &lt;span style=&#34;color:#66d9ef&#34;&gt;name&lt;/span&gt;: Pull upstream changes
      &lt;span style=&#34;color:#66d9ef&#34;&gt;id&lt;/span&gt;: sync
      &lt;span style=&#34;color:#66d9ef&#34;&gt;uses&lt;/span&gt;: aormsby/Fork-Sync-With-Upstream-action@v1
      &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;upstream_repository&lt;/span&gt;: panr/hugo-theme-hello-friend
        &lt;span style=&#34;color:#66d9ef&#34;&gt;upstream_branch&lt;/span&gt;: master

    - &lt;span style=&#34;color:#66d9ef&#34;&gt;name&lt;/span&gt;: Timestamp
      &lt;span style=&#34;color:#66d9ef&#34;&gt;run&lt;/span&gt;: date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;(Actual file at &lt;a href=&#34;https://github.com/aormsby/F-hugo-theme-hello-friend/blob/Working/.github/workflows/wf-fork-sync.yaml&#34;  target=&#34;_blank&#34; &gt;&lt;!-- raw HTML omitted --&gt;.github/workflows/wf-fork-sync.yaml&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This may not be the only Action built for syncing with a remote, but it certainly has a better README than many of the other ones I&amp;rsquo;ve seen! For more details on using input variables and options, visit the official Marketplace page for &lt;a href=&#34;https://github.com/marketplace/actions/fork-sync-with-upstream&#34;  target=&#34;_blank&#34; &gt;Fork Sync With Upstream&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;behind-the-scenes&#34;&gt;Behind The Scenes&lt;/h2&gt;
&lt;p&gt;Just some extra dev notes if you&amp;rsquo;re interested. 🙂&lt;/p&gt;
&lt;p&gt;Github Actions currently have to be created as Docker container actions or JavaScript actions. I went with JavaScript because it&amp;rsquo;s more familiar to me, and I don&amp;rsquo;t need to run this action in any specific Docker-simulated environment.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;action.yaml&lt;/code&gt; file declares all the input variables needed for the action and then runs &lt;code&gt;main.js&lt;/code&gt;. At the moment, &lt;code&gt;main.js&lt;/code&gt; exists only to run the shell script &lt;code&gt;upstream-sync.sh&lt;/code&gt;, which is where the sync really happens. This could change in the future.&lt;/p&gt;
&lt;p&gt;I used both &lt;code&gt;@actions/core&lt;/code&gt; and &lt;code&gt;@actions/exec&lt;/code&gt; from the &lt;a href=&#34;https://github.com/actions/toolkit&#34;  target=&#34;_blank&#34; &gt;Github Actions Toolkit&lt;/a&gt; to simplify the functionality in &lt;code&gt;main.js&lt;/code&gt;. The shell script is called by &lt;code&gt;exec&lt;/code&gt;, which I think of as an &amp;lsquo;easy&amp;rsquo; version of the &lt;code&gt;exec&lt;/code&gt; function in node.js. Some of the actions and tools that Github has made are really quite useful.&lt;/p&gt;
&lt;p&gt;Anyway, try it out! Let me know how you like it. I&amp;rsquo;m also planning on turning my &lt;a href=&#34;https://www.adamormsby.com/posts/hugo-shell-deploy-script/&#34; &gt;shell deploy script&lt;/a&gt; into an action, so be on the lookout for that. And if you like my work, please consider buying me a coffee. Cheers!&lt;/p&gt;

  &lt;span class=&#34;icon-link&#34;&gt;
    &lt;a href=&#34;https://www.buymeacoffee.com/aormsby&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://cdn.buymeacoffee.com/buttons/default-green.png&#34; alt=&#34;Buy Me A Coffee&#34; style=&#34;height: 51px !important;width: 217px !important;&#34; &gt;
    &lt;/a&gt;
  &lt;/span&gt;


&lt;p&gt;


    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby/Fork-Sync-With-Upstream-action/archive/master.zip data-icon=&#34;octicon-download&#34; data-size=&#34;large&#34; aria-label=Download&amp;#32;aormsby/Fork-Sync-With-Upstream-action&amp;#32;on&amp;#32;GitHub&gt;Download&lt;/a&gt;




    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby/Fork-Sync-With-Upstream-action data-icon=&#34;octicon-star&#34; data-size=&#34;large&#34; aria-label=Star&amp;#32;aormsby/Fork-Sync-With-Upstream-action&amp;#32;on&amp;#32;Github&gt;Star&lt;/a&gt;




    &lt;a class=&#34;github-button&#34; href=https://github.com/aormsby data-size=&#34;large&#34; aria-label=Follow&amp;#32;@aormsby&amp;#32;on&amp;#32;GitHub&gt;aormsby&lt;/a&gt;


&lt;script async defer src=&#34;https://buttons.github.io/buttons.js&#34;&gt;&lt;/script&gt;&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>Build and Deploy: A Shell Script for Hugo Sites</title>
      <link>https://www.adamormsby.com/posts/hugo-shell-deploy-script/</link>
      <pubDate>Sun, 21 Jun 2020 23:30:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/hugo-shell-deploy-script/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/hugo-shell-deploy-script/cover.jpg&#34;/&gt;
          
        
        
        &lt;h2 id=&#34;shell-scripts-are-awesome&#34;&gt;Shell Scripts are Awesome&lt;/h2&gt;
&lt;p&gt;I don&amp;rsquo;t know about you, but I &lt;em&gt;love&lt;/em&gt; writing code that automates my work. I finally had the chance to do just that, and now I&amp;rsquo;m the proud owner of a shell script that builds and deploys my Hugo site without any extra help from me - and it even works with my &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/&#34; &gt;git submodule setup&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;So why do this? Well, when I began working with Hugo, I ran across a &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#put-it-into-a-script&#34;  target=&#34;_blank&#34; &gt;rudimentary deploy script&lt;/a&gt; in their documentation. Since I was still familiarizing myself with Hugo, it hadn&amp;rsquo;t occurred to me yet to automate the build process, and I immediately fell in love with the idea. However, I could see the script would need major improvements to do what I wanted, and I was completely new to shell.&lt;/p&gt;
&lt;p&gt;At first, I struggled a bit with writing shell code (especially keeping things POSIX-compliant for portability!), but I stumbled upon the &lt;a href=&#34;https://www.shellscript.sh/&#34;  target=&#34;_blank&#34; &gt;shellscript.sh&lt;/a&gt; tutorials and dove straight in. Thanks to those &lt;em&gt;fantastic&lt;/em&gt; tutorials, I now have a sweet script to show off and perhaps even a newfound love for the shell. Apart from variable expansion struggles, it&amp;rsquo;s really quite elegant!&lt;/p&gt;
&lt;p&gt;I find my &lt;code&gt;hugo-deploy.sh&lt;/code&gt; script does help keep builds following a standard process, but I think I&amp;rsquo;ll really see it shine when I get around to scheduling automated builds on a remote server. Exciting!&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;#the-full-script&#34; &gt;full script at end&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;deploy-script-functionality&#34;&gt;Deploy Script Functionality&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Be sure to place this script in your &lt;strong&gt;site&amp;rsquo;s root directory&lt;/strong&gt; if you intend to use it. It&amp;rsquo;s built with my git submodule setup in mind. But I don&amp;rsquo;t think it would be too hard to modify it for something different.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;order-of-operations&#34;&gt;Order of Operations&lt;/h3&gt;
&lt;p&gt;From start to finish, here&amp;rsquo;s what the script does.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Update the automatic build number (included in the git commit)&lt;/li&gt;
&lt;li&gt;Check for any user options (see below)&lt;/li&gt;
&lt;li&gt;Check if your active repo branches match your intended deploy branches
&lt;ul&gt;
&lt;li&gt;Production and development branches can both be set&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Check if your local repo is up to date (no merge conflicts allowed!)&lt;/li&gt;
&lt;li&gt;(Optional) Clear out the site output folder before the Hugo build&lt;/li&gt;
&lt;li&gt;Run Hugo build command&lt;/li&gt;
&lt;li&gt;Git add, commit, and push to your specified remotes&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If any point in this process fails, the script exits with an error message detailing where the issue occurred. You&amp;rsquo;ll have to fix the issue before running the script again. Thankfully, most of the issues are quick fixes. If you have to do a merge, that&amp;rsquo;s on you!&lt;/p&gt;
&lt;h2 id=&#34;settings-variables&#34;&gt;&amp;lsquo;Settings&amp;rsquo; Variables&lt;/h2&gt;
&lt;p&gt;There are some &amp;lsquo;settings&amp;rsquo; variables at the top of the script that you may need to modify to match your project.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# BUILD/DEPLOY SETTINGS - edit as needed for your use case&lt;/span&gt;

PUB_SUBMODULE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;public&amp;#34;&lt;/span&gt;         &lt;span style=&#34;color:#75715e&#34;&gt;# name of output folder where git submodule is located&lt;/span&gt;
IGNORE_FILES&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;. .. .git CNAME&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# space-delimited array of files to protect when &amp;#39;fresh&amp;#39; option is used&lt;/span&gt;
DEV_BRANCHES&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dev dev&amp;#34;&lt;/span&gt;         &lt;span style=&#34;color:#75715e&#34;&gt;# development branches to build on and push to, 1-root, 2-pubmodule&lt;/span&gt;
PROD_BRANCHES&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;master master&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# production branches to build on and push to, 1-root, 2-pubmodule&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;PUB_SUBMODULE&lt;/code&gt; holds the name of the folder where your public site submodule is located. The default output folder is &lt;code&gt;public&lt;/code&gt;, which is where I have my submodule for the live site. If you&amp;rsquo;ve changed your output folder in the site config, you&amp;rsquo;ll need to update this to match it. The variable value is relative to the root directory, so if you&amp;rsquo;ve buried your output folder then set the path accordingly (e.g. &lt;code&gt;my/public/build&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;IGNORE_FILES&lt;/code&gt; is used with the &amp;lsquo;fresh&amp;rsquo; option (see below). It acts as an array of filenames that will &lt;em&gt;not&lt;/em&gt; be deleted from the output folder if you select the &amp;lsquo;fresh&amp;rsquo; option. It&amp;rsquo;s mostly to protect non-Hugo files.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PROD_BRANCHES&lt;/code&gt; are the two production branches on which you intend to build and push your site data. The first branch name matches the preferred deploy branch for your &lt;strong&gt;site source data&lt;/strong&gt; (in your root directory), and the second branch name matches the preferred deploy branch for &lt;strong&gt;your live site&lt;/strong&gt; (the supposed submodule). These are the values the script uses to check your active branches in step 3 above. It&amp;rsquo;s a nice safety check.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;DEV_BRANCHES&lt;/code&gt; works the same way for a development build, which is enabled through the user options.&lt;/p&gt;
&lt;h2 id=&#34;user-options&#34;&gt;User Options&lt;/h2&gt;
&lt;p&gt;Sometimes you need a little customization! That&amp;rsquo;s where my included script user options come into play. Hopefully these options can help you out a bit.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Script Options&lt;/span&gt;
./hugo-deploy.sh &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;-d|-f&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;COMMIT_MESSAGE&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; -o &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;HUGO_OPTIONS&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;-d&lt;/strong&gt;
&amp;lsquo;dev&amp;rsquo; =&amp;gt; deploys to development branches set in DEV_BRANCHES list (default is PROD_BRANCHES)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-f&lt;/strong&gt;
&amp;lsquo;fresh&amp;rsquo; =&amp;gt; deletes public directory data before rebuild (skips files in IGNORE_FILES list)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-m&lt;/strong&gt;
&amp;lsquo;message&amp;rsquo; =&amp;gt; appends a custom commit message to the auto-build string, works exactly like git -m&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-o&lt;/strong&gt;
&amp;lsquo;options&amp;rsquo; (for Hugo build) =&amp;gt; includes Hugo build options during deploy process (default none), all &lt;code&gt;hugo build&lt;/code&gt; options are valid&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-h&lt;/strong&gt; =&amp;gt; &amp;lsquo;help&amp;rsquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Usage Example&lt;/span&gt;
./hugo-deploy.sh -d -f -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Deploying like a rockstar!&amp;#34;&lt;/span&gt; -o &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;--cleanDestinationDir&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Fun Stuff:&lt;/strong&gt; If you rename the script file to &lt;code&gt;hugo-deploy.command&lt;/code&gt;, you can run the script with a double click! I haven&amp;rsquo;t actually tested this, but I think it just runs without options. Try it out!&lt;/p&gt;
&lt;h2 id=&#34;disclaimers--seeking-shell-wisdom&#34;&gt;Disclaimers / Seeking Shell Wisdom&lt;/h2&gt;
&lt;p&gt;I ran into some issues with this script that I couldn&amp;rsquo;t totally avoid. Please be aware of them if you try out my script.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Variable expansion&lt;/strong&gt; - I&amp;rsquo;m aware that the variables I use in my various git commands are not double-quoted. (And just in case I didn&amp;rsquo;t notice, &lt;a href=&#34;https://www.shellcheck.net/&#34;  target=&#34;_blank&#34; &gt;ShellCheck&lt;/a&gt; yelled about them in bright colors.) However, adding quotes or modifying the expansion caused the commands to be incorrectly formatted and resulted in failure. They work as they are now, but I&amp;rsquo;m curious to know if there&amp;rsquo;s a way to improve this. I&amp;rsquo;d love to get advice from experienced shell coders.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Limited Testing&lt;/strong&gt; - I work on Mac OS, so I &lt;em&gt;know&lt;/em&gt; this script works on that system - at least on my machine! I have no idea about Windows or Linux. If you try it out, please let me know!&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;the-full-script&#34;&gt;The Full Script&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://gist.github.com/aormsby/fac42fa04f8afa2157109b85684edc0c#file-hugo-deploy-sh&#34;  target=&#34;_blank&#34; &gt;View on Github&lt;/a&gt;&lt;/p&gt;
&lt;script type=&#34;application/javascript&#34; src=&#34;https://gist.github.com/aormsby/fac42fa04f8afa2157109b85684edc0c.js&#34;&gt;&lt;/script&gt;


        
        </description>
    </item>
    
    <item>
      <title>Hugo Themes - Making Modifications while Keeping the Source Up-To-Date</title>
      <link>https://www.adamormsby.com/posts/hugo-themes-making-modifications/</link>
      <pubDate>Tue, 19 May 2020 18:30:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/hugo-themes-making-modifications/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/hugo-themes-making-modifications/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;This is a continuation of a previous post - &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/&#34; &gt;How to Set Up a Hugo Site on Github Pages - with Git Submodules!&lt;/a&gt; I will reference some things we did there, so be sure to check it out if you&amp;rsquo;re confused about something.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;In today&amp;rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. &amp;lsquo;But my theme works fine!&amp;rsquo; you say. &amp;lsquo;Why would I ever need to update it?&amp;rsquo; Well, when you download or clone a Hugo theme from its hosted git repository, you&amp;rsquo;re getting its latest version &lt;em&gt;at that point in time.&lt;/em&gt; So even if the theme&amp;rsquo;s creator pushes updates to the code - with fixes, new features, and outside pull requests - you&amp;rsquo;ll still be stuck using the version you downloaded before. While this is fine in some cases, many of us want the newest updates so we can take advantage of a stronger, improved theme.&lt;/p&gt;
&lt;p&gt;The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. If you followed my previous tutorial on &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/&#34; &gt;adding a theme to your Hugo site as a git submodule&lt;/a&gt;, you already have a functional Hugo site with a (forked) theme included. Starting there, let&amp;rsquo;s see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source.&lt;/p&gt;
&lt;h2 id=&#34;just-the-updates-please&#34;&gt;Just the Updates, Please&lt;/h2&gt;
&lt;p&gt;If we don&amp;rsquo;t intend to customize a theme at all, we can keep our workflow super simple. All we need to do is add the theme repo into our project as a submodule and periodically run a few git commands to check for updates. For the moment, let&amp;rsquo;s pretend we haven&amp;rsquo;t forked the theme repo and see what it would be like to clone the source directly. We&amp;rsquo;ll see an example with our fork in the next section.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s a quick refresher command for adding a submodule to our project.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; git submodule add https://github.com/panr/hugo-theme-hello-friend.git themes/hello-friend
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;You might be thinking you can simply run &lt;code&gt;git clone&lt;/code&gt; instead of adding the theme as a submodule, but our site is already set up as a git repo so that doesn&amp;rsquo;t work here. Git doesn&amp;rsquo;t like having &lt;code&gt;.git&lt;/code&gt; files in a subdirectory without a &lt;code&gt;.gitmodules&lt;/code&gt; component in the root. For more on that, see &lt;a href=&#34;https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/&#34;  target=&#34;_blank&#34; &gt;this ‘simple dev’ post.&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In the example above, we added our submodule by pulling the theme&amp;rsquo;s source repo directly into our project. With the &lt;code&gt;git remote&lt;/code&gt; command, we can easily verify that it&amp;rsquo;s connected to the correct remote repo.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; cd themes/hello-friend
&amp;gt; git remote --verbose
origin  https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
  
  &lt;img src=&#34;img/simple-update.jpg&#34;  alt=&#34;one-way update directly from theme source&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;And there it is! With this setup, all we need to do is pull updates straight from the source. From the theme&amp;rsquo;s directory, we run the following terminal commands.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# optional: fetch any updates to view changes before merging&lt;/span&gt;
&amp;gt; git fetch origin
&amp;gt; git status
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;status output here&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# pull updates and merge them automatically&lt;/span&gt;
&amp;gt; git pull
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since we&amp;rsquo;re not making any theme changes in this workflow, we shouldn&amp;rsquo;t expect any merging issues during the &lt;code&gt;git pull&lt;/code&gt;. We don&amp;rsquo;t really &lt;em&gt;need&lt;/em&gt; to fetch or check the status of the repo, but it&amp;rsquo;s always nice to see incoming changes before we bring them in.&lt;/p&gt;
&lt;p&gt;And that&amp;rsquo;s it! Getting updates every so often is no problem if we don&amp;rsquo;t intend to make our own customizations to a theme. But hey - customization is where the fun &lt;em&gt;really&lt;/em&gt; begins.&lt;/p&gt;
&lt;h2 id=&#34;updates-and-theme-customization---a-parallel-branch-workflow&#34;&gt;Updates and Theme Customization - A Parallel Branch Workflow&lt;/h2&gt;
&lt;p&gt;Here&amp;rsquo;s the scenario - We want to add a Hugo theme, make custom changes, and still to get updates from the theme&amp;rsquo;s original source. The method used above doesn&amp;rsquo;t work here for a few reasons:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;We can&amp;rsquo;t push our custom changes to the theme&amp;rsquo;s source repo&lt;/strong&gt;. We simply don&amp;rsquo;t have those permissions on the repo. Our local changes will not be safely stored anywhere, and any pulled updates may not be easily mergeable.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Incoming updates may require merges.&lt;/strong&gt; If we&amp;rsquo;ve modified some of the theme files that are being updated in the source, then a simple &lt;code&gt;git pull&lt;/code&gt; will not be enough to deal with the resulting conflicts.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Thankfully, a more advanced git workflow would help deal with these issues. Remember &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#add-a-theme-to-our-site&#34; &gt;how we set up a forked theme repo&lt;/a&gt; in the last post? Now we get to take advantage of it. Crucially, the forked repo is &lt;em&gt;ours&lt;/em&gt;, so we have full write access to it and don&amp;rsquo;t need to worry about repo permissions. We can do whatever we want.&lt;/p&gt;
&lt;h3 id=&#34;add-a-remote-repo&#34;&gt;Add a Remote Repo&lt;/h3&gt;
&lt;p&gt;However, our fork doesn&amp;rsquo;t automatically receive source updates either! Here, an additional step is needed to link our fork back to the source repo. Earlier, in the direct update workflow, we used the &lt;code&gt;git remote&lt;/code&gt; command to verify that we had the correct remote repo connections. Running it in our forked theme directory, we see only the fork as our remote.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# my forked repo URLs as an example&lt;/span&gt;
&amp;gt; git remote --verbose
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To get updates from the source repo, we need to add a &lt;em&gt;second&lt;/em&gt; remote repo - yes, git can do this! We simply run this command in our working directory and check our remotes again to verify the connection.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# add a new remote repo connection&lt;/span&gt;
&amp;gt; git remote add upstream https://github.com/panr/hugo-theme-hello-friend.git

&amp;gt; git remote --verbose
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
upstream   https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
upstream   https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ta-da! Our local theme repo is now linked to both our forked repo &lt;em&gt;and&lt;/em&gt; the source repo, which we called &lt;code&gt;upstream&lt;/code&gt;. (This is a conventional label, but any name you choose is fine.) At this point, our setup already supports getting updates from the source, but the process is a little different than before.&lt;/p&gt;
&lt;p&gt;Normally, when we&amp;rsquo;re updating directly from a single remote repo, all we need to do is &lt;code&gt;pull&lt;/code&gt; the data to our local directory so that the local matches the remote. We&amp;rsquo;ll still do that here, but we explicitly pull data from the &lt;code&gt;upstream&lt;/code&gt; repo we added. We&amp;rsquo;ll also have to make an additional &lt;code&gt;push&lt;/code&gt; to our forked repo - &lt;code&gt;origin&lt;/code&gt; - to update it with the new code. Here&amp;rsquo;s how that works compared to the previous example.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/forked-update.jpg&#34;  alt=&#34;comparison of update methods&#34;   class=&#34;center&#34; /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;Left: simple update / Right: updating with a fork&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Assuming you&amp;rsquo;re still on your &lt;code&gt;master&lt;/code&gt; branch, here are the modified commands needed to pull and push the updates.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# optional: fetch any updates to view changes before merging&lt;/span&gt;
&amp;gt; git fetch upstream master
&amp;gt; git status
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;status output here&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# pull updates and merge them automatically&lt;/span&gt;
&amp;gt; git pull upstream master

&lt;span style=&#34;color:#75715e&#34;&gt;# push source updates to forked repo&lt;/span&gt;
&amp;gt; git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With no local changes to our theme, the commands run smoothly with no errors - and we want to keep it that way! Simple is good, and an update process that doesn&amp;rsquo;t result in merge conflicts is always nice. But how do we manage to avoid conflicts if we want to customize the theme? Simple - don&amp;rsquo;t do your work on &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;branching-customizing-and-merging-updates&#34;&gt;Branching, Customizing, and Merging Updates&lt;/h3&gt;
&lt;p&gt;Although you technically &lt;em&gt;could&lt;/em&gt; make theme customizations on the &lt;code&gt;master&lt;/code&gt; branch, this increases the chances of having to resolve merge conflicts every time you try to pull an update. It&amp;rsquo;s fine if that&amp;rsquo;s how you want to work, but I &lt;em&gt;highly&lt;/em&gt; recommend avoiding it. In my experience, it&amp;rsquo;s often best to keep &lt;code&gt;master&lt;/code&gt; sparkly clean and do your dirty work on a different branch.&lt;/p&gt;
&lt;p&gt;For example, I do my theme in a separate branch that is always kept in parallel with &lt;code&gt;master&lt;/code&gt;. I&amp;rsquo;ve named it &lt;code&gt;working&lt;/code&gt;, as it&amp;rsquo;s the branch that I &lt;em&gt;work&lt;/em&gt; in. (Not exactly clever, I know.) Since it has all of my theme customizations, it&amp;rsquo;s also the branch that I use when I build my site. Every so often, I switch back over to &lt;code&gt;master&lt;/code&gt;, go through our update process, and then explicitly merge any new theme updates from &lt;code&gt;master&lt;/code&gt; into &lt;code&gt;working&lt;/code&gt; so that I have all the latest features in my working  branch. Visually, it&amp;rsquo;s kind of like this.&lt;/p&gt;

  
  &lt;img src=&#34;img/parallel-branches.jpg&#34;  alt=&#34;parallel branch system with updates merged from master&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;This is just one possible theme customization workflow, but we can benefit from a setup like this. For example &amp;ndash;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Our workspace is separate from our update environment.&lt;/strong&gt; Getting theme updates will always be a painless process, and we have more control over merging when the time comes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit histories are clearer.&lt;/strong&gt; Histories are much easier to read if source updates and custom work don&amp;rsquo;t get tangled up, and this can be super helpful when performing more advanced git actions on a branch.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;All the data is on our forked repo.&lt;/strong&gt; The customizations &lt;em&gt;and&lt;/em&gt; the pulled updates all live on our fork, which means we have full control of the data.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;We can test on &lt;code&gt;master&lt;/code&gt; before merging.&lt;/strong&gt; If we&amp;rsquo;re unsure of how a new feature will display on our site, we can run a build using the &lt;code&gt;master&lt;/code&gt; code. It&amp;rsquo;s a nice clean test bed before performing a merge.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The drawbacks are much the same as I mentioned in the &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#some-drawbacks&#34; &gt;last post&lt;/a&gt; with the addition that now we&amp;rsquo;d have at least one more working branch to manage. However, I&amp;rsquo;ve found this parallel branch workflow quite nice after getting more familiar with it. Perhaps you will, too.&lt;/p&gt;
&lt;p&gt;Here are the commands we can use to get our &lt;code&gt;working&lt;/code&gt; branch up and running. (You can choose a better name if you&amp;rsquo;d like.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# create a new branch and switch to it&lt;/span&gt;
&amp;gt; git branch working
&amp;gt; git checkout working
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We make some changes, commit our work, and push to our forked repo (&lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#test-site-and-deploy&#34; &gt;see these commands for help&lt;/a&gt;). Time passes&amp;hellip; and we want to get some updates on &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# switch to master branch&lt;/span&gt;
&amp;gt; git checkout master

&lt;span style=&#34;color:#75715e&#34;&gt;# quick update&lt;/span&gt;
&amp;gt; git pull upstream master
&amp;gt; git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Finally, we switch back to &lt;code&gt;working&lt;/code&gt; and merge in the updates from &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# switch to working&lt;/span&gt;
&amp;gt; git checkout working

&lt;span style=&#34;color:#75715e&#34;&gt;# merge master into current branch (working)&lt;/span&gt;
&amp;gt; git merge master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I won&amp;rsquo;t get into resolving a merge here, so let&amp;rsquo;s cross our fingers and hope there are no conflicts to deal with.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/git-merge-conflict.jpg&#34;  alt=&#34;git merge conflict comic&#34;   class=&#34;center&#34; /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;something to look forward to :)&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;So yes - customizing your theme with this kind of workflow does take a bit of setup, and there are a few extra steps and things to keep track of to manage our code well. However, using git submodules and a parallel branch workflow do give us more leverage over our codebase, and I think that makes the extra work worthwhile. I&amp;rsquo;ve been using this workflow with my site for some time, and I don&amp;rsquo;t think I&amp;rsquo;d change anything about it.&lt;/p&gt;
&lt;p&gt;That said, there are a number of other methods that people use for managing their themes, and it&amp;rsquo;s worth exploring them to see what fits your needs best. I recently read a post about &lt;a href=&#34;https://www.hugofordevelopers.com/articles/master-hugo-modules-managing-themes-as-modules/&#34;  target=&#34;_blank&#34; &gt;managing your themes as Hugo modules by Nick Gracilla&lt;/a&gt; that I found quite interesting, and I think it&amp;rsquo;s worth checking out if you&amp;rsquo;re looking for an alternate way of doing things.&lt;/p&gt;
&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.adamormsby.com/posts/hugo-shell-deploy-script/&#34; &gt;&lt;!-- raw HTML omitted --&gt;Better Deploy&lt;!-- raw HTML omitted --&gt;&lt;/a&gt; - I&amp;rsquo;m still working on a better site deploy script! It&amp;rsquo;s looking good so far, but it&amp;rsquo;s not quite ready.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Automatic Builds&lt;/strong&gt; - This would still be great to have, so if I get around to it I&amp;rsquo;ll be sure to share my work.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Until next time! ~&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>Covid-19: Visa Policies and The Plight of Foreign Nationals</title>
      <link>https://www.adamormsby.com/posts/covid-19-visa-policies-and-foreign-nationals/</link>
      <pubDate>Sat, 25 Apr 2020 10:47:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/covid-19-visa-policies-and-foreign-nationals/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/covid-19-visa-policies-and-foreign-nationals/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;Cover photo: anti-war sign protesting U.S. entry into WWII&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Hi, everyone. Are you doing okay? I know life with Covid-19 isn&amp;rsquo;t easy, and I hope you&amp;rsquo;re all staying safe and keeping healthy in these challenging times.&lt;/p&gt;
&lt;p&gt;I want to take a moment to talk with you about a problem that international communities are now facing everywhere. As nations isolate themselves from the rest of the world, foreign nationals - workers, students, and families living as non-citizens in a foreign country - are finding it increasingly difficult to stay in the countries they&amp;rsquo;ve built their lives in. Travel restrictions and immigration policy changes are hitting non-citizens the hardest, and without the right passport in their hands, many people have no choice but to travel back to their native countries under rather difficult circumstances.&lt;/p&gt;
&lt;h2 id=&#34;my-story&#34;&gt;My Story&lt;/h2&gt;
&lt;p&gt;I fell victim to visa policies myself when I was forced to leave my home in Viet Nam and return to the USA against my wishes. It didn&amp;rsquo;t matter that I had lived in Ha Noi for over two years educating children in both English and computer literacy. It didn&amp;rsquo;t matter that I had found a home, made friends, or fallen in love with the woman of my dreams. What mattered was that I&amp;rsquo;m a foreigner, and the Viet Nam government decided it didn&amp;rsquo;t want me around.&lt;/p&gt;
&lt;p&gt;Much like the USA, Viet Nam implemented a series of travel restrictions on foreigners that eventually made it impossible to enter the country without a Viet Nam passport. Though I was already living in the country before these restrictions were introduced, I had recently changed my visa status. My visa would remain active through 2020, but one of the requirements for keeping it valid was that I would have to exit and re-enter the country every ninety days - dubbed a &amp;lsquo;visa run&amp;rsquo; by local expats. No, it doesn&amp;rsquo;t make any sense, but that&amp;rsquo;s the policy. That little technicality ended up being my downfall.&lt;/p&gt;
&lt;p&gt;With the Viet Nam government denying entry to all foreigners upon arrival, I couldn&amp;rsquo;t leave the country and expect to get back in. I went to the Immigration Bureau and tried to make the case for waiving the requirement due to the current health crisis, but nothing I said would convince them to allow me to stay. Even the US Embassy was spectacularly useless during all this since an embassy whose personnel is recalled to their home country can&amp;rsquo;t be expected to help its citizens in a time of need. In the end, I had no choice but to leave Viet Nam and return to the USA.&lt;/p&gt;
&lt;p&gt;In a matter of days, my entire life was flipped on its head, and it was all because of a single visa policy left in place in a time of large-scale travel restrictions. I was forced to leave my home, my life, and my love behind in Ha Noi, and I have no idea when I&amp;rsquo;ll be able to return.&lt;/p&gt;
&lt;h2 id=&#34;consider-our-foreign-nationals&#34;&gt;Consider our Foreign Nationals&lt;/h2&gt;
&lt;p&gt;Of course, I&amp;rsquo;m not the only foreign national impacted by these worldwide travel restrictions. Others like me have also been forced to leave the homes they made abroad. The difference is that I&amp;rsquo;m extremely lucky. I have family in America that can take me in and support my return financially. I have a landlady in Ha Noi who was willing to halve my rent while I&amp;rsquo;m away so that I still have a home when I return.&lt;/p&gt;
&lt;p&gt;But what if I wasn&amp;rsquo;t that lucky? What if I had gone broke paying for the flights I had to take back to my native country? What if I had been stranded somewhere because of flight cancellations? What if I didn&amp;rsquo;t have the means to survive once I got back?&lt;/p&gt;
&lt;p&gt;Many of the millions - perhaps billions - of other foreign nationals living around the world are not as lucky as I am, and the citizen-first policies enacted by our governments are putting many of them at risk of being in the same position I was in, or worse. International education systems have failed to take care of their students, cross-border humanitarian efforts have come to a standstill, and people are being kicked out of their homes and thrown into quarantine based solely on their nationalities - not on medical science. (You can read about these issues and more at the links below, &lt;em&gt;&lt;strong&gt;and if these are things that upset you, please speak out about them.&lt;/strong&gt;&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Listen, I realize that now is a time that nations must make difficult decisions about how to keep their people safe, to rally behind the call of &amp;lsquo;protecting our own&amp;rsquo;, but we no longer live in a world where &amp;lsquo;our own&amp;rsquo; can be limited to people who look like us or who carry the same passport. We live in an international world, a world where communities mix and grow and thrive - often in spite of our cultural differences - and we need to recognize that the foreign workers, students, and families that make up those communities are as much a part of our countries as we are. In this pandemic, we all deserve the same protection, and right now these people aren&amp;rsquo;t getting it.&lt;/p&gt;
&lt;p&gt;If we fail to consider the plight of our foreign nationals, they&amp;rsquo;ll leave - whether they choose to or not. I promise we&amp;rsquo;ll miss them when they&amp;rsquo;re gone.&lt;/p&gt;
&lt;h2 id=&#34;further-reading&#34;&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://qz.com/1822530/us-universities-coronavirus-plans-for-international-students/&#34;  target=&#34;_blank&#34; &gt;How international students are supposed to deal with coronavirus, according to their US universities&lt;/a&gt; (Quartz)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.marketplace.org/2020/03/31/covid-19-college-campus-closures-international-students/&#34;  target=&#34;_blank&#34; &gt;For international students staying in the U.S., COVID-19 closures led to a scramble for housing&lt;/a&gt; (Marketplace, audio)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://e.vnexpress.net/news/news/foreigners-caught-in-vietnam-visa-limbo-4075058.html&#34;  target=&#34;_blank&#34; &gt;Foreigners caught in Vietnam visa limbo&lt;/a&gt; (VNExpress International)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.independent.co.uk/news/world/asia/coronavirus-china-mcdonalds-black-people-home-evictions-a9465776.html&#34;  target=&#34;_blank&#34; &gt;Black people in China ‘banned from McDonalds and evicted from their homes’ over coronavirus fears&lt;/a&gt; (Independent)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.theguardian.com/global-development/2020/mar/25/coronavirus-threatens-to-turn-aid-crises-into-humanitarian-catastrophes&#34;  target=&#34;_blank&#34; &gt;Coronavirus threatens to turn aid crises into ‘humanitarian catastrophes’&lt;/a&gt; (The Guardian)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bbc.com/news/business-52388835&#34;  target=&#34;_blank&#34; &gt;Coronavirus: ‘If I can’t work, I can’t feed my family’&lt;/a&gt; (BBC)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.forbes.com/sites/freylindsay/2020/04/22/world-bank-global-remittances-set-to-decline-sharply-as-a-result-of-coronavirus/#4322331d60ab&#34;  target=&#34;_blank&#34; &gt;World Bank: Global Remittances Set To Decline Sharply As A Result Of Coronavirus&lt;/a&gt; (Forbes)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blogs.worldbank.org/peoplemove/covid-19-through-migration-lens-policy-responses-should-be-inclusive-migrants&#34;  target=&#34;_blank&#34; &gt;COVID-19 through a migration lens: policy responses should be inclusive of migrants&lt;/a&gt; (World Bank)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;share-your-story&#34;&gt;Share Your Story&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;If your life abroad has been impacted by visa restrictions related to Covid-19, please share your story with me! I want to help you get your story out to others so that people can see more of what&amp;rsquo;s going on around them. Of course, I&amp;rsquo;ll only share your story with your permission.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You can share with everyone right away by commenting on this post, or you can message me directly by clicking this email icon.&lt;/strong&gt;&lt;/p&gt;

  &lt;span class=&#34;icon-link&#34;&gt;
    &lt;a href=&#34;#mailgo&#34; data-address=&#34;ormsbyadam&#34; data-domain=&#34;gmail.com&#34; &gt;
      &lt;img src=&#34;https://www.adamormsby.com/icon/mailgo.png&#34; alt=&#34;mailgo&#34;  height=&#34;100&#34;  /&gt;
    &lt;/a&gt;
    
    &lt;script src=&#34;https://cdn.jsdelivr.net/npm/mailgo@0.9.17/dist/mailgo.min.js&#34;&gt;&lt;/script&gt;
  &lt;/span&gt;

&lt;p&gt;&lt;strong&gt;Good luck out there, friends. Stay safe.&lt;/strong&gt;&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>How to Set Up a Hugo Site on Github Pages - with Git Submodules!</title>
      <link>https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/</link>
      <pubDate>Tue, 17 Mar 2020 22:30:00 +0700</pubDate>
      
      <guid>https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg&#34;/&gt;
          
        
        
        &lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;I made this blog site using the &lt;a href=&#34;https://www.gohugo.io&#34;  target=&#34;_blank&#34; &gt;Hugo static site generator&lt;/a&gt; because I wanted to build a simple site where I could have full control over every detail - &lt;em&gt;not&lt;/em&gt; like using Wordpress, Squarespace, or Wix. With Hugo, I can add and remove templates and functionality at will, and it feels &lt;em&gt;great&lt;/em&gt; to have that kind of power. You probably ended up here because you want that, too.&lt;/p&gt;
&lt;p&gt;In this post, we&amp;rsquo;ll take a look at how to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a new Hugo site&lt;/li&gt;
&lt;li&gt;Host it on Github Pages&lt;/li&gt;
&lt;li&gt;Use git submodules to separate our site&amp;rsquo;s key directories into manageable chunks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We&amp;rsquo;ll also go over the benefits (and drawbacks) of using submodules in our setup, and by the end of this post, we&amp;rsquo;ll have a new Hugo project hosted on Github Pages and ready for action.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Please note:&lt;br&gt;
I&amp;rsquo;ll talk a little about branching inside our submodules later on. To keep things simple, you can assume that I&amp;rsquo;ve stayed on the main &amp;lsquo;master&amp;rsquo; branch of each git module. Also, I work on a Mac so all of my commands are Mac-specific.&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;why-git-submodules&#34;&gt;Why Git Submodules?&lt;/h3&gt;
&lt;p&gt;Every git project is stored as a versioned code repository (a repo). Git submodules allow us to reference other repos within a project, which effectively puts a project inside a project (or a repo inside a repo). The submodule&amp;rsquo;s code can then be used by the main project, but the submodule &lt;em&gt;&lt;strong&gt;maintains its own commit and branch history,&lt;/strong&gt;&lt;/em&gt; which separates the projects and can be a pretty powerful thing.&lt;/p&gt;

  
  &lt;img src=&#34;img/explain-submodules.jpg&#34;  alt=&#34;diagram showing how code is included using submodules with a git project&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;In a Hugo project, most of what we see is source data - the raw files we manipulate before building our site. After Hugo builds our site, our &amp;lsquo;ready-to-publish&amp;rsquo; data gets output to the &lt;code&gt;public&lt;/code&gt; directory of our project. By turning the &lt;code&gt;public&lt;/code&gt; folder into a submodule of the main project, we can treat it as a separate entity with a separate history. Let&amp;rsquo;s see what that process looks like.&lt;/p&gt;
&lt;h2 id=&#34;install-hugo-and-create-a-project&#34;&gt;Install Hugo and Create a Project&lt;/h2&gt;
&lt;p&gt;First things first, we need to install Hugo! We&amp;rsquo;ll run through the key Mac commands quickly here, but if you need any more help you can always check &lt;a href=&#34;https://gohugo.io/getting-started/quick-start/&#34;  target=&#34;_blank&#34; &gt;Hugo’s ‘Quick Start’ guide&lt;/a&gt; for more details or information about installing on Windows and Linux.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Open a terminal. Alternatively, you can VSCode&amp;#39;s terminal - it&amp;#39;s great!&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 2. If you don&amp;#39;t have brew installed --&lt;/span&gt;
&amp;gt; /bin/bash -c &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 3. Install Hugo&lt;/span&gt;
&amp;gt; brew install hugo

&lt;span style=&#34;color:#75715e&#34;&gt;# 4. Move to the directory where you want to create the project.&lt;/span&gt;
&amp;gt; cd &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;MY/DIRECTORY/NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Create a new Hugo project. I&amp;#39;ll use &amp;#34;hugo-gh&amp;#34; as my sample name.&lt;/span&gt;
&amp;gt; hugo new site &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;SITE_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So far, we&amp;rsquo;ve installed Hugo on our machine and created a new template project named &lt;strong&gt;hugo-gh&lt;/strong&gt;. If you&amp;rsquo;re following Hugo&amp;rsquo;s Quick Start guide, you may be tempted to move straight on to adding a theme, running the local server, and seeing your site. We&amp;rsquo;ll &lt;em&gt;absolutely&lt;/em&gt; get to all that, but since our goal here is to use git submodules to manage the different parts of our project, it would benefit us to go through some setup steps on Github first.&lt;/p&gt;
&lt;h2 id=&#34;push-project-files-to-github&#34;&gt;Push Project Files to Github&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s get our project versioned with Github right away! We&amp;rsquo;ll need to create two repositories on Github - one to host our source code and one to host our live site data.&lt;/p&gt;
&lt;h3 id=&#34;source-code-repository&#34;&gt;Source Code Repository&lt;/h3&gt;
&lt;p&gt;Sign in to Github and create a new repository. I&amp;rsquo;ll call mine &lt;strong&gt;hugo-gh-pages-source&lt;/strong&gt;.&lt;/p&gt;

  
  &lt;img src=&#34;img/github-new-repo.jpg&#34;  alt=&#34;create a new github repo&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/github-repo-name.jpg&#34;  alt=&#34;name the new github repo&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;&lt;em&gt;&lt;strong&gt;Hot tip:&lt;/strong&gt; If we create a repo &lt;em&gt;without&lt;/em&gt; a README file it&amp;rsquo;s easier to avoid accidental history conflicts when pushing a local project to a fresh repo. We can always add one later.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;When our new empty repo is ready, go back to the terminal window and input these commands to initialize our local repo and push to Github.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(If you already have a &lt;code&gt;public&lt;/code&gt; folder in your project, delete it before doing any of this to save some headaches.)&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Enter the project folder.&lt;/span&gt;
&amp;gt; cd hugo-gh

&lt;span style=&#34;color:#75715e&#34;&gt;# 2. Initialize git locally.&lt;/span&gt;
&amp;gt; git init

&lt;span style=&#34;color:#75715e&#34;&gt;# 3. Set our new Github repo as the remote for our local project&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# (my sample URL - https://github.com/aormsby/hugo-gh-pages-source.git)&lt;/span&gt;
&amp;gt; git remote add origin https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;SOURCE_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git

&lt;span style=&#34;color:#75715e&#34;&gt;# 4. Stage all files for commit.&lt;/span&gt;
&amp;gt; git add .

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Commit files.&lt;/span&gt;
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;committing our hugo template&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 6. Push to the remote master&lt;/span&gt;
&amp;gt; git push -u origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And there you have it! Our project source is now pushed to our Github repo.&lt;/p&gt;

  
  &lt;img src=&#34;img/source-pushed.jpg&#34;  alt=&#34;source project pushed to Github&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;You could &lt;em&gt;absolutely&lt;/em&gt; set up your source repo to be the host of your site using Github Pages, and you may have good reasons for doing so. That would require a different setup that you can find steps for on Hugo&amp;rsquo;s &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#deployment-of-project-pages-from-docs-folder-on-master-branch&#34;  target=&#34;_blank&#34; &gt;Host on Github&lt;/a&gt; docs page. However, if we do this we ignore our chance to separate &lt;code&gt;public&lt;/code&gt; into a separately versioned repo. To accomplish this, we have to create a second repository.&lt;/p&gt;
&lt;h3 id=&#34;live-site-data-repository&#34;&gt;Live Site Data Repository&lt;/h3&gt;
&lt;p&gt;Let&amp;rsquo;s add our first submodule to the project! Remember, our goal is to separate the commit histories of our project source and our site build output to the &lt;code&gt;public&lt;/code&gt; directory. First, we create another repo on Github for our public site data. I&amp;rsquo;ll call mine &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt;. In our local terminal, run the following command from the project root.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# my sample URL - https://github.com/aormsby/hugo-gh-pages-public.git&lt;/span&gt;
&amp;gt; git submodule add https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;PUBLIC_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git public
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Sweet! We now have a submodule initialized and loaded into our project under the &lt;code&gt;public&lt;/code&gt; directory, and it&amp;rsquo;s already connected to its remote origin. Let&amp;rsquo;s do a quick site build just to put something into the remote Github repo. The commands needed are a little tedious, but it&amp;rsquo;s good to know the process.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Perform a site build and output to &amp;#39;public/&amp;#39; directory.&lt;/span&gt;
&amp;gt; hugo

&lt;span style=&#34;color:#75715e&#34;&gt;# 2-4.&lt;/span&gt;
&amp;gt; cd public
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;first build&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Return to the project root.&lt;/span&gt;
&amp;gt; cd ../

&lt;span style=&#34;color:#75715e&#34;&gt;# 6-7.&lt;/span&gt;
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;first build - update submodule reference&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 8. Push the source project *and* the public submodule to Github together.&lt;/span&gt;
&amp;gt; git push -u origin master --recurse-submodules&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;on-demand
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s &lt;em&gt;&lt;strong&gt;super important&lt;/strong&gt;&lt;/em&gt; when we build to make sure that we commit and push &lt;em&gt;both&lt;/em&gt; the public submodule and the main project. For each submodule commit, the project updates its reference to the submodule to maintain its connection to the correct commit. The &lt;code&gt;--recurse-submodules=on-demand&lt;/code&gt; command pushes all of the project modules at the same time.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/submodule-reference-terminal.jpg&#34;  alt=&#34;submodule reference in terminal using git status command&#34;   class=&#34;center&#34; /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;submodule reference updated vied in the terminal after &lt;code&gt;git status&lt;/code&gt; command&lt;/figcaption&gt;
    
  &lt;/figure&gt;



  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/submodule-reference-github.jpg&#34;  alt=&#34;submodule reference on github after pushing&#34;   class=&#34;center&#34; /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;submodule reference on github after pushing&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;h2 id=&#34;enable-github-pages&#34;&gt;Enable Github Pages&lt;/h2&gt;
&lt;p&gt;On Github, our &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt; repo now has some data. Go to the repo settings and find the Github Pages section. Set the &lt;strong&gt;Source&lt;/strong&gt; of our site to &lt;strong&gt;master branch&lt;/strong&gt;.&lt;/p&gt;

  
  &lt;img src=&#34;img/github-pages-settings.jpg&#34;  alt=&#34;menu to update Github Pages settings to use master branch&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;With these settings, Github Pages will be able to serve our site from the repo starting with the &lt;strong&gt;index.html&lt;/strong&gt; file in its root directory. The live URL for the site is built from your user name and the project name. Here&amp;rsquo;s my sample URL - &lt;a href=&#34;https://aormsby.github.io/hugo-gh-pages-public&#34;  target=&#34;_blank&#34; &gt;&lt;!-- raw HTML omitted --&gt;&lt;a href=&#34;https://aormsby.github.io/hugo-gh-pages-public&#34;&gt;https://aormsby.github.io/hugo-gh-pages-public&lt;/a&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;. At this point, our site won&amp;rsquo;t display anything except an error message since Hugo requires some page templates or a full theme to generate the pages. That&amp;rsquo;s fine. We just wanted to add some stuff to Github so we could access the repo&amp;rsquo;s Github Pages settings as we just did.&lt;/p&gt;
&lt;h2 id=&#34;benefits-of-making-a-submodule-in-public&#34;&gt;Benefits of Making a Submodule in &amp;lsquo;Public&amp;rsquo;&lt;/h2&gt;
&lt;p&gt;To recap, here&amp;rsquo;s our project setup so far.&lt;/p&gt;

  
  &lt;img src=&#34;img/submodules-diagram-with-public.jpg&#34;  alt=&#34;project submodule digram with public folder&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Let&amp;rsquo;s take a look at some of the benefits of this system.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No accidental deploys&lt;/strong&gt; - With our source code separated from our site data, it&amp;rsquo;s a lot harder to accidentally push unfinished work to our live site. Even if we make builds locally and push our source changes, we won&amp;rsquo;t push to our &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt; repo without explicitly running commands to make that happen. &lt;em&gt;*sigh of relief*&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Separate rollbacks&lt;/strong&gt; - If something goes wrong, the main project and public project can be separately rolled back to earlier commits. &lt;em&gt;(Just remember to commit the modified reference updates to the main module!)&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Branch work is easier&lt;/strong&gt; - Changing branches in our source project will not change branches in our subproject (and vice versa). This is another nice safety buffer, and it gives us more options for branching in either module.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ready for site staging&lt;/strong&gt; - We can easily create development branches in the &lt;strong&gt;public&lt;/strong&gt; submodule that could be served as development subdomains of our site and used for testing new features.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;some-drawbacks&#34;&gt;Some Drawbacks&lt;/h3&gt;
&lt;p&gt;Of course, it&amp;rsquo;s always wise to assess the risks of any setup, and there are many opinions on the &amp;lsquo;perfect system&amp;rsquo; in the dev world - &lt;strong&gt;tell me about yours in the comments!&lt;/strong&gt; To shine some light on the potential downsides of our submodule use, here are some of the concerns I&amp;rsquo;ve thought about.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Juggling multiple repos&lt;/strong&gt; - With more submodules comes more administration. It doesn&amp;rsquo;t seem so rough for me, but right now I&amp;rsquo;m working on my own. Running interlinked, asynchronous repositories comes with its own challenges in a team setting, particularly if someone forgets to push updated submodule references to the source.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No site staging with Github Pages&lt;/strong&gt; - While the &lt;strong&gt;public&lt;/strong&gt; submodule can branch and easily store data used in a site staging system, Github Pages does not seem to support subdomains from different project branches. That&amp;rsquo;s more of a Github Pages drawback, but it means we can&amp;rsquo;t take full advantage of our setup just yet. Another hosting platform might offer a solution - I&amp;rsquo;ll be looking into some options in a future post.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;add-a-theme-to-our-site&#34;&gt;Add a Theme to Our Site&lt;/h2&gt;
&lt;p&gt;Wait, we&amp;rsquo;re not finished just yet! Remember how our site doesn&amp;rsquo;t display anything except an error message right now? We need some templates to get things up and running. The easiest way to get some is to add one of the many &lt;a href=&#34;https://themes.gohugo.io/&#34;  target=&#34;_blank&#34; &gt;Hugo themes&lt;/a&gt; to our project. Since I&amp;rsquo;m already using it on this site, I&amp;rsquo;ll use the &lt;a href=&#34;https://themes.gohugo.io/hugo-theme-hello-friend/&#34;  target=&#34;_blank&#34; &gt;Hello Friend theme&lt;/a&gt; in my example.&lt;/p&gt;
&lt;p&gt;Many guides for adding a theme - including Hugo&amp;rsquo;s own docs - just tell you to clone the theme repo or download and copy it into your project&amp;rsquo;s &lt;code&gt;themes&lt;/code&gt; directory. But hey, &lt;em&gt;our&lt;/em&gt; theme today is &lt;em&gt;submodules&lt;/em&gt;, so I propose that we add a theme to our project as a &lt;em&gt;submodule&lt;/em&gt; since doing so would give us some nice dev powers over the theme.&lt;/p&gt;

  
  &lt;img src=&#34;img/submodules-diagram-with-theme.jpg&#34;  alt=&#34;project submodule digram with theme folder&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Look at it this way - directly cloning a theme into our project has two major problems.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;We can&amp;rsquo;t push our commits to the theme&amp;rsquo;s source repo, because we don&amp;rsquo;t have permission.&lt;/strong&gt; This means we can&amp;rsquo;t make changes to the theme and then keep them versioned.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A cloned project in a subdirectory isn&amp;rsquo;t linked with the main project.&lt;/strong&gt; When a submodule is added to a project, the main project adds a reference to it in a file named &lt;code&gt;.gitmodules&lt;/code&gt;. Without that reference, the main project and the theme project aren&amp;rsquo;t connected, which could cause confusion or problems down the line.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Also, Git doesn&amp;rsquo;t allow repos inside repos that aren&amp;rsquo;t submodules.&lt;/strong&gt; See &lt;a href=&#34;https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/&#34;  target=&#34;_blank&#34; &gt;this ‘simple dev’ post&lt;/a&gt; for details.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Let&amp;rsquo;s solve each of those problems in one fell swoop.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make a fork of the &lt;strong&gt;Hello Friend&lt;/strong&gt; theme so we have our own copy of it.&lt;/li&gt;
&lt;/ol&gt;

  
  &lt;img src=&#34;img/fork-theme.jpg&#34;  alt=&#34;fork a theme project on Github&#34;  class=&#34;center&#34;  /&gt;
  


&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Add our forked repo as a submodule in our main project&amp;rsquo;s &lt;code&gt;themes&lt;/code&gt; folder.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Add the theme submodule from the root project folder&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# my sample URL - https://github.com/aormsby/F-hugo-theme-hello-friend.git&lt;/span&gt;
&amp;gt; git submodule add https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;FORKED_THEME_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git themes/hello-friend
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Boom! Now we have our own fork of a cool theme referenced as a submodule of our Hugo project. We can make any changes we want and push them to our own repo. I&amp;rsquo;ll get into more advanced uses of theme submodules in another post, but for now we have the basics in place.&lt;/p&gt;
&lt;p&gt;Things won&amp;rsquo;t be &lt;em&gt;quite&lt;/em&gt; right without tweaking a few final settings, so let&amp;rsquo;s open the &lt;code&gt;config.toml&lt;/code&gt; file in our project root so we can modify a few lines.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Add a line so our site builds using our new theme.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello-friend&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Because we&amp;rsquo;re making a Github &amp;lsquo;project site&amp;rsquo; we want to change the&lt;code&gt;baseURL&lt;/code&gt; to match our project URL.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;baseURL&lt;/span&gt; = [&lt;span style=&#34;color:#a6e22e&#34;&gt;GITHUB_USER_NAME&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;github&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;io&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;PROJECT_NAME&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For example, mine will say &lt;code&gt;aormsby.github.io/hugo-gh-pages-public&lt;/code&gt;. To understand the difference between setting up a project site and a user/organization site, see these &lt;a href=&#34;https://pages.github.com/&#34;  target=&#34;_blank&#34; &gt;Github Pages&lt;/a&gt; and &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#github-user-or-organization-pages&#34;  target=&#34;_blank&#34; &gt;Hugo&lt;/a&gt; docs on the matter.&lt;/p&gt;
&lt;p&gt;There are a lot more theme settings that can be adjusted in your config file, but you can explore those on your own. Let&amp;rsquo;s deploy!&lt;/p&gt;
&lt;h2 id=&#34;test-site-and-deploy&#34;&gt;Test Site and Deploy&lt;/h2&gt;
&lt;p&gt;Running the terminal command &lt;code&gt;hugo server&lt;/code&gt; in our project root spins up a local live preview of our site that can be viewed in a browser at &lt;code&gt;localhost:1313&lt;/code&gt;. Run this now to check if our site is displaying anything (it should!), and then stop the process with &lt;code&gt;Ctrl+C&lt;/code&gt;. Just like we did before, run the commands to build, commit, and push. &lt;em&gt;(Note that we didn&amp;rsquo;t change anything in the theme, so we don&amp;rsquo;t have to push anything in that repo.)&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; hugo
&amp;gt; cd public
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build with theme&amp;#34;&lt;/span&gt;
&amp;gt; cd ../
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build with theme - update submodule reference&amp;#34;&lt;/span&gt;
&amp;gt; git push -u origin master --recurse-submodules&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;on-demand
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After a few minutes, refresh the live site at &lt;code&gt;https://[USER_NAME].github.io/hugo-gh-pages-public&lt;/code&gt; and check out your new site! Congratulations, you&amp;rsquo;ve done it!&lt;/p&gt;
&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Theme Branches and Getting Updates&lt;/strong&gt; - I&amp;rsquo;ve worked out a nice branch-based system for continuing to get updates from the original theme repo while adding and changing things our forked theme repo. It&amp;rsquo;s super useful. &lt;a href=&#34;https://www.adamormsby.com/posts/hugo-themes-making-modifications/&#34; &gt;Next post!&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.adamormsby.com/posts/hugo-shell-deploy-script/&#34; &gt;&lt;!-- raw HTML omitted --&gt;Better Deploy&lt;!-- raw HTML omitted --&gt;&lt;/a&gt; - I&amp;rsquo;m sure you noticed that we had to use &lt;em&gt;a plethora&lt;/em&gt; of terminal commands to add, commit, and push files to the main project and its submodules to maintain proper commit references. I wrote them out in this post for clarity, but this process is definitely something we can automate. Hugo&amp;rsquo;s docs provide a &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#put-it-into-a-script&#34;  target=&#34;_blank&#34; &gt;basic deploy script&lt;/a&gt; to do this, and I&amp;rsquo;m working on a greatly improved version of it that I&amp;rsquo;ll write about when it&amp;rsquo;s ready for action.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Custom domains / CNAME&lt;/strong&gt; - You may want to set up a custom domain on Github Pages. Here&amp;rsquo;s &lt;a href=&#34;https://help.github.com/en/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site&#34;  target=&#34;_blank&#34; &gt;some good documentation&lt;/a&gt; on how to do that.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks for reading! ~&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>The Road to Viñales - A Tale of Cycling in Cuba - Part 3</title>
      <link>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/</link>
      <pubDate>Sat, 02 Sep 2017 00:00:00 +0000</pubDate>
      
      <guid>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;&lt;strong&gt;Author&amp;rsquo;s Note:&lt;/strong&gt; This story was written on a blog that I began along with my travels a few years ago. The trip greatly fueled my desire to travel which eventually led to living as an expat. For both sentimental and archival purposes, I decided to include this story as the first set of posts on my new site. I hope you enjoy it.&lt;/em&gt; 🙂&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-1/&#34; &gt;Part 1&lt;/a&gt; | &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/&#34; &gt;Part 2&lt;/a&gt; | &lt;strong&gt;Part 3&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;the-mountain-of-madness---crossing-thresholds&#34;&gt;The Mountain of Madness - Crossing Thresholds&lt;/h2&gt;
&lt;p&gt;At first I didn’t realize it was a mountain. All I knew was that I had ridden out past the edge of a small town to a place where the road suddenly changed. It curved back and forth, meandering upward through forested hills, becoming steeper and more narrow as I rode on. Time passed, and the shoulders of the road disappeared. I was forced to move into the auto lane, pressing tightly against the metal barriers along its hazardous edge.&lt;/p&gt;
&lt;p&gt;Unlike in Havana or on the autopista, the drivers here did not take much care to avoid me, as if the possibility of a collision wasn’t even a passing concern. When two cars met at my location, neither would pause to let the other pass and then drive safely around me. Even lone passing vehicles would drive dangerously close without slowing down, the worst offenders being the massive TransTur buses that bore down on me from the rear and often compelled me to pause and regain my composure after their passing.&lt;/p&gt;
&lt;p&gt;It wasn&amp;rsquo;t long before I ceased riding and had to push my bike up the road. The last day and a half of motion had left me exhausted, and my legs were losing this uphill battle. I wasn’t sure how high I had climbed by then or when I would be headed back down into the valley. My view out from the hillside was obscured by tall brush, and the path forward always disappeared mysteriously around the next bend. I continued to believe that I would find salvation around every tight-packed turn, but I was always disappointed. After more than an hour I was still going up.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1474_fotor.jpg&#34;  alt=&#34;large dead tree standing by a mountain road&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;The afternoon heat grew more intense as the naked sun endeavored to burn away any remaining shade along the road. A quiet enveloped me, and all I could hear were the sounds of my own desperate hike - heavy breathing, the light shuffle of clothing with every step forward, the smack of shoe rubber on road, and the continuous click of my bike&amp;rsquo;s rear wheel spinning against its motionless gears. When I stopped to rest, that quiet became silence.&lt;/p&gt;
&lt;p&gt;Sitting beside the road, I closed my eyes and listened to the nothing around me. The stretch of grass I had found was just wide enough to sit facing the pavement with my legs crossed and to lay my bike beside me. Perhaps on any other day this would have been a peaceful place to kick back and contemplate life’s many joys, but now all I could think about was the fact that I was clearly climbing a mountain where I had not expected there to be one.&lt;/p&gt;
&lt;p&gt;Doubt quickly followed this admission. Did I have enough strength left to cross this mountain? Should I have hitched a ride in the last town? Why am I here on my own? Should I have even come on this trip? It had smacked of hubris to believe that I could wake up one day and suddenly ride 130 miles alone across unknown territory, particularly since my longest single ride before this had been a mere 12 miles over flat land! I had done passably well on the highway, but I certainly hadn’t been prepared to ride over a mountain. I hadn’t been prepared for any part of this journey, and if I didn’t make it to Viñales before nightfall I would be in big trouble.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1478.jpg&#34;  alt=&#34;Adam lying on the side of road exhausted and drinking water from his pack&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;I sat wasting away in the sun, barely absorbing the rusty blue taxi that passed by only a few feet in front of my face. My muscles ached, and yet a numbness enveloped me as if my brain couldn’t decide whether or not to feel the pain coursing through my body. I felt like giving up. I felt like I was done.&lt;/p&gt;
&lt;p&gt;Somewhere inside I knew that was wrong, even stupid to consider, and I did what I could to turn to more practical thoughts. I had already ridden so far from Havana - how could I not finish this ride? How could I even consider stopping now? It occurred to me that dealing with failure here would be much more difficult than the challenge of completing my journey, and I knew that making it to Viñales was more than an imperative. I had to finish. I couldn&amp;rsquo;t consider the alternative.&lt;/p&gt;
&lt;p&gt;Unfortunately, my body wasn’t on the same page as my determination. I was already panting just from standing and picking up my bike, and I realized how much the rest of this hike was going to hurt. Breaking the silence once more, I began walking forward. Step by step, foot by foot, I was making progress again, little bits at a time, stopping often to fall to the side of the road only to have to begin again minutes later. At each rest, the same thoughts burned themselves into my waning consciousness.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;I wasn’t prepared for this.&lt;/em&gt;&lt;br&gt;
&lt;em&gt;I have to keep going anyway.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Forward. And up. And forward. Always forward. The rhythm of my motion took over, and I felt as though I no longer had any real control over my body. It was walking on its own, a mechanical corpse driven by the most basic need to survive, always moving to the next point of rest whether I liked it or not. Whatever pain I felt had been eclipsed by a sheer longing for motion, and it drove me forward under the heat of the Cuban sun. I couldn’t complain - I was tired, but I was moving. At least 2 hours passed with me in that state.&lt;/p&gt;
&lt;p&gt;Then suddenly I reached the crest of the mountain. I stopped to let that soak in.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1483_fotor.jpg&#34;  alt=&#34;view of the downhill road just over the crest of a mountain&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;The discovery of my success was like a shot of adrenaline straight to my heart. I shouted triumphantly into the sky. I took my pack off and danced around in the dirt. I laughed at this mountain road and all of the sweat, pain, and misery I had suffered during my crossing. This new energy faded quickly, but the ecstasy of the moment stayed to lift my spirits for the remainder of the ride. It wasn’t over just yet.&lt;/p&gt;
&lt;p&gt;I still had to make it to Viñales, but now I could enjoy my ride downhill!&lt;/p&gt;
&lt;h2 id=&#34;finding-a-home-in-viñales&#34;&gt;Finding a Home in Viñales&lt;/h2&gt;
&lt;p&gt;Helmet on and packs tight, I mounted my metal steed for the final descent. From the top of the path I could see a long, beautiful stretch of road heading downward in front of me. It was calling to me, inviting me to let go of the last 3 hours of misery and to move once again with great swiftness. I stepped onto my pedals and cycled forward into an empty lane. I quickly picked up speed and smiled as the wind danced happily against my cheeks, my body arched forward in anticipation of my race to the bottom of this mountain.&lt;/p&gt;
&lt;p&gt;The weight of my luggage propelled me forward with a momentum I had not anticipated, and I realized I would have to be careful not to wipe out on sharper turns. A little braking here, a slowdown there… I had everything under control. But still, I was flying! I had such an awesome ride on that beautifully smooth road and a wonderful view all the way down. But nothing was so amazing as seeing the Valle de Viñales for the first time as I rounded a corner near the bottom.&lt;/p&gt;
&lt;p&gt;The mountains I saw were wide and steady, as though they had calmly rolled out of the ground to become the backbone of Western Cuba, and a dense green forest covered everything for miles, from the low valley floor all the way to the tops of those gentle giants. This breathtaking environment was why I had come, and suddenly everything I had gone through to get here… it was all okay.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1487.jpg&#34;  alt=&#34;mountain highway in the sun with telephone wires and mountains in the midground&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;I rode into Viñales in the late afternoon with a triumphant smile spread wide across my face. I had done it! In less than 2 days riding solo across the countryside of Cuba, I had successfully completed a 130 mile bicycle tour from Havana to Viñales! Swelling with pride, I rolled into town and searched for the parade that would greet me upon my victory.&lt;/p&gt;
&lt;p&gt;Of course, there was no parade. No one but me could be excited about what I had accomplished, in part because no one else even knew. To the locals, I was simply another tourist wandering into a town that already had plenty of them, and they went about their lives without thinking twice about my presence. But I knew what I had done, and I cheered quietly to myself on the way into town.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1499_fotor.jpg&#34;  alt=&#34;main street intersection in Viñales&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;That sort of anticlimactic moment can be a disheartening part of traveling alone, but at the same time I knew that what I achieved on my first cross country ride had come solely by my own efforts. I had learned so much about my capabilities in the previous few days, and I’d had a great time on my ride.&lt;/p&gt;
&lt;p&gt;What other people called a ‘crazy’ idea had instead been an amazing adventure, a journey into unexplored physical and mental spaces within myself that would culminate in an experience unlike anything I’d ever known. And if being crazy is having an unquenchable desire to explore new territories, to seek challenges beyond the limits of my known abilities, and to charge relentlessly forward in the face of overwhelming doubt and fear - then yeah. I’m absolutely nuts.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1368.jpg&#34;  alt=&#34;Adam lying in the grass on the side of a country road against his bicycle&#34;  class=&#34;center&#34;  /&gt;
  



        
        </description>
    </item>
    
    <item>
      <title>The Road to Viñales - A Tale of Cycling in Cuba - Part 2</title>
      <link>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/</link>
      <pubDate>Thu, 31 Aug 2017 00:00:00 +0000</pubDate>
      
      <guid>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;&lt;strong&gt;Author&amp;rsquo;s Note:&lt;/strong&gt; This story was written on a blog that I began along with my travels a few years ago. The trip greatly fueled my desire to travel which eventually led to living as an expat. For both sentimental and archival purposes, I decided to include this story as the first set of posts on my new site. I hope you enjoy it.&lt;/em&gt; 🙂&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-1/&#34; &gt;Part 1&lt;/a&gt; | &lt;strong&gt;Part 2&lt;/strong&gt; | &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/&#34; &gt;Part 3&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;spending-the-night-in-a-casa-particular-or-maybe-just-an-apartment&#34;&gt;Spending the Night in a Casa Particular (Or Maybe Just an Apartment)&lt;/h2&gt;
&lt;p&gt;I stopped at around 7 PM that first night to search for a place to stay. With the hammock and sleeping bag stuffed deep inside my pack I had dreamed of camping in the countryside and experiencing a night under the stars in Cuba. Sadly, that dream was crushed by the sheer amount of private farmland that bordered the highway for the entire ride, and I didn&amp;rsquo;t want to get in trouble for camping on private land or government property.&lt;/p&gt;
&lt;p&gt;Eventually, I came to a little town off the autopista called Paso Real de San Diego where I found groups of relaxed locals loitering alongside the highway enjoying the cool evening air. It was here that I decided to look for a ‘casa particular’ (private home) to stay in as was common for tourists to do. All of Cuba knew that housing travelers could make them a whole lot more money than their usual jobs, and it wasn’t difficult to find someone who would help me out.&lt;/p&gt;
&lt;p&gt;Approaching two young men sitting on a bench, I asked if there were any casas particulares available in the town. They exchanged a few quick words with each other, and one of them stood up and ushered me to follow him. As we walked down the side of the road together I got a feel for the place, perhaps the Cuban equivalent of a ‘suburb’ compared to Havana. I wasn’t sure if such a thing as a suburb even existed in this country, but the place felt like a more contained civilization rather than a satellite of a large city. I suppose that made sense since I had ridden about 80 miles away from Havana that day.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1I6JmB0o0hgHtljQ7zCCYOWBDwBk&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;We walked from door to door, and my guide asked about a room for the night at every place we stopped. The matrons that appeared all followed the same routine. ‘Let me go check,’ they would say. They would disappear for a moment and return only to say, ‘Sorry, we’re full tonight.’ How many other travelers were coming through this little town? Or were the locals perhaps hosting other Cubans? I wasn’t sure, but this frequent occurrence was rather disheartening as it kept happening at every home where we stopped.&lt;/p&gt;
&lt;p&gt;My guide paused for a moment, looked up at the sky thoughtfully, and asked, ’Do you want to stay with me in my apartment tonight? Only 30 CUC for the night.’ And then it hit me - I was being hustled. Surely this was a script my guide had followed more than once before, and perhaps the women along the way had been a part of his charade. I had been led through what appeared to be a town full of ‘taken’ rooms in order to make it seem like staying at this man’s apartment was my only option. The high price of 30 CUC was a dead giveaway - only a tourist could afford that.&lt;/p&gt;
&lt;p&gt;Under normal circumstances, it would have been a bad deal, but we both knew I didn’t have any other options. Begrudgingly, I agreed to follow him to his home. I was a little salty about the way I had been treated, especially since I didn’t have as much spending money as people seemed to think. I had thought that getting out of Havana would mean distancing myself from the constant stream of grifters preying on tourists who don&amp;rsquo;t know any better, but here I was far outside the city, and I was still a target for the locals. It was frustrating.&lt;/p&gt;
&lt;p&gt;However, much of my annoyance wore off as I brought my things into the apartment and settled in. They lived on the second floor of a large complex, and as they ushered me in with smiles and hugs I couldn’t help but be swayed by the universal Cuban charm that I had witnessed many times on my trip already. These people were thrilled to have a visitor, and after the initial greetings, questions about my trip, and obligatory group photos were out of the way, their focus turned completely to hospitality. In mere minutes I had gone from cash-laden tourist to honored guest for the evening, and I knew I was as welcome in their home as family.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1414_fotor.jpg&#34;  alt=&#34;3 people inside a home in Cuba&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;I was hungry, tired, and absolutely disgusting from my day in the sun. The mother of the house practically forced me to take her bedroom for the night, and while I unloaded my bags she prepared a bath for me - a bucket of boiled water and a bar of soap waiting for me in a half bathroom whose door always remained halfway open. I chuckled to myself at the spartan nature of things. This was definitely the adventure I had asked for.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1421.jpg&#34;  alt=&#34;bedroom with travel bags and dirty clothes everywhere&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1423_fotor.jpg&#34;  alt=&#34;dirty pants on the bed&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;After washing the grime from my body I sat down to a homemade dinner of various small dishes spread around the kitchen table. There was a surprising amount, and I was worried I might be eating all the food in their fridge. But as with everything else, I accepted that it was being offered to me as their guest, and I was pretty sure they could recoup the lost food with only a fraction of the sum I had paid them for the night. They would be okay.&lt;/p&gt;
&lt;p&gt;Filled to the brim with wonderful Cuban food, I headed straight to bed. I never quite know how tired I am until I have a full stomach, and after eating I quickly found out how much energy I had spent on the ride that day. My eyelids were heavy with sleep, and it came upon me so fast that I barely remember spending any time in the bedroom that evening. Perhaps it was for the better. I still had another day of riding before I would make it to Viñales, and it was only going to get harder as I approached my goal.&lt;/p&gt;
&lt;h2 id=&#34;day-2---a-long-morning-on-the-autopista&#34;&gt;Day 2 - A Long Morning on the Autopista&lt;/h2&gt;
&lt;p&gt;Before dawn had come, my host was knocking gently on the door to my room to see if I was awake. I sat up slowly to let the sleep spill off my aching body, and I began to dress and prepare for the day. I had really only packed 2 sets of clothing, so I donned the outfit from the day before to avoid dirtying more clothes than necessary. In the dim light of the room I gathered my bags with the help of my new friend, and we made our way downstairs.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1426_fotor.jpg&#34;  alt=&#34;sunrise in a small town in Cuba and a bright green porch light&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Gear secured and pack on my back, I followed my guide through a pre-dawn Paso Real de San Diego. The town was buzzing in the dark, adults headed to their jobs and children on their way to school. The students were dressed in matching uniforms and lined up elementary school fashion along building walls as they waited for their buses to arrive. They stared in awe as I walked past, a strange gringo with so many packs and on a bike headed for… where? It seemed I was their bit of intrigue for the morning, and I smiled at all of them as they watched me saunter drowsily through the town.&lt;/p&gt;
&lt;p&gt;It was surreal to see the familiar patterns these people created as their daily lives unfolded, and I felt much like a ghost sneaking through the gaps between their motion. I hadn’t existed in their world the day before, and I wouldn’t exist in it tomorrow. It was only for this brief moment in time that our paths intersected.&lt;/p&gt;
&lt;p&gt;Upon reaching a main street on the edge of town, I received directions and a fond farewell from my host. Walking down the busy road, I found the autopista just as the sun rose over Cuba that morning and began the second day of my ride to Viñales.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1428.jpg&#34;  alt=&#34;pink sunrise over cloudy mountains in Cuban countryside&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1433_fotor.jpg&#34;  alt=&#34;sunrise at the end of the road in Cuban countryside&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;It was a much harder morning than I had anticipated. Mostly, my ass hurt. I guess my bike seat hadn’t been meant for long distance rides, but since I had never done anything like this before it hadn’t occurred to me to look into it. My solution was to wrap my sweater around the seat and create a thicker, wider cushion for my bony butt to sink into during the ride.&lt;/p&gt;
&lt;p&gt;The improvised sweater pad was nice, but the truth was that I was in pain. I was sore, my thighs were weak from the day before, and my back and shoulders were starting to feel the constant weight of my 20 pound pack. Though I was making progress at much the same speed, the ride was starting to feel a bit like a slog, and my view of the endless highway began to take a toll on my mental state. I knew I still had a long way to go, so I broke the ride into small distances to help maintain my focus. I’d ride 10 miles and do a quick status check on myself, and after that I’d ride another 10 miles and repeat. The routine was working, and I stuck with it.&lt;/p&gt;
&lt;p&gt;But I was also running out of water. Cuba is not a place where you want that to happen, and pretty early in the day I had sucked my Camelbak dry for the second time on the ride. I only had two bottles left now. At the rate I was drinking I knew I would need more, but finding bottled water in Cuba is no simple task, especially in the countryside far from anywhere tourists might be looking for it. I decided it was better to search for it now before I truly needed it.&lt;/p&gt;
&lt;p&gt;I stopped at every spot along the autopista to ask where I could find some agua. Even a place that seemed to be a truck stop had none on hand, and I rode on to search the next town. Everyone I asked directed me somewhere different, and bottled water remained elusive in the heat. I knew that continuing this wild goose chase could lead me pretty far off my intended path, and I didn’t want to add any unnecessary miles to my trip. My search would go on, but it would have to be in the direction of Viñales.&lt;/p&gt;
&lt;p&gt;Worried about my resources, I thought about rationing my water and took only the smallest sips at regular intervals. Thankfully, I didn’t need to do this for long. As I continued along the autopista I came across what was perhaps the strangest rest stop I’ve encountered in my travels so far. Sitting literally on the edge of the highway was a beautiful little restaurant seemingly waiting for me to arrive. There was a patio with tables and chairs, a back area with an outdoor grill, a classic clay shingle roof, healthy green vines and plants growing everywhere around it, and even a little window with a lovely Cuban woman behind it asking me if she could get me anything.&lt;/p&gt;
&lt;p&gt;It was a place right out of a dream! And what made it so strange was that there was absolutely nothing else around it. There were no other buildings, no other people, no cars parked, nothing - just low farms as far as the eye could see, and I began to wonder what this place was doing there in the middle of nowhere. I was the only customer, and it didn’t seem like anyone would join me anytime soon. How I wish I could have eaten dinner there under the stars that night. Instead, I ordered two small bottles of water, and I drank a whole one before I even got back on my bike. Resuming the 10-mile routine I had begun earlier, I pushed on toward the horizon.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1461.jpg&#34;  alt=&#34;dirt roadside in Cuba near telephone wires&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;My excitement mounted when I found the off ramp pointing to Viñales. I was almost there! In 20 miles I would be at my final destination, and my journey would be a success. Leaving the autopista, I encountered again the gravel and hard dirt roads of the Cuban countryside. This time I was happy for them. The curvy, pockmarked road to Viñales was a nice change of pace from the monotony of the highway, and I was starting to encounter more people along the way. Shouts filled the air as I passed by the locals.&lt;/p&gt;
&lt;p&gt;’¿Casa particular, Señor?’&lt;br&gt;
‘¡No, gracias!’&lt;/p&gt;
&lt;p&gt;‘¿A dónde vas?’ (Where are you going?)&lt;br&gt;
‘¡A Viñales!’&lt;br&gt;
‘¡Está muy lejo!’ (It’s really far!)&lt;/p&gt;
&lt;p&gt;How far I had already ridden! If they had known I started in Havana, would they still have tried to warn me about the distance? Or would they think me crazy like all the others? From where I sat, another few miles didn’t seem like so much to go compared to the great distance I had traveled in a day and a half. I was riding high in my seat and pushing on toward Viñales, and I was ready for my destination to finally reveal itself. It was just around the corner!&lt;/p&gt;
&lt;p&gt;Except for that damn mountain.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1472_fotor.jpg&#34;  alt=&#34;mountain view under a tree in Cuba&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;&lt;em&gt;Concluded in &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/&#34; &gt;Part 3&lt;/a&gt;!&lt;/em&gt;&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>The Road to Viñales - A Tale of Cycling in Cuba - Part 1</title>
      <link>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-1/</link>
      <pubDate>Tue, 29 Aug 2017 00:00:00 +0000</pubDate>
      
      <guid>https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-1/</guid>
      <description>
        
          &lt;img src=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-1/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;&lt;strong&gt;Author&amp;rsquo;s Note:&lt;/strong&gt; This story was written on a blog that I began along with my travels a few years ago. The trip greatly fueled my desire to travel which eventually led to living as an expat. For both sentimental and archival purposes, I decided to include this story as the first set of posts on my new site. I hope you enjoy it.&lt;/em&gt; 🙂&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Part 1&lt;/strong&gt; | &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/&#34; &gt;Part 2&lt;/a&gt; | &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-3/&#34; &gt;Part 3&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;As I lay on the side of the road, the afternoon sun bearing down on me and threatening to steal away my consciousness, I could hear the throaty rumble of a motor headed my way. I barely registered the rusty blue taxi that passed little more than arm’s length in front of me, leaving a cloud of lead-laden exhaust in its wake. Exhaustion spread through me like a virus, and I sat still in the silence.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1477_fotor.jpg&#34;  alt=&#34;Viñales mountain road&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;I hadn’t seen this mountain coming, and it had made things difficult. I might have said that climbing it on a bicycle had been tough, but how could I know? I had given up and started pushing the bike at least an hour ago. After riding it through the countryside for 2 days, I just didn’t have the energy to pedal up the side of a mountain.&lt;/p&gt;
&lt;p&gt;I took a deep breath in the silence. My body ached, and my mind was numb from the heat. All trivial thoughts had been discarded in favor of surviving this ordeal, but now there was doubt forming in my mind. Lying in the dirt, too weak to fight back against the most dangerous of questions, I couldn’t help but ask myself -&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Am I strong enough to finish this?&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;how-it-all-began&#34;&gt;How It All Began&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Click.&lt;/em&gt; Tickets purchased. I was going to Cuba for 2 weeks!&lt;/p&gt;
&lt;p&gt;Flight secured, I now had the \important task of figuring out what I was going to do when I got there. I didn’t want to be the stereotypical Havana tourist, voluntarily sequestering myself at a beach resort or spending my time searching for exclusive nightclubs where I could drink and party all night. That’s just not how I travel. Instead, I wanted to interact personally with the locals and to discover what makes Cuba and its people special.&lt;/p&gt;
&lt;p&gt;I also wanted to step outside Havana to see a side of the country I might not normally encounter, and to that end I decided to go on a cross country bike ride. I would begin in Havana and ride my bicycle 130 miles (209 km) west to a place called Valle de Viñales (Valley of Vines), home of the best rock climbing in Cuba. I hoped that in 2 days of riding through the countryside I could gain a more rounded perspective on Cuba, and when I finished my ride I could partake in my favorite outdoor sport. It sounded awesome.&lt;/p&gt;
&lt;p&gt;But there was a problem - I didn’t know if I could actually do it. I had never ridden that far on a bike before, and I would be totally alone in unfamiliar territory. I knew I could ride for a little while in the flats of Illinois, but 130 miles across Cuba? And then back? I wasn’t sure.&lt;/p&gt;
&lt;p&gt;I pulled up a map of Cuba for guidance. Judging by the few roads I could see, it looked like there was a highway along the north coast of the island that made its way to Viñales with little elevation change. That was good news. Still, that was all the information I could find, and it made me nervous. There was no way for me to know what the road was actually like. But again and again, I followed the path from Havana to Viñales, and each time my eyes made the journey my heart skipped with excitement. I &lt;em&gt;had&lt;/em&gt; to go on this ride.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1wj0ZawLLSjKgn8J3xES0NFpFsQc&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Over the next few weeks I bought all the gear I thought I would need, made arrangements to ship my bike with Spirit, and packed it into a big box for the flight to Cuba. I waited restlessly for the day of my departure, and I shared my excitement for my ride with everyone who would listen.&lt;/p&gt;
&lt;p&gt;‘You’re crazy!’ my friends said. So I knew it was a great idea.&lt;/p&gt;
&lt;h2 id=&#34;first-days-in-havana&#34;&gt;First Days in Havana&lt;/h2&gt;
&lt;p&gt;The plan was to spend 3 days in Havana and begin my long ride out to Viñales on the 4th morning of my trip. During the day I wandered around well-known parts of the city like Habana Vieja (Old Havana), the Malecón, and Vedado. It was a lot of fun to explore those areas, and I had a great time conversing with locals everywhere I went. Fishermen, fruit vendors, musicians - I even talked with someone who I didn’t realize was a &lt;em&gt;jinetera&lt;/em&gt; (prostitute), but she got annoyed with my rambling and asked if I was going to make her an offer for the night. Realizing my mistake, I apologized and bought her some cigarettes for wasting her time. I got better at spotting prostitutes after that.&lt;/p&gt;
&lt;p&gt;When evening came I made friends with the other travelers in the hostel. We swapped our travel stories over dinner every night, and it was really cool to meet people from so many different parts of the world and hear about the journeys they were on. Cuba was the last stop for some, but others would continue on to places like Mexico, Panama, or the USA. With excitement, I would tell them about my grand plan to ride west and climb in the mountains of Viñales. Like my friends back home, they thought I was crazy to go on such a ride, but I could tell they were also excited for my adventure just like I was.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1272.jpg&#34;  alt=&#34;Havana city dirt road&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1278.jpg&#34;  alt=&#34;Havana city colorful buildings and cyclists&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1743.jpg&#34;  alt=&#34;Cuban food dinner in Havana&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Alas, my bike ride didn’t start quite as intended. I got extremely sick the night before I had planned to leave, and I spent many hours vomiting in the hostel bathroom. I painfully ejected all my food from the previous days, and even though I drank juice and water to keep my fluids up it seemed that I was only adding more material to be discharged minutes later. I was never able to pinpoint the cause of my illness - likely food or water - and it was a dangerous situation to be in.&lt;/p&gt;
&lt;p&gt;After 2 days of rest I still hadn’t fully recovered, but I couldn’t afford to lose any more time. No matter how I felt, I intended to make my way out of Havana in the morning.&lt;/p&gt;
&lt;p&gt;The next day I woke to the noises of the stirring city pouring in through an open window, and I rolled over to greet them with a groan. The muscles around my core were still tender, and the stifling heat of the room raised my lingering nausea to an uncomfortable level. With difficulty, I forced myself out of bed and stumbled to the balcony in search of fresh air.&lt;/p&gt;
&lt;p&gt;Outside, the pink light of the early morning sun shone softly against the dim silhouette of Central Havana, and a light, cool breeze danced its way through the waking city. I breathed deeply as the healing wind brushed across my cheeks and scattered away toward the horizon.&lt;/p&gt;
&lt;p&gt;No matter what, I had said. It was time to ride.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1331.jpg&#34;  alt=&#34;touring bicycle inside next to elevator in Havana&#34;  class=&#34;center&#34;  /&gt;
  


&lt;h2 id=&#34;day-1---finding-the-road-to-viñales&#34;&gt;Day 1 - Finding the Road to Viñales&lt;/h2&gt;
&lt;p&gt;Finding my way out of Havana was the first hurdle on my ride to Viñales. I had found a fantastic phone app called &lt;a href=&#34;http://maps.me&#34;  target=&#34;_blank&#34; &gt;Maps.Me&lt;/a&gt; that provided me with a map of Cuba’s roads everywhere I went. Being an entirely offline map, I was frequently concerned that I would be navigating with inaccurate location information, but somehow it managed to know &lt;em&gt;exactly&lt;/em&gt; where I was at all times and provided detailed directions every step of the way. It was pretty incredible, and I ended up putting a lot of trust in the service. Perhaps a little too much.&lt;/p&gt;
&lt;p&gt;I put in my destination and told Maps.Me to give me a bike route out of the city. It took about 2 hours to get to the edge of Havana, and the winding route south took me through areas that few tourists are likely to ever see. Stark visions of abject poverty were even clearer here than in the inner neighborhoods where tourist perception remains an outward concern. Ramshackle homes lined every street, their walls crumbling to reveal the truths of life in Havana for all those willing to see.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=15sw3_dsRix07D84KErEOztoO6Mg&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Peering through windows and holes left by the decay, I spied people going about their daily lives - watching television, having a late breakfast, and even sweeping kitchen floors in an endless effort to keep out the dust of the outside world. But not all homes were so exposed, and while it seemed that many of them suffered from structural failure and even the black char of fires long past, others appeared adorned with fresh coats of paint and cheery doormats welcoming guests of all origins.&lt;/p&gt;
&lt;p&gt;It was difficult to understand how each city block could display so many conflicting signs of life and death, yet the dissonance created by the sight of these homes and the contrasting attitudes of the people living in them was a source of intense beauty. Life was certainly not perfect here, not even easy, but the universal smiles with which these people approached each dawn and the will to make things better pushed them forward and brought them hope with every new day.&lt;/p&gt;
&lt;p&gt;Leaving the last of these neighborhoods, I continued to follow my map to the edge of the city. Pedaling into an alley walled by seemingly abandoned warehouses, I came across a bridge unlike anything I had seen yet in Cuba. It was narrow, made of solid concrete with wooden fencing on either side for protection. On the left of this bridge was an untamed patch of grass, weeds, and vines. On its right was a large pile of garbage, a landfill of trash bags spilling their vile guts and threatening to flood the bridge if the mound rose any higher. At the end of the bridge was an entrance into the wilds on the edge of Havana. It was a mythical gate into the unknown lands beyond the city, a passage with a character that you could only find in a place like Cuba.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1333.jpg&#34;  alt=&#34;path leading through garbage dump into wilderness&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;I crossed the bridge cautiously and entered the dark path, but the woods lasted only a moment. Almost immediately I was out of the trees and in the countryside, and the city of Havana had ended with such an abruptness that I felt like I had passed into another world entirely. Open pastures and farmland lined what was now a hard dirt road, and condors circled above searching for meals in the hot sun, getting hotter by the minute. I didn’t know it at the time, but my riding environment would be essentially the same for the next 110 miles or so.&lt;/p&gt;
&lt;p&gt;Nearer to Havana were many small, dense satellite towns rife with people in the streets, but as I rode further away those became less common. Most of the path was banked by empty farmland and long views to the horizon, covered by sun and the occasional white cloud. Every so often I would encounter a horse cart carrying a few locals who stared at me as I passed, but most of the time I was on my own.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1335_fotor.jpg&#34;  alt=&#34;country road next to a wall in sunlight&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1349_fotor.jpg&#34;  alt=&#34;small town in Cuba&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1340-1.jpg&#34;  alt=&#34;dirt road in Cuba countryside with big tree&#34;  class=&#34;center&#34;  /&gt;
  


&lt;h2 id=&#34;the-deception-of-mapsme&#34;&gt;The Deception of Maps.Me&lt;/h2&gt;
&lt;p&gt;The morning had been difficult. I still hadn’t quite shaken the feeling of nausea from being sick the last few days, and I probably hadn’t eaten enough to properly prepare for the ride ahead. Together these problems loomed over me throughout the morning, and my irritation showed itself around midday when I lost a bag at a rough railroad crossing. I trudged over to where it had fallen and decided it was time for a break.&lt;/p&gt;
&lt;p&gt;Thankfully, lunch was all that was necessary to get me back on my feet with a smile, but worry began to creep in again as I continued riding across the Cuban countryside. My map was doing an amazing job of keeping track of where I was, but as I moved further West I noticed that the bike trail it had given me was not quite what I’d thought it was. Upon closer inspection, I saw that it wanted to take me straight through the spine of a mountain range that spanned East-West through the center of the island.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1dqAtKIZf4lBudlhkfjG1oKk3ky0&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;Riding through a mountain range with an 1800 ft (548 m) change in elevation (twice!) was absolutely not the ride I wanted to be on. I had willingly discarded my original plan of riding along the northern coast in favor of following a map that had more certainty about it, but somehow I had completely missed how difficult this route was going to be. I was in trouble, and I didn’t see an immediate solution to my problem.&lt;/p&gt;
&lt;p&gt;Devastated by this new information, I stopped for a break in a little town called Chacón to ask myself if a mountain ride was what I wanted to do. And that was where my luck began to improve. I was resting under the canopy of a small roadside drink shop when I caught sight of two thin silhouettes approaching from a distance. Cuban riders decked out in team cycling outfits and riding the fanciest bikes I had seen in the country rode up like they owned the place and ordered a few glasses of &lt;em&gt;jugos naturales&lt;/em&gt;. They waved me over as a fellow cyclist, ordered me some juice, and asked where I was headed.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1HC1weHdUbDKpT5ROEectSI-WVGk&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;p&gt;When I told them in broken Spanish that I was on the way to Viñales, they said I was crazy! This was the new normal, I thought. But they also said that I was basically killing myself riding these dirt backroads - there was a much better path waiting for me just down the road. All I had to do was turn onto the &lt;em&gt;autopista&lt;/em&gt; (the highway) up ahead and it would take me nearly all the way to Viñales - no turns, no crappy roads, no misleading maps.&lt;/p&gt;
&lt;p&gt;At first, I was a little confused. Wasn’t it illegal to ride on the autopista? It seemed that rule only applied in and around Havana, but that was a detail that I had been missing. Maps.Me didn’t understand that I could have ridden on the autopista the whole way, so since I asked for a bike path it created a route for me entirely without the highway in mind. The Cuban cyclists insisted that I take the autopista the rest of the way and wished me luck on the rest of my journey. I spent the next half hour or so beneath the highway in a drainage tunnel and had some food before getting underway again.&lt;/p&gt;

  
  &lt;img src=&#34;img/gopr1386.jpg&#34;  alt=&#34;drainage tunnel under highway in Cuba with bicycle next to the entrance&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;The autopista was such a gift! All of a sudden I had moved from dirt roads to the smooth, paved beauty of a highway, and what a difference that change made. Any worries I’d had about riding on the autopista were quickly gone as I began to understand how it had been laid out. There were two auto lanes in each direction of travel, separated in the middle by grassy strips, and outside these lanes was an extra stretch of pavement meant purely for non-auto use. The outer shoulders may have been lower quality pavement at times, but it was the perfect place for horse carts, pedestrians, and - of course - bicycles!&lt;/p&gt;
&lt;p&gt;My pace quickly increased on this new path, and I suddenly had fresh energy as though I’d begun my journey only moments before. I was excited about the speed and simplicity that the autopista offered, and I was happy that my ride across Cuba’s countryside was steadily improving. Though my route had changed many times already, I was still on my way to Viñales. And I was having a great time.&lt;/p&gt;
&lt;div class=&#34;gmap&#34;&gt;
	&lt;iframe src=&#34;https://www.google.com/maps/d/embed?mid=1Y5xkoYNRiNKGd97V8TgPk89SG48&#34; width=&#34;100%&#34; height=&#39;480&#39; frameborder=&#34;0&#34; style=&#34;border-radius: 8px;&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

  
  &lt;img src=&#34;img/gopr1390.jpg&#34;  alt=&#34;late afternoon sun over higwhay in Cuba&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/gopr1403.jpg&#34;  alt=&#34;sunset between clouds over higwhay in Cuba&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;&lt;em&gt;Continued in &lt;a href=&#34;https://www.adamormsby.com/posts/adam-roams-cycling-vinales/part-2/&#34; &gt;Part 2&lt;/a&gt;!&lt;/em&gt;&lt;/p&gt;

        
        </description>
    </item>
    
  </channel>
</rss>