<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>hugo on Adam Ormsby</title>
    <link>https://www.adamormsby.com/tags/hugo/</link>
    <description>Recent content in hugo on Adam Ormsby</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 19 May 2020 18:30:00 -0500</lastBuildDate>
    
	<atom:link href="https://www.adamormsby.com/tags/hugo/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Hugo Themes - Making Modifications while Keeping the Source Up-To-Date</title>
      <link>https://www.adamormsby.com/posts/hugo-themes-making-modifications/</link>
      <pubDate>Tue, 19 May 2020 18:30:00 -0500</pubDate>
      
      <guid>https://www.adamormsby.com/posts/hugo-themes-making-modifications/</guid>
      <description>
        
          &lt;image src=&#34;https://www.adamormsby.com/posts/hugo-themes-making-modifications/cover.jpg&#34;/&gt;
          
        
        
        &lt;p&gt;&lt;em&gt;This is a continuation of a previous post - &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/&#34; &gt;How to Set Up a Hugo Site on Github Pages - with Git Submodules!&lt;/a&gt; I will reference some things we did there, so be sure to check it out if you&amp;rsquo;re confused about something.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;In today&amp;rsquo;s post, I want to take a look at how we can keep our Hugo themes up-to-date. &amp;lsquo;But my theme works fine!&amp;rsquo; you say. &amp;lsquo;Why would I ever need to update it?&amp;rsquo; Well, when you download or clone a Hugo theme from its hosted git repository, you&amp;rsquo;re getting its latest version &lt;em&gt;at that point in time.&lt;/em&gt; So even if the theme&amp;rsquo;s creator pushes updates to the code - with fixes, new features, and outside pull requests - you&amp;rsquo;ll still be stuck using the version you downloaded before. While this is fine in some cases, many of us want the newest updates so we can take advantage of a stronger, improved theme.&lt;/p&gt;
&lt;p&gt;The key to this process is using git submodules to track and pull updates to a theme with just a few quick commands. If you followed my previous tutorial on &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/&#34; &gt;adding a theme to your Hugo site as a git submodule&lt;/a&gt;, you already have a functional Hugo site with a (forked) theme included. Starting there, let&amp;rsquo;s see how to connect our theme to its remote source repo, which git commands we need to update it, and even how to safely make our own custom changes to the theme while keeping it in line with the source.&lt;/p&gt;
&lt;h2 id=&#34;just-the-updates-please&#34;&gt;Just the Updates, Please&lt;/h2&gt;
&lt;p&gt;If we don&amp;rsquo;t intend to customize a theme at all, we can keep our workflow super simple. All we need to do is add the theme repo into our project as a submodule and periodically run a few git commands to check for updates. For the moment, let&amp;rsquo;s pretend we haven&amp;rsquo;t forked the theme repo and see what it would be like to clone the source directly. We&amp;rsquo;ll see an example with our fork in the next section.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s a quick refresher command for adding a submodule to our project.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; git submodule add https://github.com/panr/hugo-theme-hello-friend.git themes/hello-friend
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;You might be thinking you can simply run &lt;code&gt;git clone&lt;/code&gt; instead of adding the theme as a submodule, but our site is already set up as a git repo so that doesn&amp;rsquo;t work here. Git doesn&amp;rsquo;t like having &lt;code&gt;.git&lt;/code&gt; files in a subdirectory without a &lt;code&gt;.gitmodules&lt;/code&gt; component in the root. For more on that, see &lt;a href=&#34;https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/&#34;  target=&#34;_blank&#34; &gt;this ‘simple dev’ post.&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In the example above, we added our submodule by pulling the theme&amp;rsquo;s source repo directly into our project. With the &lt;code&gt;git remote&lt;/code&gt; command, we can easily verify that it&amp;rsquo;s connected to the correct remote repo.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; cd themes/hello-friend
&amp;gt; git remote --verbose
origin  https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
  
  &lt;img src=&#34;img/simple-update.jpg&#34;  alt=&#34;one-way update directly from theme source&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;And there it is! With this setup, all we need to do is pull updates straight from the source. From the theme&amp;rsquo;s directory, we run the following terminal commands.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# optional: fetch any updates to view changes before merging&lt;/span&gt;
&amp;gt; git fetch origin
&amp;gt; git status
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;status output here&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# pull updates and merge them automatically&lt;/span&gt;
&amp;gt; git pull
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Since we&amp;rsquo;re not making any theme changes in this workflow, we shouldn&amp;rsquo;t expect any merging issues during the &lt;code&gt;git pull&lt;/code&gt;. We don&amp;rsquo;t really &lt;em&gt;need&lt;/em&gt; to fetch or check the status of the repo, but it&amp;rsquo;s always nice to see incoming changes before we bring them in.&lt;/p&gt;
&lt;p&gt;And that&amp;rsquo;s it! Getting updates every so often is no problem if we don&amp;rsquo;t intend to make our own customizations to a theme. But hey - customization is where the fun &lt;em&gt;really&lt;/em&gt; begins.&lt;/p&gt;
&lt;h2 id=&#34;updates-and-theme-customization---a-parallel-branch-workflow&#34;&gt;Updates and Theme Customization - A Parallel Branch Workflow&lt;/h2&gt;
&lt;p&gt;Here&amp;rsquo;s the scenario - We want to add a Hugo theme, make custom changes, and still to get updates from the theme&amp;rsquo;s original source. The method used above doesn&amp;rsquo;t work here for a few reasons:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;We can&amp;rsquo;t push our custom changes to the theme&amp;rsquo;s source repo&lt;/strong&gt;. We simply don&amp;rsquo;t have those permissions on the repo. Our local changes will not be safely stored anywhere, and any pulled updates may not be easily mergeable.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Incoming updates may require merges.&lt;/strong&gt; If we&amp;rsquo;ve modified some of the theme files that are being updated in the source, then a simple &lt;code&gt;git pull&lt;/code&gt; will not be enough to deal with the resulting conflicts.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Thankfully, a more advanced git workflow would help deal with these issues. Remember &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#add-a-theme-to-our-site&#34; &gt;how we set up a forked theme repo&lt;/a&gt; in the last post? Now we get to take advantage of it. Crucially, the forked repo is &lt;em&gt;ours&lt;/em&gt;, so we have full write access to it and don&amp;rsquo;t need to worry about repo permissions. We can do whatever we want.&lt;/p&gt;
&lt;h3 id=&#34;add-a-remote-repo&#34;&gt;Add a Remote Repo&lt;/h3&gt;
&lt;p&gt;However, our fork doesn&amp;rsquo;t automatically receive source updates either! Here, an additional step is needed to link our fork back to the source repo. Earlier, in the direct update workflow, we used the &lt;code&gt;git remote&lt;/code&gt; command to verify that we had the correct remote repo connections. Running it in our forked theme directory, we see only the fork as our remote.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# my forked repo URLs as an example&lt;/span&gt;
&amp;gt; git remote --verbose
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To get updates from the source repo, we need to add a &lt;em&gt;second&lt;/em&gt; remote repo - yes, git can do this! We simply run this command in our working directory and check our remotes again to verify the connection.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# add a new remote repo connection&lt;/span&gt;
&amp;gt; git remote add upstream https://github.com/panr/hugo-theme-hello-friend.git

&amp;gt; git remote --verbose
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
origin  https://github.com/aormsby/F-hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
upstream   https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;fetch&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
upstream   https://github.com/panr/hugo-theme-hello-friend.git &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;push&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ta-da! Our local theme repo is now linked to both our forked repo &lt;em&gt;and&lt;/em&gt; the source repo, which we called &lt;code&gt;upstream&lt;/code&gt;. (This is a conventional label, but any name you choose is fine.) At this point, our setup already supports getting updates from the source, but the process is a little different than before.&lt;/p&gt;
&lt;p&gt;Normally, when we&amp;rsquo;re updating directly from a single remote repo, all we need to do is &lt;code&gt;pull&lt;/code&gt; the data to our local directory so that the local matches the remote. We&amp;rsquo;ll still do that here, but we explicitly pull data from the &lt;code&gt;upstream&lt;/code&gt; repo we added. We&amp;rsquo;ll also have to make an additional &lt;code&gt;push&lt;/code&gt; to our forked repo - &lt;code&gt;origin&lt;/code&gt; - to update it with the new code. Here&amp;rsquo;s how that works compared to the previous example.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/forked-update.jpg&#34;  alt=&#34;comparison of update methods&#34;   /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;Left: simple update / Right: updating with a fork&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Assuming you&amp;rsquo;re still on your &lt;code&gt;master&lt;/code&gt; branch, here are the modified commands needed to pull and push the updates.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# optional: fetch any updates to view changes before merging&lt;/span&gt;
&amp;gt; git fetch upstream master
&amp;gt; git status
&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;status output here&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# pull updates and merge them automatically&lt;/span&gt;
&amp;gt; git pull upstream master

&lt;span style=&#34;color:#75715e&#34;&gt;# push source updates to forked repo&lt;/span&gt;
&amp;gt; git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;With no local changes to our theme, the commands run smoothly with no errors - and we want to keep it that way! Simple is good, and an update process that doesn&amp;rsquo;t result in merge conflicts is always nice. But how do we manage to avoid conflicts if we want to customize the theme? Simple - don&amp;rsquo;t do your work on &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;branching-customizing-and-merging-updates&#34;&gt;Branching, Customizing, and Merging Updates&lt;/h3&gt;
&lt;p&gt;Although you technically &lt;em&gt;could&lt;/em&gt; make theme customizations on the &lt;code&gt;master&lt;/code&gt; branch, this increases the chances of having to resolve merge conflicts every time you try to pull an update. It&amp;rsquo;s fine if that&amp;rsquo;s how you want to work, but I &lt;em&gt;highly&lt;/em&gt; recommend avoiding it. In my experience, it&amp;rsquo;s often best to keep &lt;code&gt;master&lt;/code&gt; sparkly clean and do your dirty work on a different branch.&lt;/p&gt;
&lt;p&gt;For example, I do my theme in a separate branch that is always kept in parallel with &lt;code&gt;master&lt;/code&gt;. I&amp;rsquo;ve named it &lt;code&gt;working&lt;/code&gt;, as it&amp;rsquo;s the branch that I &lt;em&gt;work&lt;/em&gt; in. (Not exactly clever, I know.) Since it has all of my theme customizations, it&amp;rsquo;s also the branch that I use when I build my site. Every so often, I switch back over to &lt;code&gt;master&lt;/code&gt;, go through our update process, and then explicitly merge any new theme updates from &lt;code&gt;master&lt;/code&gt; into &lt;code&gt;working&lt;/code&gt; so that I have all the latest features in my working  branch. Visually, it&amp;rsquo;s kind of like this.&lt;/p&gt;

  
  &lt;img src=&#34;img/parallel-branches.jpg&#34;  alt=&#34;parallel branch system with updates merged from master&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;This is just one possible theme customization workflow, but we can benefit from a setup like this. For example &amp;ndash;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Our workspace is separate from our update environment.&lt;/strong&gt; Getting theme updates will always be a painless process, and we have more control over merging when the time comes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit histories are clearer.&lt;/strong&gt; Histories are much easier to read if source updates and custom work don&amp;rsquo;t get tangled up, and this can be super helpful when performing more advanced git actions on a branch.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;All the data is on our forked repo.&lt;/strong&gt; The customizations &lt;em&gt;and&lt;/em&gt; the pulled updates all live on our fork, which means we have full control of the data.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;We can test on &lt;code&gt;master&lt;/code&gt; before merging.&lt;/strong&gt; If we&amp;rsquo;re unsure of how a new feature will display on our site, we can run a build using the &lt;code&gt;master&lt;/code&gt; code. It&amp;rsquo;s a nice clean test bed before performing a merge.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The drawbacks are much the same as I mentioned in the &lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#some-drawbacks&#34; &gt;last post&lt;/a&gt; with the addition that now we&amp;rsquo;d have at least one more working branch to manage. However, I&amp;rsquo;ve found this parallel branch workflow quite nice after getting more familiar with it. Perhaps you will, too.&lt;/p&gt;
&lt;p&gt;Here are the commands we can use to get our &lt;code&gt;working&lt;/code&gt; branch up and running. (You can choose a better name if you&amp;rsquo;d like.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# create a new branch and switch to it&lt;/span&gt;
&amp;gt; git branch working
&amp;gt; git checkout working
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;We make some changes, commit our work, and push to our forked repo (&lt;a href=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/#test-site-and-deploy&#34; &gt;see these commands for help&lt;/a&gt;). Time passes&amp;hellip; and we want to get some updates on &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# switch to master branch&lt;/span&gt;
&amp;gt; git checkout master

&lt;span style=&#34;color:#75715e&#34;&gt;# quick update&lt;/span&gt;
&amp;gt; git pull upstream master
&amp;gt; git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Finally, we switch back to &lt;code&gt;working&lt;/code&gt; and merge in the updates from &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# switch to working&lt;/span&gt;
&amp;gt; git checkout working

&lt;span style=&#34;color:#75715e&#34;&gt;# merge master into current branch (working)&lt;/span&gt;
&amp;gt; git merge master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;I won&amp;rsquo;t get into resolving a merge here, so let&amp;rsquo;s cross our fingers and hope there are no conflicts to deal with.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/git-merge-conflict.jpg&#34;  alt=&#34;git merge conflict comic&#34;   /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;something to look forward to :)&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;So yes - customizing your theme with this kind of workflow does take a bit of setup, and there are a few extra steps and things to keep track of to manage our code well. However, using git submodules and a parallel branch workflow do give us more leverage over our codebase, and I think that makes the extra work worthwhile. I&amp;rsquo;ve been using this workflow with my site for some time, and I don&amp;rsquo;t think I&amp;rsquo;d change anything about it.&lt;/p&gt;
&lt;p&gt;That said, there are a number of other methods that people use for managing their themes, and it&amp;rsquo;s worth exploring them to see what fits your needs best. I recently read a post about &lt;a href=&#34;https://www.hugofordevelopers.com/articles/master-hugo-modules-managing-themes-as-modules/&#34;  target=&#34;_blank&#34; &gt;managing your themes as Hugo modules by Nick Gracilla&lt;/a&gt; that I found quite interesting, and I think it&amp;rsquo;s worth checking out if you&amp;rsquo;re looking for an alternate way of doing things.&lt;/p&gt;
&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Better Deploy&lt;/strong&gt; - I&amp;rsquo;m still working on a better site deploy script! It&amp;rsquo;s looking good so far, but it&amp;rsquo;s not quite ready.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Automatic Builds&lt;/strong&gt; - This would still be great to have, so if I get around to it I&amp;rsquo;ll be sure to share my work.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Until next time! ~&lt;/p&gt;

        
        </description>
    </item>
    
    <item>
      <title>How to Set Up a Hugo Site on Github Pages - with Git Submodules!</title>
      <link>https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/</link>
      <pubDate>Tue, 17 Mar 2020 22:30:00 +0700</pubDate>
      
      <guid>https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/</guid>
      <description>
        
          &lt;image src=&#34;https://www.adamormsby.com/posts/how-to-set-up-a-hugo-site-on-github-pages-with-submodules/cover.jpg&#34;/&gt;
          
        
        
        &lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;I made this blog site using the &lt;a href=&#34;https://www.gohugo.io&#34;  target=&#34;_blank&#34; &gt;Hugo static site generator&lt;/a&gt; because I wanted to build a simple site where I could have full control over every detail - &lt;em&gt;not&lt;/em&gt; like using Wordpress, Squarespace, or Wix. With Hugo, I can add and remove templates and functionality at will, and it feels &lt;em&gt;great&lt;/em&gt; to have that kind of power. You probably ended up here because you want that, too.&lt;/p&gt;
&lt;p&gt;In this post, we&amp;rsquo;ll take a look at how to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create a new Hugo site&lt;/li&gt;
&lt;li&gt;Host it on Github Pages&lt;/li&gt;
&lt;li&gt;Use git submodules to separate our site&amp;rsquo;s key directories into manageable chunks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We&amp;rsquo;ll also go over the benefits (and drawbacks) of using submodules in our setup, and by the end of this post, we&amp;rsquo;ll have a new Hugo project hosted on Github Pages and ready for action.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Please note:&lt;br&gt;
I&amp;rsquo;ll talk a little about branching inside our submodules later on. To keep things simple, you can assume that I&amp;rsquo;ve stayed on the main &amp;lsquo;master&amp;rsquo; branch of each git module. Also, I work on a Mac so all of my commands are Mac-specific.&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;why-git-submodules&#34;&gt;Why Git Submodules?&lt;/h3&gt;
&lt;p&gt;Every git project is stored as a versioned code repository (a repo). Git submodules allow us to reference other repos within a project, which effectively puts a project inside a project (or a repo inside a repo). The submodule&amp;rsquo;s code can then be used by the main project, but the submodule &lt;em&gt;&lt;strong&gt;maintains its own commit and branch history,&lt;/strong&gt;&lt;/em&gt; which separates the projects and can be a pretty powerful thing.&lt;/p&gt;

  
  &lt;img src=&#34;img/explain-submodules.jpg&#34;  alt=&#34;diagram showing how code is included using submodules with a git project&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;In a Hugo project, most of what we see is source data - the raw files we manipulate before building our site. After Hugo builds our site, our &amp;lsquo;ready-to-publish&amp;rsquo; data gets output to the &lt;code&gt;public&lt;/code&gt; directory of our project. By turning the &lt;code&gt;public&lt;/code&gt; folder into a submodule of the main project, we can treat it as a separate entity with a separate history. Let&amp;rsquo;s see what that process looks like.&lt;/p&gt;
&lt;h2 id=&#34;install-hugo-and-create-a-project&#34;&gt;Install Hugo and Create a Project&lt;/h2&gt;
&lt;p&gt;First things first, we need to install Hugo! We&amp;rsquo;ll run through the key Mac commands quickly here, but if you need any more help you can always check &lt;a href=&#34;https://gohugo.io/getting-started/quick-start/&#34;  target=&#34;_blank&#34; &gt;Hugo’s ‘Quick Start’ guide&lt;/a&gt; for more details or information about installing on Windows and Linux.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Open a terminal. Alternatively, you can VSCode&amp;#39;s terminal - it&amp;#39;s great!&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 2. If you don&amp;#39;t have brew installed --&lt;/span&gt;
&amp;gt; /bin/bash -c &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 3. Install Hugo&lt;/span&gt;
&amp;gt; brew install hugo

&lt;span style=&#34;color:#75715e&#34;&gt;# 4. Move to the directory where you want to create the project.&lt;/span&gt;
&amp;gt; cd &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;MY/DIRECTORY/NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Create a new Hugo project. I&amp;#39;ll use &amp;#34;hugo-gh&amp;#34; as my sample name.&lt;/span&gt;
&amp;gt; hugo new site &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;SITE_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;So far, we&amp;rsquo;ve installed Hugo on our machine and created a new template project named &lt;strong&gt;hugo-gh&lt;/strong&gt;. If you&amp;rsquo;re following Hugo&amp;rsquo;s Quick Start guide, you may be tempted to move straight on to adding a theme, running the local server, and seeing your site. We&amp;rsquo;ll &lt;em&gt;absolutely&lt;/em&gt; get to all that, but since our goal here is to use git submodules to manage the different parts of our project, it would benefit us to go through some setup steps on Github first.&lt;/p&gt;
&lt;h2 id=&#34;push-project-files-to-github&#34;&gt;Push Project Files to Github&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s get our project versioned with Github right away! We&amp;rsquo;ll need to create two repositories on Github - one to host our source code and one to host our live site data.&lt;/p&gt;
&lt;h3 id=&#34;source-code-repository&#34;&gt;Source Code Repository&lt;/h3&gt;
&lt;p&gt;Sign in to Github and create a new repository. I&amp;rsquo;ll call mine &lt;strong&gt;hugo-gh-pages-source&lt;/strong&gt;.&lt;/p&gt;

  
  &lt;img src=&#34;img/github-new-repo.jpg&#34;  alt=&#34;create a new github repo&#34;  class=&#34;center&#34;  /&gt;
  



  
  &lt;img src=&#34;img/github-repo-name.jpg&#34;  alt=&#34;name the new github repo&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;&lt;em&gt;&lt;strong&gt;Hot tip:&lt;/strong&gt; If we create a repo &lt;em&gt;without&lt;/em&gt; a README file it&amp;rsquo;s easier to avoid accidental history conflicts when pushing a local project to a fresh repo. We can always add one later.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;When our new empty repo is ready, go back to the terminal window and input these commands to initialize our local repo and push to Github.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(If you already have a &lt;code&gt;public&lt;/code&gt; folder in your project, delete it before doing any of this to save some headaches.)&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Enter the project folder.&lt;/span&gt;
&amp;gt; cd hugo-gh

&lt;span style=&#34;color:#75715e&#34;&gt;# 2. Initialize git locally.&lt;/span&gt;
&amp;gt; git init

&lt;span style=&#34;color:#75715e&#34;&gt;# 3. Set our new Github repo as the remote for our local project&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# (my sample URL - https://github.com/aormsby/hugo-gh-pages-source.git)&lt;/span&gt;
&amp;gt; git remote add origin https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;SOURCE_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git

&lt;span style=&#34;color:#75715e&#34;&gt;# 4. Stage all files for commit.&lt;/span&gt;
&amp;gt; git add .

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Commit files.&lt;/span&gt;
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;committing our hugo template&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 6. Push to the remote master&lt;/span&gt;
&amp;gt; git push -u origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And there you have it! Our project source is now pushed to our Github repo.&lt;/p&gt;

  
  &lt;img src=&#34;img/source-pushed.jpg&#34;  alt=&#34;source project pushed to Github&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;You could &lt;em&gt;absolutely&lt;/em&gt; set up your source repo to be the host of your site using Github Pages, and you may have good reasons for doing so. That would require a different setup that you can find steps for on Hugo&amp;rsquo;s &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#deployment-of-project-pages-from-docs-folder-on-master-branch&#34;  target=&#34;_blank&#34; &gt;Host on Github&lt;/a&gt; docs page. However, if we do this we ignore our chance to separate &lt;code&gt;public&lt;/code&gt; into a separately versioned repo. To accomplish this, we have to create a second repository.&lt;/p&gt;
&lt;h3 id=&#34;live-site-data-repository&#34;&gt;Live Site Data Repository&lt;/h3&gt;
&lt;p&gt;Let&amp;rsquo;s add our first submodule to the project! Remember, our goal is to separate the commit histories of our project source and our site build output to the &lt;code&gt;public&lt;/code&gt; directory. First, we create another repo on Github for our public site data. I&amp;rsquo;ll call mine &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt;. In our local terminal, run the following command from the project root.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# my sample URL - https://github.com/aormsby/hugo-gh-pages-public.git&lt;/span&gt;
&amp;gt; git submodule add https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;PUBLIC_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git public
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Sweet! We now have a submodule initialized and loaded into our project under the &lt;code&gt;public&lt;/code&gt; directory, and it&amp;rsquo;s already connected to its remote origin. Let&amp;rsquo;s do a quick site build just to put something into the remote Github repo. The commands needed are a little tedious, but it&amp;rsquo;s good to know the process.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 1. Perform a site build and output to &amp;#39;public/&amp;#39; directory.&lt;/span&gt;
&amp;gt; hugo

&lt;span style=&#34;color:#75715e&#34;&gt;# 2-4.&lt;/span&gt;
&amp;gt; cd public
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;first build&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 5. Return to the project root.&lt;/span&gt;
&amp;gt; cd ../

&lt;span style=&#34;color:#75715e&#34;&gt;# 6-7.&lt;/span&gt;
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;first build - update submodule reference&amp;#34;&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# 8. Push the source project *and* the public submodule to Github together.&lt;/span&gt;
&amp;gt; git push -u origin master --recurse-submodules&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;on-demand
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It&amp;rsquo;s &lt;em&gt;&lt;strong&gt;super important&lt;/strong&gt;&lt;/em&gt; when we build to make sure that we commit and push &lt;em&gt;both&lt;/em&gt; the public submodule and the main project. For each submodule commit, the project updates its reference to the submodule to maintain its connection to the correct commit. The &lt;code&gt;--recurse-submodules=on-demand&lt;/code&gt; command pushes all of the project modules at the same time.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/submodule-reference-terminal.jpg&#34;  alt=&#34;submodule reference in terminal using git status command&#34;   /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;submodule reference updated vied in the terminal after &lt;code&gt;git status&lt;/code&gt; command&lt;/figcaption&gt;
    
  &lt;/figure&gt;



  &lt;figure class=&#34;center&#34; &gt;
    
    &lt;img src=&#34;img/submodule-reference-github.jpg&#34;  alt=&#34;submodule reference on github after pushing&#34;   /&gt;
    
    
      &lt;figcaption class=&#34;center&#34; &gt;submodule reference on github after pushing&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;h2 id=&#34;enable-github-pages&#34;&gt;Enable Github Pages&lt;/h2&gt;
&lt;p&gt;On Github, our &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt; repo now has some data. Go to the repo settings and find the Github Pages section. Set the &lt;strong&gt;Source&lt;/strong&gt; of our site to &lt;strong&gt;master branch&lt;/strong&gt;.&lt;/p&gt;

  
  &lt;img src=&#34;img/github-pages-settings.jpg&#34;  alt=&#34;menu to update Github Pages settings to use master branch&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;With these settings, Github Pages will be able to serve our site from the repo starting with the &lt;strong&gt;index.html&lt;/strong&gt; file in its root directory. The live URL for the site is built from your user name and the project name. Here&amp;rsquo;s my sample URL - &lt;a href=&#34;https://aormsby.github.io/hugo-gh-pages-public&#34;  target=&#34;_blank&#34; &gt;&lt;!-- raw HTML omitted --&gt;&lt;a href=&#34;https://aormsby.github.io/hugo-gh-pages-public&#34;&gt;https://aormsby.github.io/hugo-gh-pages-public&lt;/a&gt;&lt;!-- raw HTML omitted --&gt;&lt;/a&gt;. At this point, our site won&amp;rsquo;t display anything except an error message since Hugo requires some page templates or a full theme to generate the pages. That&amp;rsquo;s fine. We just wanted to add some stuff to Github so we could access the repo&amp;rsquo;s Github Pages settings as we just did.&lt;/p&gt;
&lt;h2 id=&#34;benefits-of-making-a-submodule-in-public&#34;&gt;Benefits of Making a Submodule in &amp;lsquo;Public&amp;rsquo;&lt;/h2&gt;
&lt;p&gt;To recap, here&amp;rsquo;s our project setup so far.&lt;/p&gt;

  
  &lt;img src=&#34;img/submodules-diagram-with-public.jpg&#34;  alt=&#34;project submodule digram with public folder&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Let&amp;rsquo;s take a look at some of the benefits of this system.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No accidental deploys&lt;/strong&gt; - With our source code separated from our site data, it&amp;rsquo;s a lot harder to accidentally push unfinished work to our live site. Even if we make builds locally and push our source changes, we won&amp;rsquo;t push to our &lt;strong&gt;hugo-gh-pages-public&lt;/strong&gt; repo without explicitly running commands to make that happen. &lt;em&gt;*sigh of relief*&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Separate rollbacks&lt;/strong&gt; - If something goes wrong, the main project and public project can be separately rolled back to earlier commits. &lt;em&gt;(Just remember to commit the modified reference updates to the main module!)&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Branch work is easier&lt;/strong&gt; - Changing branches in our source project will not change branches in our subproject (and vice versa). This is another nice safety buffer, and it gives us more options for branching in either module.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Ready for site staging&lt;/strong&gt; - We can easily create development branches in the &lt;strong&gt;public&lt;/strong&gt; submodule that could be served as development subdomains of our site and used for testing new features.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;some-drawbacks&#34;&gt;Some Drawbacks&lt;/h3&gt;
&lt;p&gt;Of course, it&amp;rsquo;s always wise to assess the risks of any setup, and there are many opinions on the &amp;lsquo;perfect system&amp;rsquo; in the dev world - &lt;strong&gt;tell me about yours in the comments!&lt;/strong&gt; To shine some light on the potential downsides of our submodule use, here are some of the concerns I&amp;rsquo;ve thought about.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Juggling multiple repos&lt;/strong&gt; - With more submodules comes more administration. It doesn&amp;rsquo;t seem so rough for me, but right now I&amp;rsquo;m working on my own. Running interlinked, asynchronous repositories comes with its own challenges in a team setting, particularly if someone forgets to push updated submodule references to the source.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No site staging with Github Pages&lt;/strong&gt; - While the &lt;strong&gt;public&lt;/strong&gt; submodule can branch and easily store data used in a site staging system, Github Pages does not seem to support subdomains from different project branches. That&amp;rsquo;s more of a Github Pages drawback, but it means we can&amp;rsquo;t take full advantage of our setup just yet. Another hosting platform might offer a solution - I&amp;rsquo;ll be looking into some options in a future post.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;add-a-theme-to-our-site&#34;&gt;Add a Theme to Our Site&lt;/h2&gt;
&lt;p&gt;Wait, we&amp;rsquo;re not finished just yet! Remember how our site doesn&amp;rsquo;t display anything except an error message right now? We need some templates to get things up and running. The easiest way to get some is to add one of the many &lt;a href=&#34;https://themes.gohugo.io/&#34;  target=&#34;_blank&#34; &gt;Hugo themes&lt;/a&gt; to our project. Since I&amp;rsquo;m already using it on this site, I&amp;rsquo;ll use the &lt;a href=&#34;https://themes.gohugo.io/hugo-theme-hello-friend/&#34;  target=&#34;_blank&#34; &gt;Hello Friend theme&lt;/a&gt; in my example.&lt;/p&gt;
&lt;p&gt;Many guides for adding a theme - including Hugo&amp;rsquo;s own docs - just tell you to clone the theme repo or download and copy it into your project&amp;rsquo;s &lt;code&gt;themes&lt;/code&gt; directory. But hey, &lt;em&gt;our&lt;/em&gt; theme today is &lt;em&gt;submodules&lt;/em&gt;, so I propose that we add a theme to our project as a &lt;em&gt;submodule&lt;/em&gt; since doing so would give us some nice dev powers over the theme.&lt;/p&gt;

  
  &lt;img src=&#34;img/submodules-diagram-with-theme.jpg&#34;  alt=&#34;project submodule digram with theme folder&#34;  class=&#34;center&#34;  /&gt;
  


&lt;p&gt;Look at it this way - directly cloning a theme into our project has two major problems.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;We can&amp;rsquo;t push our commits to the theme&amp;rsquo;s source repo, because we don&amp;rsquo;t have permission.&lt;/strong&gt; This means we can&amp;rsquo;t make changes to the theme and then keep them versioned.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A cloned project in a subdirectory isn&amp;rsquo;t linked with the main project.&lt;/strong&gt; When a submodule is added to a project, the main project adds a reference to it in a file named &lt;code&gt;.gitmodules&lt;/code&gt;. Without that reference, the main project and the theme project aren&amp;rsquo;t connected, which could cause confusion or problems down the line.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Also, Git doesn&amp;rsquo;t allow repos inside repos that aren&amp;rsquo;t submodules.&lt;/strong&gt; See &lt;a href=&#34;https://wespeter.com/posts/avoiding-git-problems-when-installing-a-theme-to-hugo/&#34;  target=&#34;_blank&#34; &gt;this ‘simple dev’ post&lt;/a&gt; for details.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Let&amp;rsquo;s solve each of those problems in one fell swoop.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make a fork of the &lt;strong&gt;Hello Friend&lt;/strong&gt; theme so we have our own copy of it.&lt;/li&gt;
&lt;/ol&gt;

  
  &lt;img src=&#34;img/fork-theme.jpg&#34;  alt=&#34;fork a theme project on Github&#34;  class=&#34;center&#34;  /&gt;
  


&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Add our forked repo as a submodule in our main project&amp;rsquo;s &lt;code&gt;themes&lt;/code&gt; folder.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Add the theme submodule from the root project folder&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# my sample URL - https://github.com/aormsby/F-hugo-theme-hello-friend.git&lt;/span&gt;
&amp;gt; git submodule add https://github.com/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;GITHUB_USERNAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;/&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;FORKED_THEME_REPO_NAME&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;.git themes/hello-friend
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Boom! Now we have our own fork of a cool theme referenced as a submodule of our Hugo project. We can make any changes we want and push them to our own repo. I&amp;rsquo;ll get into more advanced uses of theme submodules in another post, but for now we have the basics in place.&lt;/p&gt;
&lt;p&gt;Things won&amp;rsquo;t be &lt;em&gt;quite&lt;/em&gt; right without tweaking a few final settings, so let&amp;rsquo;s open the &lt;code&gt;config.toml&lt;/code&gt; file in our project root so we can modify a few lines.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Add a line so our site builds using our new theme.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;theme&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hello-friend&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Because we&amp;rsquo;re making a Github &amp;lsquo;project site&amp;rsquo; we want to change the&lt;code&gt;baseURL&lt;/code&gt; to match our project URL.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;baseURL&lt;/span&gt; = [&lt;span style=&#34;color:#a6e22e&#34;&gt;GITHUB_USER_NAME&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;github&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;io&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;PROJECT_NAME&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For example, mine will say &lt;code&gt;aormsby.github.io/hugo-gh-pages-public&lt;/code&gt;. To understand the difference between setting up a project site and a user/organization site, see these &lt;a href=&#34;https://pages.github.com/&#34;  target=&#34;_blank&#34; &gt;Github Pages&lt;/a&gt; and &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#github-user-or-organization-pages&#34;  target=&#34;_blank&#34; &gt;Hugo&lt;/a&gt; docs on the matter.&lt;/p&gt;
&lt;p&gt;There are a lot more theme settings that can be adjusted in your config file, but you can explore those on your own. Let&amp;rsquo;s deploy!&lt;/p&gt;
&lt;h2 id=&#34;test-site-and-deploy&#34;&gt;Test Site and Deploy&lt;/h2&gt;
&lt;p&gt;Running the terminal command &lt;code&gt;hugo server&lt;/code&gt; in our project root spins up a local live preview of our site that can be viewed in a browser at &lt;code&gt;localhost:1313&lt;/code&gt;. Run this now to check if our site is displaying anything (it should!), and then stop the process with &lt;code&gt;Ctrl+C&lt;/code&gt;. Just like we did before, run the commands to build, commit, and push. &lt;em&gt;(Note that we didn&amp;rsquo;t change anything in the theme, so we don&amp;rsquo;t have to push anything in that repo.)&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;gt; hugo
&amp;gt; cd public
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build with theme&amp;#34;&lt;/span&gt;
&amp;gt; cd ../
&amp;gt; git add .
&amp;gt; git commit -m &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build with theme - update submodule reference&amp;#34;&lt;/span&gt;
&amp;gt; git push -u origin master --recurse-submodules&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;on-demand
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After a few minutes, refresh the live site at &lt;code&gt;https://[USER_NAME].github.io/hugo-gh-pages-public&lt;/code&gt; and check out your new site! Congratulations, you&amp;rsquo;ve done it!&lt;/p&gt;
&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Theme Branches and Getting Updates&lt;/strong&gt; - I&amp;rsquo;ve worked out a nice branch-based system for continuing to get updates from the original theme repo while adding and changing things our forked theme repo. It&amp;rsquo;s super useful. &lt;a href=&#34;https://www.adamormsby.com/posts/hugo-themes-making-modifications/&#34; &gt;Next post!&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Better Deploy&lt;/strong&gt; - I&amp;rsquo;m sure you noticed that we had to use &lt;em&gt;a plethora&lt;/em&gt; of terminal commands to add, commit, and push files to the main project and its submodules to maintain proper commit references. I wrote them out in this post for clarity, but this process is definitely something we can automate. Hugo&amp;rsquo;s docs provide a &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#put-it-into-a-script&#34;  target=&#34;_blank&#34; &gt;basic deploy script&lt;/a&gt; to do this, and I&amp;rsquo;m working on a greatly improved version of it that I&amp;rsquo;ll write about when it&amp;rsquo;s ready for action.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Custom domains / CNAME&lt;/strong&gt; - You may want to set up a custom domain on Github Pages. Here&amp;rsquo;s &lt;a href=&#34;https://help.github.com/en/github/working-with-github-pages/configuring-a-custom-domain-for-your-github-pages-site&#34;  target=&#34;_blank&#34; &gt;some good documentation&lt;/a&gt; on how to do that.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks for reading! ~&lt;/p&gt;

        
        </description>
    </item>
    
  </channel>
</rss>